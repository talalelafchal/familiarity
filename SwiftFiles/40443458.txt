UICollectionviewCell backgroundColor not Change when selected
I'm trying to change backgorund color of cell when its selected. But cell background color not changing. func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) { let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "cell", for: indexPath) as! CategoryCollectionViewCell let category = self.categories[indexPath.row] switch cell.isSelected { case true: cell.backgroundColor = .black default: cell.backgroundColor = .white } cell.setNeedsDisplay() }
You should make use of two of the collection view delegate methods as follow: func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) { let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "cell", for: indexPath) as! CategoryCollectionViewCell cell.backgroundColor = .black } And, func collectionView(_ collectionView: UICollectionView, didDeselectItemAt indexPath: IndexPath) { let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "cell", for: indexPath) as! CategoryCollectionViewCell cell.backgroundColor = .white }
You don't need to manually change the background color upon selection. UICollectionViewCell has a property called selectedBackgroundView precisely for this purpose. Use it in your collectionView(_:cellForItemAt:) delegate method as follows: func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) { let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "cell", for: indexPath) as! CategoryCollectionViewCell cell.selectedBackgroundView = UIView(frame: cell.bounds) cell.selectedBackgroundView!.backgroundColor = .black return cell }
func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) { if let cell = collectionView.cellForItem(at: indexPath) { cell.backgroundColor = cell.isSelected ? .black : .white } }
Try the following in you didSelect delegate method: override func collectionView(collectionView: UICollectionView, didSelectItemAtIndexPath indexPath: NSIndexPath) { let selectedCell = collectionView.cellForItemAtIndexPath(indexPath) selectedCell?.backgroundColor = UIColor.blueColor() }