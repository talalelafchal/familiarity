Do Local Notifications need user permission on iOS?
<p>I am using UILocalNotification in my app to schedule notifications. The notifications work fine and show up when I want them to. I dont have an issue with that. I am NOT doing any remote/push notifications. </p> <p>What got me wondering is that I never saw the famous permissions dialog that you usually see for push notifications in several app. I even reset my device and ran my app. That still didn't cause the permission dialog to show up.</p> <p>Does this permission dialog not show up if your app is using only local notifications or am I not implementing some method that actually causes the app to ask for this permission?</p> <p>I know I could implement my own dialog after the app started that asked the user for this permission but I was hoping that Apple took care of that, especially since it treats remote and local notifications the same in the Settings app.</p>
<p>It looks like local notifications do not need any user permission. The Permission dialog just shows up for the Push Notifications. I am able to schedule/cancel local notifications without any user permission.</p>
<p>Yes, that's correct. Local notifications do not need any OS permissions. However, as a good practice, I'd suggest giving an opt-out option for the user in such cases from your application. This would work well in two ways:</p> <ol> <li>An annoyed user, getting frustrated because of seeing local notification yet time &amp; again, not knowing the difference between Push/Local notification might leave a bad review on the app store.</li> <li>Its always a good practice to provide flags to turn ON/OFF such functionality for a given user.</li> </ol>
<p>Yes, in iOS8, local notifications do require permissions.</p> <p><a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/index.html#//apple_ref/occ/instm/UIApplication/registerUserNotificationSettings:">The documentation</a> for <strong>registerUserNotificationSettings:</strong> stipulates that</p> <p><code>If your app displays alerts, play sounds, or badges its icon while in the background, you must call this method during your launch cycle to request permission to alert the user in those ways. Typically, you make this request</code><strong>if your app uses local</strong> <code>or push</code><strong>notifications</strong><code>to alert the user to new information involving your app. </code></p> <p><code>It is recommended that you</code><strong>call this method before you schedule any local notifications</strong><code>or register with the push notification service.</code></p>
<p>NOTE: this includes push notifications / remote notifications</p> <p>when using Xcode6 with iOS7 or iOS8 Test when registerUserNotificationSettings: API is available at runtime. </p> <pre><code>if ([application respondsToSelector:@selector(registerUserNotificationSettings:)]) { UIUserNotificationSettings* notificationSettings = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeAlert | UIUserNotificationTypeBadge | UIUserNotificationTypeSound categories:nil]; [[UIApplication sharedApplication] registerUserNotificationSettings:notificationSettings]; [[UIApplication sharedApplication] registerForRemoteNotifications]; } else { [[UIApplication sharedApplication] registerForRemoteNotificationTypes: (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; } </code></pre> <p>Thanks to <a href="http://corinnekrych.blogspot.ae/2014/07/how-to-support-push-notification-for.html" rel="nofollow">http://corinnekrych.blogspot.ae/2014/07/how-to-support-push-notification-for.html</a></p>
<p>Apple's documentation for presentLocalNotificationNow and scheduleLocalNotification says,</p> <blockquote> <p>Prior to scheduling any local notifications, you must call the registerUserNotificationSettings: method to let the system know what types of alerts, if any, you plan to display to the user.</p> </blockquote> <p>So I am not sure how others in this page are saying Local Notifications do not need User Permissions.</p> <p>Checkout this other discussion on the same topic:</p> <p><a href="http://stackoverflow.com/questions/24100313/ask-for-user-permission-to-receive-uilocalnotifications-in-ios-8">Ask for User Permission to Receive UILocalNotifications in iOS 8</a></p>