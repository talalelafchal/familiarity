Swift to Objective-C header not created in Xcode 6
<p>I have recently been working to add Swift to an existing project, to get to try it out in a real-world fashion.</p> <p>Upon adding a Swift source file to the project, I have no problems about getting the "Bridging Header", that is, Objective-C to Swift.</p> <p>But the -Swift.h header file that is supposed to expose Swift classes either marked @objc or subclasses of ObjC classes, is <b>nowhere</b> to be found :-(</p> <p>I don't see any specific instructions on how to accomplish the usage of my new subclass, written in Swift, in my main app code (which is still Obj-C).</p> <p>The app that I am lead developer of has a fairly large codebase (70.000 lines), so transitioning it in one go is out of the question.</p>
<p>You have to import a header in Objective-C classes, which is:</p> <pre><code>#import “ProductModuleName-Swift.h” </code></pre> <p>It is automatically generated, on the reference it says "Any Swift files in your target will be visible in Objective-C .m files containing this import statement."</p>
<p>If your project module name has spaces in it, you <em>must</em> replace the spaces with an underscore.</p> <p>For instance, if your project name is "My Project", you would use:</p> <blockquote> <p>#import "My_Project-Swift.h"</p> </blockquote>
<p>Now it works.</p> <ol> <li>Project must have a Product Module Name that does <strong>not</strong> include spaces.</li> <li><em>Defines Module</em> must be set to <strong>Yes</strong> in Build Settings, under Packaging.</li> </ol> <p>Finally works. Thanks to everyone for the help :-)</p>
<p>I had the same problem. Seems like you have to adjust the settings (Defines Module and Product Module Name) <strong>before</strong> you add your first Swift file. </p> <p>If you do it afterwards the "*-Swift.h" file will not be generated for this project even if you add further Swift files or delete the Swift file and create a new one.</p>
<p>I had a similar problem and found that you can only add </p> <p><code>#import “ProductModuleName-Swift.h”</code> </p> <p>to obj-c .m files, not .h files for the umbrella header to be found</p>
<p><strong>* The only important thing is: *</strong></p> <p>to use the defined "Product Module Name" in the target, followed by -Swift.h</p> <pre><code>#import &lt;Product Module Name&gt;-Swift.h // in each ObjectiveC .m file having to use swift classes // no matter in which swift files these classes sit. </code></pre> <p>No matter if "Defines Module" param is set to Yes or No or if "Product Module Name" Project is not set.</p> <p>Reminder: Swift classes must deriving from NSObject or been tagged with @objc attribute in order to be exposed to ObjectiveC / Foundation || Cocoa ...</p>
<p>The most important thing is that <strong>This file is invisible!!!</strong> At least it is in Xcode6 beta5. There will be no such file named "YourModule-Swift.h" in your workspace. Just make sure you have module name and defines module set to yes, and use it in your Objective-C class.</p>
<p>I found a trick that always works on me. </p> <ol> <li>Create your #import "ProductModuleName-Swift.h" in your appDelegate.h file and in your ProductName-Prefix.pch file. If you don't have it in xcode 6 you can create it with this way <a href="http://stackoverflow.com/questions/24158648/why-isnt-projectname-prefix-pch-created-automatically-in-xcode-6">Why isn&#39;t ProjectName-Prefix.pch created automatically in Xcode 6?</a></li> <li>Command+shift+k to clean your code, if you receive an error about your "ProductModuleName-Swift.h" delete it from appDelegate.h file.</li> <li>Clean your code again. Now everything will work like a charm</li> <li>If you receive again error about the "ProductModuleName-Swift.h", now create again in appDelegate.h file and clean your code again.</li> </ol> <p>Do this work (delete and create the "ProductModuleName-Swift.h" from appDelegate.h file and clean your code) everytime you receive this error to silent it.</p>
<p>I found that I had to fix <em>all</em> build errors before it would generate the file. </p> <p>The problem for me was that it was a chicken/egg problem, in that I didn't see any build errors until I'd actually commented out the <code>#import</code> statement:</p> <p><code>//#import "ProductModuleName-Swift.h" </code></p> <p>which revealed a bunch of other errors in my Swift code. </p> <p>Once I fixed these new errors and got the source building successfully, I uncommented out the <code>#import</code> and bingo! The header was created and importing correctly :)</p>
<p>The file name is always preceded by your <strong>Target</strong> name. It is referred as Product name but practically it is the target name. So if you want it to build for a new target be ready to expect <code>that_target-Swift.h</code> file. </p> <p>One way to handle this is </p> <ol> <li>Add a preprocessor for each of your target that is the name of your target itself (without spaces). Ex. <code>MY_TARGET=1</code>. Add this in Project settings->Build Settings->Preprocessor Macros for each of your targets.</li> <li>If you are using a PCH file, </li> </ol> <p>Add these lines in the PCH file</p> <pre><code>#if MY_TARGET==1 #include "My_Target-Swift.h" #elif THAT_TARGET==1 #include "That_Target-Swift.h" #endif </code></pre> <p>Advantage of using PCH file is that you don't have to include the headers everywhere.</p> <ol start="3"> <li>If you are not using a PCH file, just add these same lines in a single header and include that header wherever you need to use the swift classes.</li> </ol> <p>This should work just fine. </p>
<p><strong>An actual file in the project is not created</strong> ([ProductModuleName]-Swift.h). Cmd + Click on the import either generates it on-the-fly (and in-memory) so you can see how the linkage is done, or opens a file somewhere in some Xcode cache dir, but it's not in the project dir.</p> <p>You need to set <strong>Defines Module</strong> project prop (in target's Build Settings) to <strong>Yes</strong> and if your module name has spaces or dashes - use _ in all imports of the [ProductModuleName]-Swift.h file.</p> <p>You can import it in all .h and .m files where you use swift types or you can import it in the .pch.</p> <p>So if my Module (project) is named "Test Project", I would import it like this, in the .pch file of my project (just there):</p> <pre><code>#import "Test_Project-Swift.h" </code></pre>
<p>If you're like me you've probably got the header name wrong. After bashing my head for a while I looked for the file in DerivedData and sure enough it's there. On my setup (using the standard derived data folder, I believe):</p> <pre><code>cd ~/Library/Developer/Xcode/DerivedData find * -iname '*Swift.h' </code></pre> <p>Will find it. If nothing in that folder matches then Xcode is not generating it.</p> <p>I'm using Xcode Version 6.2 (6C86e)</p>
<p>If XCode is actually generating your -Swift.h header (deep inside DerivedData) but it doesn't refer to your Swift classes, make sure you also have a bridging header defined. The way I read the docs implied I only needed that for calling Objective-C from Swift, but it seems to be necessary for calling Swift from Objective-C too. </p> <p>See my answer: <a href="http://stackoverflow.com/a/27972946/337392">http://stackoverflow.com/a/27972946/337392</a></p> <p>EDIT: It is because of public vs. internal access modifiers, as I eventually found explained in the Apple docs:-</p> <blockquote> <p>By default, the generated header contains interfaces for Swift declarations marked with the public modifier. It also contains those marked with the internal modifier if your app target has an Objective-C bridging header.</p> </blockquote>
<p>I Found this solution </p> <ul> <li>Create SwiftBridge.h</li> <li>put #import “ProductModuleName-Swift.h”</li> <li>Make this .h file public (important) Select the file -> In Show the file Inspector (right bar) -> Make it public </li> </ul> <p>Now you can </p> <pre><code>#import "SwiftBridge.h" </code></pre> <p>instead of ProductModuleName-Swift.h</p> <p>This's a workaround solution, for the next version of Xcode I think this problem will be solved. Good luck</p>
<p>Just a heads up for anyone who used "." in there project name. Xcode will replace the "." with an underscore "_" for the Swift version of the bridging header file. Oddly enough the Bridging-Header.h that is generated does not replace the periods with underscores. </p> <p>For example a project with the name My.Project would have the following Bridging Header file names. </p> <p><strong>Bridging-Header.h (Autogenerated)</strong></p> <p>My.Project-Bridging-Header.h</p> <p><strong>Swift.h</strong></p> <p>My_Project.h</p> <p>I hope this helps anyone who used a period and was stuck like I was. This file can be found at the following location.</p> <p>Macintosh HD/Users/<em>user</em>/Library/Developer/Xcode/DerivedData/My.Project-fntdulwpbhbbzdbyrkhanemcrfil/Build/Intermediates/My.Project.build/Debug-iphonesimulator/My.Project.build/DerivedSources</p> <p>Take care,</p> <p>Jon</p>
<p>I wanted to add one more reason you might find an issue with this - I was creating a framework that mixed Swift and Objective-C code. I was not able to import the Swift classes outside the framework - I checked for the -Swift.h file and it was being generated but was empty.</p> <p>The problem turned out to be very, very simple - I had not declared any of my Swift classes public! As soon as I added the public keyword to the classes, I was able to use them from classes inside and outside the framework.</p> <p>Also of note, inside the framework (inside .m files only as another answer mentions) I had to import the -Swift.h file as:</p> <pre><code>#import &lt;FrameworkName/FrameworkName-Swift.h&gt; </code></pre>
<p>This answer addresses the use-case where you may already have some Objective-C code that calls Swift classes and then you start receiving this error.</p> <p><strong>How To Fix Issue</strong></p> <p>The following steps ultimately resolved all of the issues for me. I read above someone mentioning the "chicken and the egg" and it is exactly that concept which led me to this procedure. This explicit process shows that one has to remove any Objective-C code referencing Swift classes until after the header is generated.</p> <ol> <li>Comment out the #import "ProductModuleName-Swift.h" statement in your Objective-C implementation file</li> <li>Comment out any references in the Objective-C implementation file to Swift Classes</li> <li>Clean &amp; Build</li> <li>Resolve all errors/warnings</li> <li>Remove the comment on the #import "ProductModuleName-Swift.h" statement</li> <li>Clean &amp; build (successfully or fix any remaining errors, <strong>verify that you are not referencing any Swift classes in Objective-C at this point</strong>. If so temporarily comment these out)</li> <li>Verify that "ProductModuleName-Swift.h" is generated by <strong>Cmd-Clicking</strong> on the class name of the #import "ProductModuleName-Swift.h" statement</li> <li>Remove the comment on the code referencing Swift classes in the Objective-C implementation file.</li> <li>Clean &amp; Build as normal (the "ProductModuleName-Swift.h" should be generated and your Objective-C code referencing Swift Classes can be used as normal)</li> </ol> <p><strong>Nota Bene:</strong> The answers about changing spaces to underscores and the Defines Module to YES as given above still applies when performing this process, as do the rules specified in the <a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html" rel="nofollow noreferrer">Apple Documentation</a>.</p> <p><strong>Bridging Header Path</strong></p> <p>In one error, the file ProductModuleName-Bridging-Header.h was not being found during the build process. This fact generated an error</p> <blockquote> <p>&lt; unknown>:0: error: bridging header '/Users/Shared/Working/abc/abc-Bridging-Header.h' does not exist</p> </blockquote> <p>Closer inspection of the error indicated that the file would never exist at the location described because it was actually located at (<strong>a wrong path</strong>) </p> <p>'/Users/Shared/Working/abc/abc/abc-Bridging-Header.h'. a quick search of the target/projects build settings to make the correction manually and the abc-Swift.h file was again auto generated.</p> <p><img src="https://i.stack.imgur.com/WbnxG.png" alt="build-settings"></p>
<p>Here is another variation of the moduleName-Swift.h not being generated.</p> <p>I decided to include <a href="https://github.com/danielgindi/ios-charts">IOS Charts</a> in my project but did not want to mingle the sources in the same directory, so I placed the Charts Project folder next to my code's project folder. I dragged the Charts project into my Project's Navigator Bar and included the framework in the my project target's <strong><em>Embedded Binaries</em></strong> list in the General project settings and set the <strong><em>Embedded Content Contains Swift Code</em></strong> switch to yes in my project's <strong><em>Build Settings</em></strong> tab in the <strong><em>Build Options</em></strong> section.</p> <p>My project's moduleName-Swift.h file would never generate no matter what other switches or settings suggested here. Finally, using Lou Z's method of seeking out the -Swift.h files, I saw that a Charts-Swift.h file was being generated deep in my project's xcode Build directory in Charts.framework/Headers/</p> <p>The solution to using Daniel Gindi's ios-charts Swift package without including the code in my project's source directory was to add:</p> <pre><code>#import "Charts/Charts-Swift.h" </code></pre> <p>To the modules charting my project's data.</p>
<p>If you were able to build a project before, with no issues related to <code>“ProductModuleName-Swift.h” not found</code> error, and now you are getting that nasty errors again, the reason might sit in your recent changes.</p> <p>For me this was by (accidental) incorrect <code>.swift</code> file encoding. Reverting changes and bringing the back manually, does the job.</p>
<p>I was having a hard time determining my module name/objective-c's import of swift's headers. I did read a lot of articles here too.</p> <p>But the definitive answer for your project name with all its included special characters (be it '.' or a numeric or a space) - you can find the text that will work for you in the "<strong>Product Module Name</strong>" under the target's Build Settings.</p> <p>For example my target name started with a numeric - "1mg" and the field mentioned above showed "_mg" as my module name.</p> <p>so I used #import "_mg-Swift.h" and it worked.</p> <p><a href="https://i.stack.imgur.com/PdjWp.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/PdjWp.png" alt="Product Module Name in the build settings of target gives the correct module name which will work for your project"></a></p>
<p>This may be an obvious point (maybe too obvious), but you must have at least one swift file in the project for the header to generate. If you are writing boilerplate or config code with the intention of writing swift later the import won't work.</p>
<p>Allow me to share my experiences trying to use Swift in an old objc project. I did not have to set <code>Defines module</code> to <code>YES</code>.</p> <p>In my case I needed to manually make sure there was an objc Bridging Header. Only the generated interface header name was present in my build settings.</p> <p><a href="https://i.stack.imgur.com/TEUcC.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/TEUcC.png" alt="Missing bridging header"></a></p> <p>This lead to a MyApp-Swift.h file to being generated, but without any traces of my Swift classes.</p> <p>The Apple documentation says that you will be prompted to create a bridging header when adding your first swift file. Well, I wasn't. I manually added a <code>MyApp-Bridging-header.h</code> file and pointed to it in the "Objective-C Bridging Header" field. That made my MyApp-Swift.h file become populated with my Swift classes.</p> <p>Docs: <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html" rel="nofollow noreferrer">Importing Swift into Objective-C</a></p>
<p>I had to delete WatchOS2 swift code from my Objective C project. And only after that XCode offered to generate -Swift.h</p>
<p>In my case I had to set the deployment target to at least “OS X 10.9” and the <code>-Swift.h</code> header was automatically generated. Keep in mind that you can get a lot of deprecation warnings when you change the deployment target version, especially when you have an older and very large Objective C code base. In our case we also had a lot of work to do in XIB files &amp; view classes.</p>
<p>I had similar problem but my project was compiling before and suddenly got error after few files code change. It took me while to figure out why I am getting 'File not found' error for myproject-swift.h file. The code changes I had done had some errors. Xcode did not point put those error instead all time showing the 'File not found error'. Then got copy of previous version code and I compared with new code and merged file one by one. After each file merge complied the project to find the error. So bottom line is if you have error in your code Xcode may just display 'file not found error' for myproject-swift.h file. Most likely you have compilation error in your project. Clean those error and it will work.</p>
<p>Project must have a Module Name not including spaces. Defines Module must be set to Yes in Build Settings, under Packaging. commented out the #import statement:</p> <p>If still you are having error in importing "ProductModuleName-Swift.h" then</p> <p>//#import "ProductModuleName-Swift.h"</p> <p>which revealed a bunch of other errors in my Swift code.</p> <p>Once I fixed these new errors and got the source building successfully, I uncommented out the #import and bingo! The header was created and importing correctly :)</p>
<p>Seconding what a lot of people have here, but adding a pertinent screen shot. Swift and Obj-C code can certainly live together. It's not an all or none game. </p> <p>To access Swift files in your Objective-C, all you need to do is add this call to your Obj-C file (in the .m / implementation file):</p> <pre><code>#import "{product_module_name}-Swift.h" </code></pre> <p>(Where {product_module_name} represents the product module name of your project). Rather than try to guess your product module name or figure out corner cases with spaces and special characters, just go to the build settings tab in the project and type in "product module name" - the inspector will reveal yours to you. Mine was something I did not expect it to be. Check out this screen shot if you're confused.</p> <p><a href="https://i.stack.imgur.com/ZNvgE.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/ZNvgE.png" alt="enter image description here"></a></p> <p>And to get Obj-c code working in Swift, you just need to add a bridging header file and import the relevant Obj-C headers there.</p>