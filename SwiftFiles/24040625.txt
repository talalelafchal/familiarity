EXC_BAD_INSTRUCTION when extending UIView
<p>I'm trying to create my own custom view class for a keyboard I'm playing around with for iOS8 and when I create a new class that extends <code>UIView</code> I crash with the <code>Thread 1: EXC_BAD_INSTRUCTION (code=EXC_I386_INVOP,subcode=0x0)</code> error when the loading the keyboard. The error is shown on the line <code>class KeyButton: UIView {</code>, and I'm struggling to debug this much further. I was originally trying to extend <code>UIButton</code> but that didn't work so I changed it to <code>UIView</code> with no further luck.</p> <p>I know there will be a few teething issues with Swift/iOS8, but hopefully this is fixable!</p> <p><strong>Edit</strong></p> <p>Full class code:</p> <pre><code>import UIKit class KeyButton: UIView { /* This is where the app crashes, apparently */ init(frame: CGRect) { super.init(frame: frame) // Initialization code } /* // Only override drawRect: if you perform custom drawing. // An empty implementation adversely affects performance during animation. override func drawRect(rect: CGRect) { // Drawing code } */ } </code></pre>
<p>I had a similar issue recently, but figured it out. As it turns out, in iOS 8, but not iOS 7, <code>initWithCoder</code> (in Objective-C) is required. All you have to do is add the following to your class: </p> <pre><code>init(coder aDecoder: NSCoder!) { super.init(coder: aDecoder) } </code></pre> <p>I hope that helps!</p>