Base64 Decoding in iOS 7+
<p>I have Encoded text(<code>NSString</code>) using <code>NSData</code> Class new API which is Added in iOS7.</p> <p>using this</p> <pre><code>- (NSData *)dataUsingEncoding:(NSStringEncoding)encoding; </code></pre> <p>here is my code</p> <pre><code>NSString *base64EncodedString = [[myText dataUsingEncoding:NSUTF8StringEncoding] base64EncodedStringWithOptions:0]; NSLog(@"%@", base64EncodedString); </code></pre> <p>I am looking to decode it </p>
<h1>Swift 3 (iOS 10+)</h1> <pre><code>let plainString = "foo" </code></pre> <h3>Encoding</h3> <pre><code>let plainData = plainString.data(using: .utf8) let base64String = plainData?.base64EncodedString() print(base64String!) // Zm9v </code></pre> <h3>Decoding</h3> <pre><code>if let decodedData = Data(base64Encoded: base64String!), let decodedString = String(data: decodedData, encoding: .utf8) { print(decodedString) // foo } </code></pre> <hr> <h1>Swift &lt; 3</h1> <pre><code>let plainString = "foo" </code></pre> <h3>Encoding</h3> <pre><code>let plainData = plainString.dataUsingEncoding(NSUTF8StringEncoding) let base64String = plainData?.base64EncodedStringWithOptions(NSDataBase64EncodingOptions(rawValue: 0)) print(base64String!) // Zm9v </code></pre> <h3>Decoding</h3> <pre><code>let decodedData = NSData(base64EncodedString: base64String!, options: NSDataBase64DecodingOptions(rawValue: 0)) let decodedString = NSString(data: decodedData, encoding: NSUTF8StringEncoding) print(decodedString) // foo </code></pre> <hr> <h1>Objective-C</h1> <pre><code>NSString *plainString = @"foo"; </code></pre> <h3>Encoding</h3> <pre><code>NSData *plainData = [plainString dataUsingEncoding:NSUTF8StringEncoding]; NSString *base64String = [plainData base64EncodedStringWithOptions:0]; NSLog(@"%@", base64String); // Zm9v </code></pre> <h3>Decoding</h3> <pre><code>NSData *decodedData = [[NSData alloc] initWithBase64EncodedString:base64String options:0]; NSString *decodedString = [[NSString alloc] initWithData:decodedData encoding:NSUTF8StringEncoding]; NSLog(@"%@", decodedString); // foo </code></pre> <hr>
<p>In case you want to write fallback code, decoding from base64 has been present in iOS since the very beginning by caveat of <code>NSURL</code>:</p> <pre><code>NSURL *URL = [NSURL URLWithString: [NSString stringWithFormat:@"data:application/octet-stream;base64,%@", base64String]]; return [NSData dataWithContentsOfURL:URL]; </code></pre>