How do I parse an array inside parsed JSON in Swift?
<p>I'm using an API that returns JSON that looks like this</p> <pre><code>{ "boards":[ { "attribute":"value1" }, { "attribute":"value2" }, { "attribute":"value3", }, { "attribute":"value4", }, { "attribute":"value5", }, { "attribute":"value6", } ] } </code></pre> <p>In Swift I use two functions to get and then parse the JSON</p> <pre><code>func getJSON(urlToRequest: String) -&gt; NSData{ return NSData(contentsOfURL: NSURL(string: urlToRequest)) } func parseJSON(inputData: NSData) -&gt; NSDictionary{ var error: NSError? var boardsDictionary: NSDictionary = NSJSONSerialization.JSONObjectWithData(inputData, options: NSJSONReadingOptions.MutableContainers, error: &amp;error) as NSDictionary return boardsDictionary } </code></pre> <p>and then I call it using</p> <pre><code>var parsedJSON = parseJSON(getJSON("link-to-API")) </code></pre> <p>The JSON is parsed fine. When I print out </p> <pre><code>println(parsedJSON["boards"]) </code></pre> <p>I get all the contents of the array. However I am unable to access each individual index. I'm positive it IS an Array, because ween I do</p> <pre><code>parsedJSON["boards"].count </code></pre> <p>the correct length is returned. However if I attempt to access the individual indices by using</p> <pre><code>parsedJSON["boards"][0] </code></pre> <p>XCode turns off syntax highlighting and gives me this:</p> <p><img src="https://i.stack.imgur.com/Zz4Va.png" alt="XCode Error"></p> <p>and the code won't compile.</p> <p>Is this a bug with XCode 6, or am I doing something wrong?</p>
<p>Dictionary access in Swift returns an Optional, so you need to force the value (or use the <code>if let</code> syntax) to use it.</p> <p>This works: <code>parsedJSON["boards"]![0]</code></p> <p>(It probably shouldn't crash Xcode, though)</p>
<p>The correct way to deal with this would be to check the return from the dictionary key:</p> <pre><code> if let element = parsedJSON["boards"] { println(element[0]) } </code></pre>
<p>Take a look here:<a href="https://github.com/lingoer/SwiftyJSON">https://github.com/lingoer/SwiftyJSON</a></p> <pre><code>let json = JSONValue(dataFromNetworking) if let userName = json[0]["user"]["name"].string{ //Now you got your value } </code></pre>
<p>You can create a variable</p> <pre><code>var myBoard: NSArray = parsedJSON["boards"] as! NSArray </code></pre> <p>and then you can access whatever you have in "boards" like-</p> <pre><code>println(myBoard[0]) </code></pre>