How to read Array from plist iOS
<p>I am trying to read plist which contains array</p> <pre class="lang-xml prettyprint-override"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt; &lt;plist version="1.0"&gt; &lt;dict&gt; &lt;key&gt;key1&lt;/key&gt; &lt;string&gt;value1&lt;/string&gt; &lt;key&gt;key2&lt;/key&gt; &lt;string&gt;value2&lt;/string&gt; &lt;key&gt;keyarray1&lt;/key&gt; &lt;array&gt; &lt;string&gt;keyitem1&lt;/string&gt; &lt;string&gt;keyitem2&lt;/string&gt; &lt;/array&gt; &lt;/dict&gt; &lt;/plist&gt; </code></pre> <p>when i try to read valueForKey:@"keyarray1", I get null value. I tried to read as a string and array nut no use.</p> <p>My Code</p> <pre><code>NSDictionary * values=[[NSDictionary alloc] initWithContentsOfFile:@"values.plist"]; NSArray *arrayValues=[[NSArray alloc] initWithArray:[values valueForKey:@"keyarray1"]]; </code></pre>
<p>Can you try following code?</p> <pre><code>NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"values" ofType:@"plist"]; NSDictionary * values=[[NSDictionary alloc] initWithContentsOfFile:plistPath]; NSArray *arrayValues=[[NSArray alloc] initWithArray:[values valueForKey:@"keyarray1"]]; NSLog(@"arrayValues = %@",arrayValues); </code></pre> <p>I got following output in log:-</p> <pre><code>arrayValues = ( keyitem1, keyitem2 ) </code></pre>
<p>First of all Check your plist looks like:</p> <p><img src="https://i.stack.imgur.com/Jk7Ih.png" alt="enter image description here"></p> <p>Now write following lines where you are accessing your plist</p> <p><strong>Objectiv C:</strong></p> <pre><code>NSDictionary *dictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Values" ofType:@"plist"]]; NSLog(@"dictionary = %@", dictionary); NSArray *array = [dictionary objectForKey:@"keyarray1"]; NSLog(@"array = %@", array); </code></pre> <p>Here is the complete screen shot (with log output) of my work window:</p> <p><img src="https://i.stack.imgur.com/OTyP3.png" alt="enter image description here"></p> <p><strong>Swift:</strong></p> <pre><code>let dictionary = NSDictionary(contentsOfFile: Bundle.main.pathForResource("Values", ofType: "plist")!); let array = dictionary?["arrayKey"] as! NSArray print("dictionary=", dictionary, "\narray =", array) </code></pre> <p><a href="https://i.stack.imgur.com/MJN2J.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/MJN2J.png" alt="enter image description here"></a></p>
<p>Try this </p> <pre><code>NSString *path = [[NSBundle mainBundle] bundlePath]; NSString *finalPath = [path stringByAppendingPathComponent:@"values.plist"]; NSMutableDictionary *dict =[NSMutableDictionary dictionaryWithContentsOfFile:finalPath]; NSArray *arr =[dict valueForKey:@"keyarray1"]; NSLog(@"%@",arr); </code></pre>
<p>Where is the plist stored? Is it in the app bundle? If so, you probably want to use <code>[[NSBundle mainBundle] pathForResource:@"values" ofType:@"plist"]</code> to get the path, instead of hardcoding <code>@"values.plist"</code>.</p> <p>After you have the path down correctly, you can then get the array from the dictionary without any problems, with something like <code>[values objectForKey:@"keyarray"]</code>.</p> <p>Final note: there is a difference between <code>objectForKey:</code> and <code>valueForKey:</code>. You're currently using <code>valueForkey:</code> which is part of <code>NSKeyValueCoding</code>, a protocol that NSDictionary happens to conform to. You should use <code>objectForKey:</code> (or syntactic sugar accessors, i.e. <code>dictionary[@"key"]</code>) instead, as they are the proper ways of accessing a value from a dictionary.</p>
<p>I know this question is too old and I'll just like to add more information for those people encounter this recently.</p> <p>In my case I created a plist as Array(plist default is Dictionary with key "Root").</p> <p><img src="https://i.stack.imgur.com/S9F6D.png" alt="enter image description here"></p> <p>then the xml looks like this:</p> <p><img src="https://i.stack.imgur.com/nLg9b.png" alt="enter image description here"></p> <p>On my view controller I initialize directly the Array instead of initializing the Dictionary then get object for key "Root":</p> <p><img src="https://i.stack.imgur.com/ictKp.png" alt="enter image description here"></p> <p><strong>Note:</strong> I only wanted to add this info since I only see initializing the Dictionary then get object for keys. Hope it will help you guys. </p>