UILabel with numberOfLines and lineBreakMode
<p>I am working on a project that has to support both iOS6 and iOS7. My problem is it works different on different systems. I'm trying to create UILabel with number of lines equal to 2, but when I set it's line break mode to NSLineBreakByTruncatingTail it works different.</p> <p>Explanation (numberOfLines = 2, text = @"long teeexxxttt"):</p> <pre><code> iOS7 iOS6 NSLineBreakByWordWrapping ---------- ---------- |long | |long | |teeeexxxtt| |teeeexxxtt| ---------- ---------- NSLineBreakByTruncatingTail ---------- ---------- |long | |long te...| |teeeexx...| | | ---------- ---------- ^ ^ | | correct incorrect - shows only one line </code></pre> <p>How do I fix it?</p>
<p>The problem is iOS6 and prior won't update multiline UILabels with custom UIFont and NSLineBreakByTruncatingTail, but you can archive the same result by using autoresizing or autolayout.</p>
<p>Swift 2.1</p> <pre><code>yourLabel.text = "your text" yourLabel.numberOfLines = 0 yourLabel.lineBreakMode = NSLineBreakMode.ByWordWrapping yourLabel.sizeToFit() </code></pre>
<p>I know this is an old question, but I recently had the same problem. I found that with constraints I had to set the preferred width to get the ellipsis to behave properly:</p> <pre><code>yourLabel.preferredMaxLayoutWidth = width; </code></pre> <p><a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/#//apple_ref/occ/instp/UILabel/preferredMaxLayoutWidth" rel="nofollow">UILable.preferredMaxLayoutWidth</a></p>