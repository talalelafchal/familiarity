How can I deal with operation between Int and CGFloat?
<p>In Objective-C I can do the following operation:</p> <h3>Objective-C code:</h3> <pre><code>CGFloat width = CGRectGetWidth(mView.bounds); CGFloat total = width*[myArray count]; </code></pre> <p>but in Swift, it will raise an error:</p> <blockquote> <p>Could not find an overload for '*' that accepts the supplied arguments</p> </blockquote> <p>How can I avoid this situation elegantly?</p>
<p>In Swift you cannot multiply two numbers of different types (NSNumber, Int, Double, etc.) directly. The width of a CGRect is of floating point type and the array count is of integer type. Here's a working example:</p> <pre><code>let myArray: Int[] = [1,2,3] let rect: CGRect = CGRect(x:0,y:0,width:100,height:100) let total: Double = rect.size.width * Double(myArray.count) </code></pre>
<p>First, let's create some demo data</p> <pre><code>let array: NSArray = ["a", "b", "c"] //you could use a Swift array, too let view = UIView() //just some view </code></pre> <p>Now, everything else works almost the same way as in Obj-C</p> <pre><code>let width: CGFloat = CGRectGetWidth(view.bounds) </code></pre> <p>or simply</p> <pre><code>let width = CGRectGetWidth(rect) //type of the variable is inferred </code></pre> <p>and total:</p> <pre><code>let total = width * CGFloat(array.count) </code></pre> <p>Note that we have to add a <code>CGFloat</code> cast for <code>array.count</code>. Obj-C would implicitly cast <code>NSUInteger</code> to <code>CGFloat</code> but Swift has no implicit casts, so we have to add an explicit one.</p>
<p>Swift does not allow operations between two numbers of different types. Therefore, before to multiply your <code>array.count</code> (<code>Int</code>) by your width (<code>CGFloat</code>), you'll have to cast it to <code>CGFloat</code>.</p> <hr> <p>Fortunately, Swift provides a simple <code>CGFloat</code> initializer called <code>init(Int)</code> that creates a new <code>CGFloat</code> from an <code>Int</code>. This initializer has the following <a href="https://developer.apple.com/reference/coregraphics/cgfloat/1454198-init" rel="nofollow">declaration</a>:</p> <blockquote> <p><code>init(_ value: Int)</code></p> </blockquote> <hr> <p>The Playground code below shows how to perform your calculation with Swift 2 by using <code>CGFloat</code> initializer:</p> <pre><code>import UIKit // Set array and view let array = Array(1...3) let rect = CGRect(x: 0, y: 0, width: 100, height: 100) let view = UIView(frame: rect) // Perform operation let width = CGRectGetWidth(view.bounds) // let width = view.bounds.width also works let total = width * CGFloat(array.count) </code></pre>