NSRegularExpression to extract text between two XML tags
<p>How to extract the value "6" between the "badgeCount" tags using NSRegularExpression. Following is the response from the server:</p> <pre><code>&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;&lt;badgeCount&gt;6&lt;/badgeCount&gt;&lt;rank&gt;2&lt;/rank&gt;&lt;screenName&gt;myName&lt;/screenName&gt; </code></pre> <p>Following is the code I tried but not getting success. Actually it goes in else part and prints "Value of regex is nil":</p> <pre><code>NSString *responseString = [[NSString alloc] initWithBytes:[responseDataForCrntUser bytes] length:responseDataForCrntUser.length encoding:NSUTF8StringEncoding]; NSError *error; NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(?&lt;=badgeCount&gt;)(?:[^])*?(?=&lt;/badgeCount)" options:0 error:&amp;error]; if (regex != nil) { NSTextCheckingResult *firstMatch = [regex firstMatchInString:responseString options:0 range:NSMakeRange(0, [responseString length])]; NSLog(@"NOT NIL"); if (firstMatch) { NSRange accessTokenRange = [firstMatch rangeAtIndex:1]; NSString *value = [urlString substringWithRange:accessTokenRange]; NSLog(@"Value: %@", value); } } else NSLog(@"Value of regex is nil"); </code></pre> <p>If you could provide sample code that would be much appreciated.</p> <p>NOTE: I don't want to use NSXMLParser.</p>
<p>Example:</p> <pre><code>NSString *xml = @"&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;&lt;badgeCount&gt;6&lt;/badgeCount&gt;&lt;rank&gt;2&lt;/rank&gt;&lt;screenName&gt;myName&lt;/screenName&gt;"; NSString *pattern = @"&lt;badgeCount&gt;(\\d+)&lt;/badgeCount&gt;"; NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:NSRegularExpressionCaseInsensitive error:nil]; NSTextCheckingResult *textCheckingResult = [regex firstMatchInString:xml options:0 range:NSMakeRange(0, xml.length)]; NSRange matchRange = [textCheckingResult rangeAtIndex:1]; NSString *match = [xml substringWithRange:matchRange]; NSLog(@"Found string '%@'", match); </code></pre> <p>NSLog output:</p> <pre><code>Found string '6' </code></pre>
<p>To do it in swift 3.0</p> <pre><code>func getMatchingValueFrom(strXML:String, tag:String) -&gt; String { let pattern : String = "&lt;"+tag+"&gt;(\\d+)&lt;/"+tag+"&gt;" let regexOptions = NSRegularExpression.Options.caseInsensitive do { let regex = try NSRegularExpression(pattern: pattern, options: regexOptions) let textCheckingResult : NSTextCheckingResult = regex.firstMatch(in: strXML, options: NSRegularExpression.MatchingOptions(rawValue: UInt(0)), range: NSMakeRange(0, strXML.characters.count))! let matchRange : NSRange = textCheckingResult.rangeAt(1) let match : String = (strXML as NSString).substring(with: matchRange) return match } catch { print(pattern + "&lt;-- not found in string --&gt;" + strXML ) return "" } } </code></pre> <p>P.S : This is corresponding swift solution of @zaph's solution in obj-c</p>