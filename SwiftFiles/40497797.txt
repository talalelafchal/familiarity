Swift Realm - unsafe mutable Accessor
New to Realm. I tinkered a bit around, made some Models, played with some test data, now i updated my Models (added some properties, removed some others, changed some existing) and want to completely delete my realms file so I can start from new with new testdata based on the new models. Somehow, i can't just delete the file. Simply using try! realm.write { realm.deleteAll() } crashes in realm.unsafeMutableAddressor on the line let realm = try! Realm() Trying to delete everything via the Realm Browser, i can't find any button to delete the whole schema? I can only delete certain objects.. Trying to delete it via: try! FileManager.default.removeItem(at: realm.configuration.fileURL!) again crashes in the same error message as 1. What the hell do I need to do in order to just "start from scratch"? This has cost me about an hour now, trying it in those 3 different ways. Any ideas? Thanks! EDIT: I don't really know what code to post to give you any material to guess. What should i post for more helpful information about the problem?
If you're changing the schema around and don't want to worry about performing Realm migrations yet, it's not enough to simply delete all the objects in the Realm; you need to delete the Realm file from disk and start again. If you're going to delete a Realm file, you need to do it before you call Realm() for the first time, since Realm will subsequently keep a copy of that instance in memory after that point (This can be mitigated by placing that instance creation inside an @autoreleasepool block though). For debugging purposes, the easiest way to delete a Realm each time a migration is needed is to set deleteRealmIfMigrationNeeded to true in the Realm's Configuration object. var configuration = Realm.Configuration() configuration.deleteRealmIfMigrationNeeded = true Realm.Configuration.defaultConfiguration = configuration let realm = try! Realm() If you want to explicitly delete the default Realm file yourself, you need to do so by directly referencing the file URL in the default configuration. If you create a Realm() instance and then pull the fileURL property from that, it'll already be too late. var configuration = Realm.Configuration() let defaultURL = configuration.fileURL try! FileManager.default.removeItem(at: defaultURL) let realm = try! Realm() Let me know if you need any clarification on these points. Thanks for trying out Realm! :)