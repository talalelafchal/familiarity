Can't unwrap Optional.None. i can't figure out how or what
<p>I have looked over multiple pages here on Stack Overflow and can't wrap my head around it sadly. Maybe its the heat. Don't know. Anyway, could anyone please help me and explain how to unwrap?</p> <p>It breaks at: </p> <pre><code>self.txt = dict.valueForKey("menuPunkt") as NSMutableArray! </code></pre> <p>in:</p> <pre><code>var dict1: NSMutableArray = NSMutableArray() var txt: NSMutableArray = NSMutableArray() var dict: NSDictionary = NSDictionary() override func viewDidLoad() { super.viewDidLoad() let path = NSBundle.mainBundle().pathForResource("hovedMenu", ofType: "plist") self.dict = NSDictionary(contentsOfFile: path) self.txt = dict.valueForKey("menuPunkt") as NSMutableArray! self.tableView.registerClass(UITableViewCell.self, forCellReuseIdentifier: "cell") } </code></pre> <p><strong><em>UPDATE</em></strong></p> <pre><code> let textArray = dict.valueForKey("menuPunkt") as? NSMutableArray if let textArray = dict.valueForKey("menuPunkt") as? NSMutableArray { self.txt = textArray println("txt\(txt)") } else { println("txt\(txt)") } </code></pre> <p>still doesn't work</p>
<p>Your <code>dict.valueForKey("menuPunkt")</code> returns an optional <code>NSMutableArray</code>, which you're unwrapping with the exclamation point at the end of that line. If you unwrap it more gracefully you can handle the condition where <code>dict</code> doesn't contain a value for <code>"menuPunkt"</code>:</p> <pre><code>if let textArray = dict.valueForKey("menuPunkt") as? NSMutableArray { self.txt = textArray } else { // give self.text some sort of default value } </code></pre>
<p>You are getting that error because the method you are calling is returning <code>nil</code>. When you use ! with an optional variable (a variable that can be nil), which that method returns, you are basically asserting that the object is not nil. if the object is nil, you will get a runtime error like you are seeing</p>