Using NSErrorPointer make error on using a bridge between Obj-C and Swift
<p>I'm planning to use AZSocketIO on Cocoapods, to use socket.io. I want to use NSErrorPointer to get error in calling AZSocketIO#emit().</p> <pre><code>var emitError : NSError? socket.emit("deviceInfo", args: deviceInfo, error: &amp;emitError) </code></pre> <p>AZSocketIO.h: </p> <pre><code>- (BOOL)emit:(NSString *)name args:(id)args error:(NSError *__autoreleasing *)error ackWithArgs:(void (^)(NSArray *data))callback; </code></pre> <p>If I run this program, I get runtime errors like this:</p> <pre><code>fatal error: attempt to bridge an implicitly unwrapped optional containing nil </code></pre> <p>How can I solve? </p>
<p>You can try declaring <code>emitError</code> as <code>AutoreleasingUnsafePointer&lt;NSError?&gt;</code>. See also <a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithCAPIs.html#//apple_ref/doc/uid/TP40014216-CH8-XID_13" rel="nofollow">https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithCAPIs.html#//apple_ref/doc/uid/TP40014216-CH8-XID_13</a></p> <pre><code>var emitError: AutoreleasingUnsafePointer&lt;NSError?&gt; socket.emit("deviceInfo", args: deviceInfo, error: emitError, ackWithArgs: nil) </code></pre>
<p>You forgot set nil to your optional variable.</p> <pre><code>var emitError: NSError? = nil </code></pre>