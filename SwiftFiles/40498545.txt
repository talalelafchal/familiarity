realm query date type?
swift, xcode8 I made realm file with csv importer (https://github.com/realm/realm-cocoa-converter/tree/master/RealmConverter) This is realm file's schema: birthday:string name : string age : int class people:object { dynamic var date = "" dynamic var name = "" dynamic var age = 0 } let temp : people I want to query date field: realm.object(self.people).filter("birthday >= 2016-01-01") // error! If realm file schema's birthday type is string, can I query >= or between ? Should I change realm file schema birthday:string -> birthday:NSDate ?
I'm writting a app with realm 1.1 and swift 3.Sub code maybe help you. //Create table DoneDateSum class DoneDateSum: Object { dynamic var doneDate = NSDate() } //update a doneDate let realm = try! Realm() let doneDate = DoneDateSum() doneDate.doneDate = NSDate() try! realm.write { realm.add(doneDate) } //query date,todayNum is today's done items's sum,and historyNum is all items's sum.You can calculate a special day as history. func setupLabelsText(){ let realm = try! Realm() _ = try! Realm().objects(DoneDateSum.self) //查询realm中的数据 let today = NSDate() let history = NSCalendar.current.date(byAdding: .year, value: -10, to: today as Date) let todayNum : Int = realm.objects(DoneDateSum.self).filter("doneDate < %@",today).count let historyNum: Int = realm.objects(DoneDateSum.self).filter("doneDate > %@",history).count self.todayNum = todayNum self.historyNum = historyNum } But realm's filter is confused me.Like: realm.objects(DoneDateSum.self).filter("doneDate < %@",today).count If I use filter("doneDate == %@",today).count the result is 0. Hope some one can help me.
You can't use >= operator for strings, see more in Filtering section in docs. You need to use NSDate for property type to be able to use comparison operators in queries, but unfortunately RealmConverter doesn't support detection of dates currently. So you'll probably need to import your data manually or implement this feature in RealmConverter and send a pull request :)