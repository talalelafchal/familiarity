prepareForDragOperation() not called
I've subclassed NSTextField (FileDropTextField), and created 2 of them in an NSView (in a window) in Main.storyboard. When I drag a file from the desktop and drop it on the first FileDropTextField, it updates the field with the full path text, but prepareForDragOperation() is never called. If I drag the same file (from the desktop) and drop it on the second FileDropTextField, the following 3 functions are called (as expected), and the field is not automatically updated with the path: prepareForDragOperation() performDragOperation() concludeDragOperation() The Swift code is as follows: import Cocoa class FileDropTextField: NSTextField { override func draw(_ dirtyRect: NSRect) { super.draw(dirtyRect) // Drawing code goes here. } override func awakeFromNib() { NSLog("awakeFromNib") self.register(forDraggedTypes: [NSPasteboardTypeString, NSURLPboardType, NSFilenamesPboardType]) } override func draggingEntered(_ sender: NSDraggingInfo) -> NSDragOperation { self.stringValue = "" NSLog("draggingEntered") return NSDragOperation.generic; } override func draggingUpdated(_ sender: NSDraggingInfo) -> NSDragOperation { NSLog("draggingUpdated") return NSDragOperation.generic; } override func prepareForDragOperation(_ sender: NSDraggingInfo) -> Bool { NSLog("prepareForDragOperation") return true } override func performDragOperation(_ sender: NSDraggingInfo) -> Bool { NSLog("performDragOperation") return true } override func concludeDragOperation(_ sender: NSDraggingInfo?) { NSLog("concludeDragOperation") } override func draggingExited(_ sender: NSDraggingInfo?) { NSLog("draggingExited") } override func draggingEnded(_ sender: NSDraggingInfo?) { NSLog("draggingEnded") } } It makes no difference if I create the second field in Main.storyboard via duplication, or if it is created (in Main.storyboard) as a separate operation. I've examined all the properties of each, and I see no difference between them (aside from object ID and constraint information). Can anybody explain why I'm getting different behavior (when the file is dropped on the field) between these two objects when dropping the same object (desktop file) on each of them? The one that results in the call to prepareForDragOperation() is what I expect as correct behavior. (I'm using Xcode 8.1, Swift3, on macOS Sierra 10.12.1) Thanks!
have u tried to defocus on the first textfield, and drag drop again? if it works, then i guess it because there's an invisible editor field is right on the top of textfield when it being focused, which makes it impossible to trigger delegate method. so instead of using textfield, try to use textview