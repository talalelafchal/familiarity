Copy geometry from one scene into another
<p>I'm playing around with SceneKit and Swift (but answers in Objective-C are fine).</p> <p>I know how to load a collada file into a scene. (Can you load it into a node?)</p> <p>This is the Swift code I'm using:</p> <pre><code> let url = NSBundle.mainBundle().URLForResource("weasel", withExtension: "dae") var error: NSErrorPointer? = nil let weasel = SCNScene.sceneWithURL(url, options: nil, error: error!) </code></pre> <p>(I'm not sure how idiomatic the way I've declared error is. Feel free to enlighten me.)</p> <p>This seems to work fine, but I now want to insert something in this scene (or the whole scene, it doesn't matter) into another scene. I've gotten something like this to compile and run, but it does not appear to work.</p> <pre><code> let weaselNode = SCNNode() weaselNode.geometry = SCNNode(geometry: weasel.rootNode.geometry) scene.rootNode.addChildNode(weaselNode) </code></pre>
<p>Here, you are just retrieving the root node's geometry (which is probably nil). What you need to do is to get the node(s) you are interested in (not just a geometry) from scene A and add them to scene B.</p> <p>Pseudo code should be:</p> <pre><code>SCNNode *weaselNodeTree = [sceneA.rootNode childNodeWithName: @"theObjectNameImLookingFor" recursively:YES]; </code></pre> <p>(then optional if you don't want to modify scene A: <code>weaselNodeTree = [weaselNodeTree clone];</code>)</p> <pre><code>[sceneB.rootNode addChildNode:weaselNodeTree]; </code></pre>
<p>You can easily load part of a Collada file into a node. I haven't had the time to explore Swift yet, so here is ObjC:</p> <pre><code> NSURL *urlToColladaFile = [[NSBundle mainBundle]URLForResource:@"ColladaFileName" withExtension:@"dae"]; SCNSceneSource *sceneSource = [[SCNSceneSource alloc]initWithURL:urlToColladaFile options:nil]] SCNNode *node = [sceneSource entryWithIdentifier:@"uidInColladaFile" withClass:[SCNNode class]]; [scene.rootNode addChildNode:node]; </code></pre> <p>You can get a list of the identifiers by inserting this somewhere in your code:</p> <pre><code> NSLog(@"Scene identifiers list: %@", [sceneSource identifiersOfEntriesWithClass:[SCNNode class]); </code></pre>