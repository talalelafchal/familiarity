Convert Swift CChar array into a String
<p>Some C APIs, e.g. glGetShaderInfoLog, return character arrays in buffers. I need to convert them to Strings to use them.</p> <pre><code>var value: GLint = 0 glGetShaderiv(shader, GLenum(GL_INFO_LOG_LENGTH), &amp;value) var infoLog: GLchar[] = GLchar[](count: Int(value), repeatedValue: 0) var infoLogLength: GLsizei = 0 glGetShaderInfoLog(shader, value, &amp;infoLogLength, &amp;infoLog) var s: String = NSString.stringWithUTF8String(infoLog) // Compile Error: Cannot convert the expression's type 'NSString!' to type 'CString' </code></pre> <p>In this example GLchar maps to the Swift type CChar AKA Int8 but for the life of me I can't find a String or NSString method that will initialize with it.</p>
<p>This does the trick:</p> <pre><code>var s = NSString(bytes: infoLog, length: Int(infoLogLength), encoding: NSASCIIStringEncoding) </code></pre>
<p>Alternatively here is another option that compiles:</p> <pre><code>var infoLog = UnsafePointer&lt;CChar&gt;.alloc(Int(value)) glGetShaderInfoLog(shader, value, nil, infoLog) var infoLogString = String.fromCString(infoLog) infoLog.dealloc(Int(value)) </code></pre>