Import C headers in Swift
<p>I cannot import <code>malloc/malloc.h</code> to use <code>malloc_size()</code> to see the size of an object. Is it available in <code>Swift</code> or am I doing it wrong: <code>import malloc/malloc.h</code></p>
<p>You can't import C headers. In order to import a C Library (or Objective-C framework) in Swift it has to be in a module. I'm not aware of a module that contains malloc though.</p>
<p>The Unix/POSIX stuff is all in the <code>Darwin</code> module.</p> <pre><code>import Darwin let r = rand() qsort_b(buffer, 0, 10, sortFunc) </code></pre> <p><code>malloc</code> is in there, too, but it won't do you much good â€” it returns an opaque pointer.</p>
<p>Have you looked into using a bridging header?</p> <p>Create a .h file named -Bridging-Header-File.h Then reference it in your projects build settings (under "Swift Compiler" look for "Objective C Bridging Header") with:</p> <pre><code>$(SRCROOT)/&lt;Your-Project-Name&gt;-Bridging-Header.h </code></pre> <p>Now malloc_size() should be available</p>
<p>You want to use "malloc_size"? You do not need to import "malloc.h" to do that, assuming you're either including Foundation or Cocoa.</p> <p>This works just fine in a playground:</p> <pre><code>import Foundation let chars = BytePtr.alloc( 1000 ) let qty_of_bytes_allocated = malloc_size( chars ) println( qty_of_bytes_allocated ) </code></pre>