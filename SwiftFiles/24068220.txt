NSUserDefaults Not Saving TextField Text (Swift)
<p>I'm trying to create a game with Swift, and I want to add the ability to create a username, which will be saved in NSUserDefaults. This is my code:</p> <pre><code>println("Textfield Text: \(usernameTextfield.text)") NSUserDefaults.standardUserDefaults().setObject(usernameTextfield.text, forKey:"Username") NSUserDefaults.standardUserDefaults().synchronize() println(NSUserDefaults.standardUserDefaults().objectForKey("Username") as? String) </code></pre> <p>The output is:</p> <blockquote> <p>Textfield Text: MyUsername</p> <p>nil</p> </blockquote> <p>The only explanation I can see as to why it is printing nil is that either the saving or the loading of the username is failing. Is there any way this can be corrected or am I doing something wrong?</p> <p>Any help is appreciated!</p>
<pre><code>println("Textfield Text: \(usernameTextfield.text)") var myValue:NSString = usernameTextfield.text NSUserDefaults.standardUserDefaults().setObject(myValue, forKey:"Username") NSUserDefaults.standardUserDefaults().synchronize() var myOutput: AnyObject? = NSUserDefaults.standardUserDefaults().objectForKey("Username") println(myOutput) </code></pre>
<p>I made a small modification to Roman's answer with Swift 2.0 and Xcode 6.4. </p> <p><strong>saving:</strong></p> <pre><code> var myValue:NSString = usernameTF.text NSUserDefaults.standardUserDefaults().setObject(myValue, forKey:"Username") NSUserDefaults.standardUserDefaults().synchronize() </code></pre> <p><strong>retrieving:</strong></p> <pre><code>var myOutput = NSUserDefaults.standardUserDefaults().objectForKey("Username") if (myOutput != nil) { self.title = "Welcome "+((myOutput) as! String) } </code></pre>
<p>In Swift 3.0</p> <pre><code> let userDefult = UserDefaults.standard //returns shared defaults object. if let userName = usernameTextfield.text { //storing string in UserDefaults userDefult.set(userName, forKey: "userName") //Sets the value of the specified default key in the standard application domain. } print(userDefult.string(forKey: "userName")!)//Returns the string associated with the specified key. </code></pre>
<p>For swift 3.0, You can create user default by,</p> <pre><code>UserDefaults.standard.set("yourValue", forKey: "YourString") </code></pre> <p>To Print the value in console :</p> <pre><code>print(UserDefaults.standard.string(forKey: "YourString")!) </code></pre>