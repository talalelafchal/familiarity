If statement outputting both arguments instead of either?
I have the following code but instead of outputting either of the statements; both statements are output: EDITED: After a lot of trial and error I am still no closer to a solution, I have condensed my code down to just the bare minimum and removed all other controls in an attempt to solve this and still not working, here is my minimal code that is attached to a simple single switch: // import UIKit class ViewController: UIViewController { @IBOutlet weak var mySwitch: UISwitch! @IBAction func buttonClicked(_ sender: Any) { let switchOn = mySwitch.isOn let endpoint = "http://10.0.1.147/setpins" let urlString = endpoint + "?D2=" + (switchOn ? "0" : "1023") mySwitch.setOn(!switchOn, animated:true) var request = URLRequest(url: URL(string: urlString)!) request.httpMethod = "POST" let task = URLSession.shared.dataTask(with: request) { data, response, error in guard error == nil else { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume() } } BUT: Still getting the output of each argument output at the same time.. response = Optional(<NSHTTPURLResponse: 0x17402d9e0> { URL: pttp://10.0.1.147/setpins?D1=0 } { status code: 200, headers { "Access-Control-Allow-Origin" = "*"; Connection = close; "Content-Length" = 7; "Content-Type" = "text/plain"; } }) response = Optional(<NSHTTPURLResponse: 0x17002c8a0> { URL: pttp://10.0.1.147/setpins?D2=1023 } { status code: 200, headers { "Access-Control-Allow-Origin" = "*"; Connection = close; "Content-Length" = 7; "Content-Type" = "text/plain";
Try moving the task.resume out of the if..else block along with other declarations. //declare other variables here if .... { ... ... ... } else { ... ... } let task = URLSession.shared.dataTask(with: request) { (data: Data?, response: URLResponse?, error: Error?) in if error != nil{ print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume()
You don't actually need if-else in that case. Here is your completely rewritten code - try to run it and see if duplication issue goes away. let switchOn = mySwitch.isOn switchState.text = switchOn ? "OFF" : "ON" let endpoint = "http://10.0.1.147/setpins" let urlString = endpoint + "?D2=" + (switchOn ? "0" : "1023") mySwitch.setOn(!switchOn, animated:true) var request = URLRequest(url: URL(string: urlString)!) request.httpMethod = "POST" let task = URLSession.shared.dataTask(with: request) { data, response, error in guard error == nil else { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume()