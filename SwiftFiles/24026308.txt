Accessing Swift Extension From Objective-C
<p>I'm having trouble accessing my swift extension from objective-c.</p> <p>I have the following code in a .swift file:</p> <pre><code>extension NSDictionary { func dictionaryAsJsonString() -&gt; NSString { var err: NSError? var data = NSJSONSerialization.dataWithJSONObject(self, options: NSJSONWritingOptions.PrettyPrinted, error: &amp;err) var string = NSString(data: data, encoding: NSUTF8StringEncoding) return string } } </code></pre> <p>I'm expecting to be able to do the following in my .m file:</p> <pre><code>[dictionary dictionaryAsJsonString]; </code></pre> <p>but it can't find my method and doesn't autocomplete.</p> <p>I know my imports are working fine because I'm able to access my other swift objects.</p>
<p>It is easy enough using simply a Dictionary</p> <pre><code> 20&gt; extension Dictionary { 21. func toJSONString () -&gt; String { return "my dictionary" } 22. } 23&gt; ["a": 1, "b": 2].toJSONString() $R10: String = "my dictionary" </code></pre> <p>The Apple documentation does not mention using extensions on Objective-C classes.</p>
<p>This was probably a bug, or incomplete implementation, in the early version you tried in June. It works just fine to extend NSDictionary in latest beta. For example, this <em>very</em> complicated extension and usage works as expected, with code completion:</p> <pre><code>extension NSDictionary { func myFooBar() { println("gaaah") } } // elsewhere... var d = NSDictionary(object: "bar", forKey: "foo") d.myFooBar() </code></pre>