Swift3 Storekit - Cast string array to Set&lt;ProductIdentifier&gt;
I am trying to implement storekit in app purchases. The following hardcoded value works just fine: My Globals Struct: static var productIdentifiers: Set<ProductIdentifier> = ["com.app.myIAP"] static var store = IAPHelper(productIds: Globals.productIdentifiers) In my function: Globals.store = IAPHelper(productIds: productIdentifiers) But when I try to create the identifiers dynamically, I get an error: var strIdentifiers = [String]() for subscription in subscriptions { strIdentifiers.append(subscription["id"] as! String) } let productIdentifiers: Set<ProductIdentifier> = strIdentifiers Globals.store = IAPHelper(productIds: productIdentifiers) Globals.store.requestProducts{success, products in if success { ....... } } I get this Error: Cannot assign value of type '[String]' to type 'Set<ProductIdentifier>' (aka 'Set<String>') Any guidance would be much appreciated
subscription["id"] returns an Array of type [ProductIdentifier]. You can not cast an array to a type as! ProductIdentifier. Either: Change the cast to as! [ProductIdentifier] or Check the place where you set subscription["id"]. Maybe you set an array accidentally. I assume the later, as an "id" should probably be an ProductIdentifier, not an array.
I had to manipulate as a Set: for subscription in subscriptions { Globals.productIdentifiers.insert(subscription["id"] as! String) } Globals.products = [] Globals.store = IAPHelper(productIds: Globals.productIdentifiers) Globals.store.requestProducts{success, products in if success { ...... } }