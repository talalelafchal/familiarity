Get indexPath of UITextField in UITableViewCell with Swift
<p>So, I'm building a Detail View Controller App that presents a Table with a two-part cell: the label and the Text Field.</p> <p>I'm trying to retrieve the Text Field value and add it to an array. I tried to use the "<code>textField.superview.superview</code>" technique but it didn't worked.</p> <pre><code>func textFieldDidEndEditing(textField: UITextField!){ var cell: UITableViewCell = textField.superview.superview var table: UITableView = cell.superview.superview let textFieldIndexPath = table.indexPathForCell(cell) } </code></pre> <p>Xcode fails to build and presents that "<code>UIView</code> is not convertible to <code>UITableViewCell</code>" and "to <code>UITableView</code>". The referring table has two sections, of four and two rows, respectively.</p> <p>Thanks in advance.</p> <p>EDIT: added ".superview" at the second line of the function.</p>
<p>You'll want to cast the first and second lines in your function, like this:</p> <pre><code>func textFieldDidEndEditing(textField: UITextField!){ var cell: UITableViewCell = textField.superview.superview as UITableViewCell var table: UITableView = cell.superview as UITableView let textFieldIndexPath = table.indexPathForCell(cell) } </code></pre> <p>superview returns a UIView, so you need to cast it to the type of view you expect.</p>
<p>While the currently accepted answer might work, it assumes a specific view hierarchy, which is not a reliable approach since it is prone to change. </p> <p>To get to the <code>indexPath</code> from an <code>UITextField</code> inside a cell, it's much better to go with the following:</p> <pre><code>func textFieldDidEndEditing(textField: UITextField!){ let pointInTable = textField.convertPoint(textField.bounds.origin, toView: self.tableView) let textFieldIndexPath = self.tableView.indexPathForRowAtPoint(pointInTable) } </code></pre> <p>This will continue to work independent of eventual changes to the view hierarchy.</p>