Custom UITableviewcell shows &quot;fatal error: Can't unwrap Optional.None&quot; issue in swift
<p>I need to load a custom cell in a UITableView. I created a custom subclass of UITableViewCell named "CustomTableViewCell". I have added a UITabelViewCell to the tableview (using drag and drop) as shown in figure. Then in file inspector I set the class of that UITabelViewCell to be "CustomTableViewCell". Here is my code:</p> <pre><code>class ViewController: UIViewController,UITableViewDelegate,UITableViewDataSource { @IBOutlet var tableView : UITableView var items = String[]() override func viewDidLoad() { super.viewDidLoad() items = ["Hi","Hello","How"] self.tableView.registerClass(CustomTableViewCell.self, forCellReuseIdentifier: "CusTomCell") // Do any additional setup after loading the view, typically from a nib. } func tableView(tableView: UITableView!, numberOfRowsInSection section: Int) -&gt; Int{ return items.count } func tableView(tableView: UITableView!, cellForRowAtIndexPath indexPath: NSIndexPath!) -&gt; UITableViewCell!{ var cell:CustomTableViewCell? = self.tableView.dequeueReusableCellWithIdentifier("CusTomCell") as? CustomTableViewCell if !cell { cell = CustomTableViewCell(style: UITableViewCellStyle.Subtitle, reuseIdentifier: "CusTomCell") } println("cell \(cell)") // cell.?.labelTitle.text = items[indexPath.row] cell!.labelTitle.text = "some text" return cell } override func didReceiveMemoryWarning() { super.didReceiveMemoryWarning() // Dispose of any resources that can be recreated. } } </code></pre> <p><img src="https://i.stack.imgur.com/U3J1r.png" alt="enter image description here"></p> <p>When I run my code, I get the following error: "fatal error: Can't unwrap Optional.None" as seen in the image.</p>
<p>self.tableView.dequeueReusableCellWithIdentifier will only return a cell if there is one created earlier. You have to do a nil check and create a new cell if it's nil. In you case it will go wrong on the cell.labelTitle.text = because cell could be nil there.</p>
<p>Hi Finally i found solution for my question..please check my code..it works for me..</p> <pre><code>class ViewController: UIViewController,UITableViewDelegate,UITableViewDataSource { @IBOutlet var tableView : UITableView var items = String[]() override func viewDidLoad() { super.viewDidLoad() items = ["Hi","Hello","How"] // Do any additional setup after loading the view, typically from a nib. } func tableView(tableView: UITableView!, numberOfRowsInSection section: Int) -&gt; Int{ return items.count } func tableView(tableView: UITableView!, cellForRowAtIndexPath indexPath: NSIndexPath!) -&gt; UITableViewCell!{ var cell:CustomTableViewCell? = self.tableView.dequeueReusableCellWithIdentifier("CusTomCell", forIndexPath: indexPath) as? CustomTableViewCell cell!.labelTitle.text = "some text" return cell } override func didReceiveMemoryWarning() { super.didReceiveMemoryWarning() // Dispose of any resources that can be recreated. } } </code></pre>
<p>Step 1 : Register nib in viewDidLoad() like below</p> <pre><code>var xib : UINib = UINib (nibName: "WeatherTableViewCell", bundle: nil) self.tableView.registerNib(xib, forCellReuseIdentifier: "Cell") </code></pre> <p>Step 2 : Add the following in cellForRowIndexPath </p> <pre><code>var cell:WeatherTableViewCell? = self.tableView.dequeueReusableCellWithIdentifier("Cell") as? WeatherTableViewCell cell!.weatherName.text = "weather" return cell </code></pre>