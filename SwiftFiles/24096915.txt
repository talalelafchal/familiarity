NSScanner scanString: intoString: not working in playground
<p>I'm trying to make a swift version of my xml parser for som weather data:</p> <pre><code>import Cocoa import Foundation let string2: NSString? = "cdefg jajaja &lt;time&gt; bbb" let scanner = NSScanner(string: string2) scanner.string let searchString:NSString? = "&lt;time" var result: NSString? = nil //= AutoreleasingUnsafePointer&lt;NSString?&gt; scanner.charactersToBeSkipped = nil scanner.scanString(searchString, intoString: nil) // this is not working (false) scanner.scanUpToString( "&gt;", intoString: &amp;result) // this is working result // result = "cdefg jajaja &lt;time" </code></pre> <p>Why is "scanner.scanString(searchString, intoString: nil)" returning nil?</p>
<p>Actually, your problem has nothing to do with Swift (equivalent Objective-C code does the same) â€“ you're just using <code>NSScanner</code> wrong. From the <a href="https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/scanString%3aintoString%3a" rel="nofollow">docs</a> for <code>scanString:intoString:</code></p> <blockquote> <p>Return Value</p> <p>YES if string matches the characters at the scan location, otherwise NO.</p> </blockquote> <p>Basically, <code>scanString:intoString:</code> either finds <code>searchString</code> at the current position (in your example, at the start), or it returns <code>false</code>. Since your String starts with <code>"cdefg"</code> and not with <code>"&lt;time"</code>, the method returns <code>false</code> and does not advance the scanning position. If you remove <code>"cdefg jajaja "</code> from your String, your <code>scanString:intoString:</code> call will return <code>true</code> and advance the scanning position so that the next character is <code>"&gt;"</code>. Alternatively, you could change the <code>scanString:intoString:</code> call to <code>scanUpToString:intoString:</code> to simply discard anything before and including <code>"&lt;time"</code>.</p>