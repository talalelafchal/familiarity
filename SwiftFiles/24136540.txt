Retrieve array of dictionaries, from a dictionary in swift
<p>I have a json response, which among other things contains an array of dictionaries. I want to be able to copy that array in to an existing array.</p> <p>The way I did it in objective-C was like this:</p> <pre><code>dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); dispatch_async(queue, ^{ NSError *error = nil; NSDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&amp;error]; NSArray *venuesArray = responseDictionary[@"response"][@"venues"]; completion(venuesArray, error); }); </code></pre> <p>In swift it has to be something like this:</p> <pre><code>dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), { var error: NSError? let responseDictionary: Dictionary&lt;String, AnyObject&gt; = NSJSONSerialization.JSONObjectWithData(data, options: nil, error: &amp;error) as Dictionary let venuesArray : AnyObject[] = (responseDictionary as AnyObject).valueForKeyPath("response.venues") completionClosure(venues: responseDictionary, error: error); }); </code></pre> <p>But this gives me the following error:</p> <p><code>'AnyObject' is not convertible to 'AnyObject[]</code>'</p> <p>Any help would be appreciated!</p>
<p>The problem is with you declaration of <code>AnyObject[]</code>: The error('<strong><em>AnyObject' is not convertible to 'AnyObject[]'</em></strong>) clearly states that, there is no array initialisation.</p> <p>if The initialiser should be the Array values then use for <code>AnyObject[]</code>, check the responses value first.</p> <p>Replace:</p> <pre><code>let venuesArray : AnyObject[] = (responseDictionary as AnyObject).valueForKeyPath("response.venues") </code></pre> <p>To </p> <pre><code>let venuesArray : AnyObject = (responseDictionary as AnyObject).valueForKeyPath("response.venues") </code></pre>