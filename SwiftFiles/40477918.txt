How do I pop a view controller after the content offset of a uitableview goes below a certain point?
I have a VC with only a UITableView on it. I would like it so the user can either scroll through the tableview or pop the view controller once the uitableview content offset reaches a certain y position below zero. Currently I have it so it does a variation of this with a few caveats: After initially loading the view, swiping down to pop the VC doesn't work, only after releasing the finger and attempting to do it again does it work. Furthermore, if the user were to release the touch and try to scroll up, the scroll view is locked, so the user can get stuck in a cycle of nothing happening UI wise. Doing the same swipe twice in a row with a intermediary release of the finger is the only way to get this to work and is very unintuitive. What am I missing / what do I need to change in order to accomplish this? For anyone familiar, Snapchat does this when a user looks at a list showing which friends have seen their story. Here is a code snippet for the base class used to handle all of the gesture recognizers: https://gist.github.com/jayisidoro/453b13cf5dc68b6a60b73d739c63e5ed Here is the code used in the child class that handles the gesture adding / removal: override func viewDidAppear(_ animated: Bool) { self.searchTable.isScrollEnabled = true scrollingFinished() } func scrollViewDidScroll(_ scrollView: UIScrollView) { if scrollView.contentOffset.y <= 0 { if pullDownTableViewGestureRecognizer == nil { pullDownTableViewGestureRecognizer = UIPanGestureRecognizer(target: self, action: #selector(pullDownTableViewRecognized(_:))) pullDownTableViewGestureRecognizer.delegate = self searchTable.addGestureRecognizer(pullDownTableViewGestureRecognizer) searchTable.isScrollEnabled = false } } else { scrollingFinished() } } func scrollViewDidEndDragging(_ scrollView: UIScrollView, willDecelerate decelerate: Bool) { if !decelerate, scrollView.contentOffset.y > 0 { scrollingFinished() } } fileprivate func scrollingFinished() { searchTable.isScrollEnabled = true if pullDownTableViewGestureRecognizer != nil { searchTable.removeGestureRecognizer(pullDownTableViewGestureRecognizer) pullDownTableViewGestureRecognizer.delegate = nil pullDownTableViewGestureRecognizer = nil } }