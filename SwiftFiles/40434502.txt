Cloud kit pulling empty array
I am following an online tutorial to make a social media type of app and I am stuck when trying to pull records from cloud kit to populate a table. I've narrowed it down to the code just pulling an empty array, when I set a breakpoint to my reload function, the variable is present but has no values. here is the entire tablviewcontroller code override func viewDidLoad() { super.viewDidLoad() refresh = UIRefreshControl() refresh.attributedTitle = NSAttributedString(string: "Pull to load Stream") refresh.addTarget(self, action: #selector(StreamTableViewController.loadData), for: .valueChanged) self.tableView.addSubview(refresh) loadData() } func loadData () { posts = [CKRecord] () let publicData = CKContainer.default().publicCloudDatabase let query = CKQuery(recordType: "Post", predicate: NSPredicate(format: "TRUEPREDICATE", argumentArray: nil)) query.sortDescriptors = [NSSortDescriptor(key: "creationDate", ascending: false)] publicData.perform(query, inZoneWith: nil) { (results:[CKRecord]?, error:Error?) -> Void in if let posts = results { self.posts = posts DispatchQueue.main.async(execute: { () -> Void in self.tableView.reloadData() self.refresh.endRefreshing() print("refreshed") }) } } } @IBAction func Post(_ sender: AnyObject) { let alert = UIAlertController(title: "New Post", message: "Enter a Post", preferredStyle: .alert) alert.addTextField { (textfield:UITextField) -> Void in textfield.placeholder = "Your Post" } alert.addAction(UIAlertAction(title: "Send", style: .default, handler: { (action:UIAlertAction) -> Void in let textField = alert.textFields!.first! if textField.text != "" { let newpost = CKRecord(recordType: "Post") newpost["content"] = textField.text as CKRecordValue? let publicData = CKContainer.default().publicCloudDatabase publicData.save(newpost, completionHandler: { (record:CKRecord?, error:Error?) -> Void in if error == nil { DispatchQueue.main.async(execute: { () -> Void in self.tableView.beginUpdates() self.posts.insert(newpost, at: 0) let indexPath = IndexPath(row: 0, section: 0) self.tableView.insertRows(at: [indexPath], with: .top) self.tableView.endUpdates() print("posted") }) }else{ print(error) } } ) }} )) alert.addAction(UIAlertAction(title: "Cancel", style: .cancel, handler: nil)) self.present(alert, animated: true, completion: nil) } override func didReceiveMemoryWarning() { super.didReceiveMemoryWarning() } override func numberOfSections(in tableView: UITableView) -> Int { return 1 } override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int { return posts.count } override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell { let cell = tableView.dequeueReusableCell(withIdentifier: "Cell", for: indexPath) if posts.count == 0 { return cell } let post = posts[indexPath.row] if let postContent = post["content"] as? String { let dateFormat = DateFormatter() dateFormat.dateFormat = "MM/dd/yyyy" let dateString = dateFormat.string(from: post.creationDate!) cell.textLabel?.text = postContent cell.detailTextLabel?.text = dateString } return cell } Im not sure if I'm loading the actual content from the CKrecords into the table. Any help is appreciated! -Nate