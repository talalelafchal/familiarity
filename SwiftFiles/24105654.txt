JSON Serialization in Swift iOS
<p>How can I serialize JSON in swift? I am trying to serialize using this method, however it is causing <strong>EXC_BAD_INSTRUCTION</strong>. For downloading JSON data, I am using NSURLConnection.</p> <pre><code>var sJson : NSDictionary = NSJSONSerialization.JSONObjectWithData(nsMutData, options: NSJSONReadingOptions.MutableContainers, error: nil) as NSDictionary </code></pre> <p>How can I solve it?</p> <p>Regards</p>
<p>Your root-level data is an <em>array</em> of dictionaries -- not a dictionary; therefore replace your line with:</p> <pre><code>var sJson = NSJSONSerialization.JSONObjectWithData(nsMutData, options: .MutableContainers, error: nil) as NSArray </code></pre> <p>I tested it and it now works with your data.</p> <p>Here's how I tested it after having created a "json.txt" file in my project:</p> <pre><code>var filePath = NSBundle.mainBundle().pathForResource("json", ofType:"txt") var nsMutData = NSData(contentsOfFile:filePath) var sJson = NSJSONSerialization.JSONObjectWithData(nsMutData, options: .MutableContainers, error: nil) as NSArray </code></pre>
<p>This is the swift 2.0 way</p> <pre><code> let path : String = NSBundle.mainBundle().pathForResource("jsonDict", ofType: "JSON")!; let data : NSData = NSData(contentsOfFile: path)!; var jsonDictionary : NSDictionary do { jsonDictionary = try NSJSONSerialization.JSONObjectWithData(data, options: NSJSONReadingOptions()) as! NSDictionary } catch { print(error) } </code></pre>