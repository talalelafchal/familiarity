How to check if bluetooth is enabled programmatically?
<p>I would like to check if bluetooth is enabled on any Android device periodically. Is there any intents that I could catch using BroadcastReceiver to do so, or is there other ways to do it?</p>
<p>There you go:</p> <pre><code>BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter(); if (mBluetoothAdapter == null) { // Device does not support Bluetooth } else { if (!mBluetoothAdapter.isEnabled()) { // Bluetooth is not enable :) } } </code></pre> <p>With <code>uses-permission</code> <br/></p> <pre><code> &lt;uses-permission android:name="android.permission.BLUETOOTH" android:required="false" /&gt; </code></pre>
<p>Here I have other alternative as an answer for this question.</p> <p>First add following lines in your Manifest file.</p> <pre><code>&lt;uses-feature android:name="android.hardware.BLUETOOTH" android:required="false"/&gt; </code></pre> <p>Now, where you want to check Bluetooth supportability, use following code.</p> <pre><code>boolean isBluetoothSupported = getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH); </code></pre>
<p>use can use </p> <pre><code>BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter(); </code></pre> <p>for check bt connected </p> <pre><code>mBluetoothAdapter.getProfileConnectionState(BluetoothHeadset.HEADSET) == BluetoothHeadset.STATE_CONNECTED </code></pre> <p>for check bt disconnected </p> <pre><code>mBluetoothAdapter.getProfileConnectionState(BluetoothHeadset.HEADSET) == BluetoothHeadset.STATE_DISCONNECTED </code></pre>
<p>To check Bluetooth state, ON or OFF, programmatically:</p> <pre><code> BluetoothAdapter btAdapter = ((Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.JELLY_BEAN_MR1) ?((BluetoothManager)mContext.getSystemService(Context.BLUETOOTH_SERVICE)).getAdapter() :(BluetoothAdapter.getDefaultAdapter())); if(btAdapter==null){ return; } if(btAdapter.getState()==BluetoothAdapter.STATE_ON){ //Bluetooth is ON } </code></pre> <p>You may also listen to Intent action:</p> <blockquote> <p>BluetoothAdapter.ACTION_STATE_CHANGED</p> </blockquote>
<p>This is how I did it with the help of @xjaphx's answer, slightly simplified version:</p> <pre><code> private boolean getBlueToothOn(){ BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter(); return btAdapter != null &amp;&amp; btAdapter.isEnabled(); } &lt;uses-permission android:name="android.permission.BLUETOOTH" /&gt; </code></pre>
<pre><code>public boolean isBluetoothEnabled() { BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter(); return mBluetoothAdapter.isEnabled(); } </code></pre> <p>with the permission in manifest file:</p> <pre><code>&lt;uses-permission android:name="android.permission.BLUETOOTH" /&gt; </code></pre>