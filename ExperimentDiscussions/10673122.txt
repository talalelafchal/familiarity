How To Save Canvas As An Image With canvas.toDataURL()?
<p>I'm currently building a HTML5 web app/Phonegap native app and I can't seem to figure out how to save my canvas as an image with canvas.toDataURL():( Can somebody please help me out?</p> <p>Here's the code, what's wrong with it?</p> <p>//My canvas was named "canvasSignature"</p> <p>Javascript:</p> <hr> <pre><code>function putImage() { var canvas1 = document.getElementById("canvasSignature"); if (canvas1.getContext) { var ctx = canvas1.getContext("2d"); var myImage = canvas1.toDataURL("image/png"); } var imageElement = document.getElementById("MyPix"); imageElement.src = myImage; } </code></pre> <p>HTML5:</p> <hr> <pre><code>&lt;div id="createPNGButton"&gt; &lt;button onclick="putImage()"&gt;Save as Image&lt;/button&gt; &lt;/div&gt; </code></pre> <p>Thanks, Wardenclyffe</p>
<p>Instead of <code>imageElement.src = myImage;</code> you should use <code>window.location = myImage;</code> </p> <p>And even after that the browser will display the image itself. You can right click and use "Save Link" for downloading the image.</p> <p>Check <a href="http://books.google.com.tr/books?id=jhJNl6yWvYAC&amp;pg=PA171&amp;lpg=PA171&amp;dq=canvas%20dataToURL&amp;source=bl&amp;ots=4iPeQOxasl&amp;sig=FFQv3ZdRthyst644jdDGQzONn7M&amp;hl=tr&amp;sa=X&amp;ei=-9q4T9OnD8WA4gSJxOXrCQ&amp;ved=0CHoQ6AEwBg#v=onepage&amp;q&amp;f=false" rel="nofollow">this link</a> for more information.</p>
<p>You can use <a href="https://github.com/hongru/canvas2image" rel="nofollow">canvas2image</a> to prompt for download.</p> <p>I had the same issue, here's a simple example that both adds the image to the page and forces the browser to download it:</p> <pre><code>&lt;html&gt; &lt;head&gt; &lt;script src="http://www.nihilogic.dk/labs/canvas2image/canvas2image.js"&gt;&lt;/script&gt; &lt;script&gt; function draw(){ var canvas = document.getElementById("thecanvas"); var ctx = canvas.getContext("2d"); ctx.fillStyle = "rgba(125, 46, 138, 0.5)"; ctx.fillRect(25,25,100,100); ctx.fillStyle = "rgba( 0, 146, 38, 0.5)"; ctx.fillRect(58, 74, 125, 100); } function to_image(){ var canvas = document.getElementById("thecanvas"); document.getElementById("theimage").src = canvas.toDataURL(); Canvas2Image.saveAsPNG(canvas); } &lt;/script&gt; &lt;/head&gt; &lt;body onload="draw()"&gt; &lt;canvas width=200 height=200 id="thecanvas"&gt;&lt;/canvas&gt; &lt;div&gt;&lt;button onclick="to_image()"&gt;Draw to Image&lt;/button&gt;&lt;/div&gt; &lt;image id="theimage"&gt;&lt;/image&gt; &lt;/body&gt; &lt;/html&gt; </code></pre>
<p>@Wardenclyffe and SColvin , you both are trying to save image using the canvas, not by using canvas'context. both you should try to ctx.toDataURL();</p> <p>Try This : </p> <p>var canvas1 = document.getElementById("yourCanvasId"); <br> var ctx = canvas1.getContext("2d");<br> var img = new Image();<br> img.src = ctx.toDataURL('image/png');<br> ctx.drawImage(img,200,150);<br></p> <p>Also you may refer to following links:</p> <p><a href="http://tutorials.jenkov.com/html5-canvas/todataurl.html" rel="nofollow">http://tutorials.jenkov.com/html5-canvas/todataurl.html</a></p> <p><a href="http://www.w3.org/TR/2012/WD-html5-author-20120329/the-canvas-element.html#the-canvas-element" rel="nofollow">http://www.w3.org/TR/2012/WD-html5-author-20120329/the-canvas-element.html#the-canvas-element</a></p>
<p>Here is some code. without any error.</p> <pre><code>var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); // here is the most important part because if you dont replace you will get a DOM 18 exception. window.location.href=image; // it will save locally </code></pre>
<p>I created a small library that does this (along with some other handy conversions). It's called <a href="http://www.github.com/gillyb/reimg" rel="nofollow">reimg</a>, and it's really simple to use.</p> <p><code>ReImg.fromCanvas(yourCanvasElement).toPng()</code></p>
<p>This work for me: (Only google chrome)</p> <pre><code>&lt;html&gt; &lt;head&gt; &lt;script&gt; function draw(){ var canvas = document.getElementById("thecanvas"); var ctx = canvas.getContext("2d"); ctx.fillStyle = "rgba(125, 46, 138, 0.5)"; ctx.fillRect(25,25,100,100); ctx.fillStyle = "rgba( 0, 146, 38, 0.5)"; ctx.fillRect(58, 74, 125, 100); } function downloadImage() { var canvas = document.getElementById("thecanvas"); var image = canvas.toDataURL(); var aLink = document.createElement('a'); var evt = document.createEvent("HTMLEvents"); evt.initEvent("click"); aLink.download = 'image.png'; aLink.href = image; aLink.dispatchEvent(evt); } &lt;/script&gt; &lt;/head&gt; &lt;body onload="draw()"&gt; &lt;canvas width=200 height=200 id="thecanvas"&gt;&lt;/canvas&gt; &lt;div&gt;&lt;button onclick="downloadImage()"&gt;Download&lt;/button&gt;&lt;/div&gt; &lt;image id="theimage"&gt;&lt;/image&gt; &lt;/body&gt; &lt;/html&gt; </code></pre>