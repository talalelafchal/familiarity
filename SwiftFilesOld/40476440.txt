Swift dealing with classes, UIButtons and tableView
This might sound like a very stupid question but I am fairly new to swift and cannot think how to go about this. As you can see in this Screenshot I have a search recipes textfield in RecipesViewController where the user enters a food item (which I use in the api call). After the user hits the button I make a call to an api and get data from that api and store that data in instance variable (searchRecipe array) in my RecipesViewController class. Now I am trying to show the data that I received from the api in a table view so I have another class called SearchRecipeTViewController. n this class I want to populate the table with the data I received from the api however when I try to access the searchRecipe array (which stores the elements received from the api) I get a blank value which I understand is due to the instance variable being initialized as "". But now how do I go about this so that I can get data from the api and display it on the table view when the user hits the button. Any suggestions would be appreciated. Code to call and get data from api when button is clicked @IBAction func SearchButton(sender: UIButton) { if let recipe = RecipeSearchBar.text { searchRecipe = recipe } //search recipe API call endpoint = "http://api.yummly.com/v1/api/recipes? _app_id=apiID&_app_key=apiKey&q=\(searchRecipe)" Alamofire.request(.GET, endpoint).responseJSON { response in if response.result.isSuccess { let data = response.result.value as! NSDictionary if let matches = data["matches"] as? [[String: AnyObject]] { for match in matches { if let name = match["recipeName"] as? String { self.recipeName.append(name); } } } } else if response.result.isFailure { print("Bad request") } } }
Try using SwiftyJSON to manipulate the JSON the API returns. SwiftyJSON makes API calls that use JSON much easier. Here is the code I used that uses both Alamofire and SwiftyJSON. //Use alamofire to connect to the web service and use GET on it Alamofire.request(url).responseJSON { response in if let error = response.result.error { print("Error: \(error)") return } //Value is the response the webservice gives, given as a Data Obkect if let value = response.result.value { //The information given from the webservice in JSON format let users = JSON(value) print("The user information is: \(users)") //Get each username in the JSON output and print it for username in users.arrayValue{ print(username["username"].stringValue) } } } Forgot to add a link to SwiftJSON: https://github.com/SwiftyJSON/SwiftyJSON