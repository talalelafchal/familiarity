Using multiple buttons in Swift is causing cascading outputs?
So sorry for such a newbie question but I have no programming experience and cannot even think of how to search for an answer to my problem. Background: I am using a Wemos D1 Mini R2 to control a strip of Neopixel addressable LEDs, the sketch for this allow me to send http requests over my network to change the patterns and switch LEDs on or off etc. I decided to have a go at writing my first IPhone App to replace using a web page and had great success with the first to button which were to switch LEDs on or off. When I added more buttons is when i ran into trouble. If I press the first button on the first message is sent as it should be: response = Optional(<NSHTTPURLResponse: 0x170221200> { URL: pttp://10.0.1.147/rainbow?fade=3000 } { status code: 200, headers { "Access-Control-Allow-Origin" = "*"; Connection = close; "Content-Length" = 7; "Content-Type" = "text/plain"; } }) When I press the next button I get the first output and the second output? response = Optional(<NSHTTPURLResponse: 0x17003de00> { URL: pttp://10.0.1.147/rainbow?fade=3000 } { status code: 200, headers { "Access-Control-Allow-Origin" = "*"; Connection = close; "Content-Length" = 7; "Content-Type" = "text/plain"; } }) response = Optional(<NSHTTPURLResponse: 0x170220e80> { URL: pttp://10.0.1.147/wave?r=255&g=32&b=10&fade=5000 } { status code: 200, headers { "Access-Control-Allow-Origin" = "*"; Connection = close; "Content-Length" = 4; "Content-Type" = "text/plain"; } }) and so on for the third etc: response = Optional(<NSHTTPURLResponse: 0x170222340> { URL: pttp://10.0.1.147/setleds?r=32&g=64&b=32&fade=5000 } { status code: 200, headers { "Access-Control-Allow-Origin" = "*"; Connection = close; "Content-Length" = 7; "Content-Type" = "text/plain"; } }) response = Optional(<NSHTTPURLResponse: 0x170220c60> { URL: pttp://10.0.1.147/rainbow?fade=3000 } { status code: 200, headers { "Access-Control-Allow-Origin" = "*"; Connection = close; "Content-Length" = 7; "Content-Type" = "text/plain"; } }) response = Optional(<NSHTTPURLResponse: 0x17403e400> { URL: pttp://10.0.1.147/wave?r=255&g=32&b=10&fade=5000 } { status code: 200, headers { "Access-Control-Allow-Origin" = "*"; Connection = close; "Content-Length" = 4; "Content-Type" = "text/plain"; } }) I'm quite sure I am making a rooky mistake with where I have placed my code or something simple but I just cannot find the answer. Here is my code, any help would be much appreciated. // // ViewController.swift // Neopixel Controller // // Created by Andrew Brierley on 6/11/16. // Copyright Â© 2016 Andrew Brierley. All rights reserved. // import UIKit class ViewController: UIViewController { override func viewDidLoad() { super.viewDidLoad() // Do any additional setup after loading the view, typically from a nib. } //START RAINBOW BUTTON HERE @IBAction func Rainbow(_ sender: UIButton) { let string1 = "http://" let string2 = "10.0.1.147" let string3 = "/rainbow?fade=3000" let myUrl = URL(string: string1 + string2 + string3); var request = URLRequest(url:myUrl!) request.httpMethod = "POST"// Compose a query string let postString = ""; request.httpBody = postString.data(using: String.Encoding.utf8); let task = URLSession.shared.dataTask(with: request) { (data: Data?, response: URLResponse?, error: Error?) in if error != nil { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume() } // START ALL OFF BUTTON HERE @IBAction func AllOff(_ sender: UIButton) { let string1 = "http://" let string2 = "10.0.1.147" let string3 = "/ledsoff?fade=500" let myUrl = URL(string: string1 + string2 + string3); var request = URLRequest(url:myUrl!) request.httpMethod = "POST"// Compose a query string let postString = ""; request.httpBody = postString.data(using: String.Encoding.utf8); let task = URLSession.shared.dataTask(with: request) { (data: Data?, response: URLResponse?, error: Error?) in if error != nil { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume() } //START WAVE BUTTON HERE @IBAction func Wave(_ sender: UIButton) { let string1 = "http://" let string2 = "10.0.1.147" let string3 = "/wave?r=255&g=32&b=10&fade=5000" let myUrl = URL(string: string1 + string2 + string3); var request = URLRequest(url:myUrl!) request.httpMethod = "POST"// Compose a query string let postString = ""; request.httpBody = postString.data(using: String.Encoding.utf8); let task = URLSession.shared.dataTask(with: request) { (data: Data?, response: URLResponse?, error: Error?) in if error != nil { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume() } //START RED BUTTON HERE @IBAction func RED(_ sender: UIButton) { let string1 = "http://" let string2 = "10.0.1.147" let string3 = "/setleds?r=32&g=64&b=32&fade=5000" let myUrl = URL(string: string1 + string2 + string3); var request = URLRequest(url:myUrl!) request.httpMethod = "POST"// Compose a query string let postString = ""; request.httpBody = postString.data(using: String.Encoding.utf8); let task = URLSession.shared.dataTask(with: request) { (data: Data?, response: URLResponse?, error: Error?) in if error != nil { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume() } //START GREEN BUTTON HERE @IBAction func GREEN(_ sender: UIButton) { let string1 = "http://" let string2 = "10.0.1.147" let string3 = "/setleds?r=000&g=255&b=000&fade=1000" let myUrl = URL(string: string1 + string2 + string3); var request = URLRequest(url:myUrl!) request.httpMethod = "POST"// Compose a query string let postString = ""; request.httpBody = postString.data(using: String.Encoding.utf8); let task = URLSession.shared.dataTask(with: request) { (data: Data?, response: URLResponse?, error: Error?) in if error != nil { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume() } //START BLUE BUTTON HERE @IBAction func BLUE(_ sender: UIButton) { let string1 = "http://" let string2 = "10.0.1.147" let string3 = "/setleds?r=000&g=000&b=255&fade=0" let myUrl = URL(string: string1 + string2 + string3); var request = URLRequest(url:myUrl!) request.httpMethod = "POST"// Compose a query string let postString = ""; request.httpBody = postString.data(using: String.Encoding.utf8); let task = URLSession.shared.dataTask(with: request) { (data: Data?, response: URLResponse?, error: Error?) in if error != nil { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume() } //START WHITE BUTTON HERE @IBAction func WHITE(_ sender: UIButton) { let string1 = "http://" let string2 = "10.0.1.147" let string3 = "/setleds?r=127&g=127&b=127&fade=10000000000" let myUrl = URL(string: string1 + string2 + string3); var request = URLRequest(url:myUrl!) request.httpMethod = "POST"// Compose a query string let postString = ""; request.httpBody = postString.data(using: String.Encoding.utf8); let task = URLSession.shared.dataTask(with: request) { (data: Data?, response: URLResponse?, error: Error?) in if error != nil { print("error=\(error)") return } // You can print out response object print("response = \(response)") } task.resume() } override func didReceiveMemoryWarning() { super.didReceiveMemoryWarning() // Dispose of any resources that can be recreated } }