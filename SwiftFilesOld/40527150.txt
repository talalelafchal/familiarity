inApp purchase, dowload free products
I am implementing inApp features with download hosted content feature. All products are free for unlimited time. Each product have one download associated and that is audio file. Is possible to start download without user see dialog to buy free product. First user must give his apple id password, than he see dialog to buy free product and than dialog that product is succesfully purchased.Than download can be requested. But since all products are free can somehow download be reuested without user see confiramtion dialogs and messages and start download imedietly. If item was previously be purchased/downloaded than user see message that will buy free item again. I know for restore functionalities, but do I need to track previously downloaded items and in that case start download from restore state. Thanks!
1) Yes, You can download without dialogs. get product detail using store kit, and if product price is free (0), download item without processing purchase request from Storekit. Code to request product detail: KProductsRequest *productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers: [NSSet setWithArray:productIdentifiers]]; // Keep a strong reference to the request. self.request = productsRequest; productsRequest.delegate = self; [productsRequest start]; // SKProductsRequestDelegate protocol method - (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response { self.products = response.products; for (NSString *invalidIdentifier in response.invalidProductIdentifiers) { // Handle any invalid product identifiers. or check that product you are looking for dozens has its identifier here } for (SKProduct *product in self.products) { //for example, product you are looking for has identifier "com.product.free" if([product.productIdentifier isEqualToString:@"com.product.free"] && [product.price compareWithInt:0]) { // Startdownloading without purchase } } } 2) If you have non-consumable inappt purchase, you must provide option for restore. for downloading, you can write your own logic. check if item is downloaded and re-download only if its not available.