iOS: Track user is driving in background
My goal is to know when the user is traveling even if the app is killed or in the background. So I implemented this: let locationManager = CLLocationManager() private func setupLocationManager(){ locationManager.delegate = self locationManager.requestAlwaysAuthorization() locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters locationManager.distanceFilter = kCLLocationAccuracyNearestTenMeters locationManager.allowsBackgroundLocationUpdates = true locationManager.activityType = .otherNavigation } func startSignificantChangeLocationUpdates() { guard CLLocationManager.significantLocationChangeMonitoringAvailable() else { logger.error("significantLocationChangeMonitoringAvailable returned false") return } setupLocationManager() locationManager.startMonitoringSignificantLocationChanges() } func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) { // only save data above magical 5m/s => 18km/h var filteredLocations = locations.filter{$0.speed > 5} //only save the fastest item if multiple data is delived filteredLocations = filteredLocations.sorted { (l1, l2) -> Bool in l1.speed > l2.speed } if let fastestLocation = filteredLocations.first{ if (filteredLocations.count > 0){ //save to DB locationModel.addLocations(clLocations: [fastestLocation]) } } } My problem is that this is not very accurate. Even if I travel more than 10km in 10min by train I just get 2 or 3 datapoints saying that I traveled just 2 minutes. How can I improve this? kCLLocationAccuracyNearestTenMeters is using a lot of energy. If I compare with Moves then the data is very accurate. But I don't want to integrate their SDK as I try to protect my users privacy.