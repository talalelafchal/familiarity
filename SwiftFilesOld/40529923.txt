How to crop UIImage with UIBeziePath with all scale factors?
I'm trying to crop a UIImage from a given UIBezierPath that I've drawn in another view. This is my code: // "self.imageEdited" is my initial image that needs to be cropped let path = .... //my UIBezierPath let layer = CAShapeLayer() layer.path = path.cgPath self.imageToEditView.layer.mask = layer UIGraphicsBeginImageContextWithOptions(self.imageEdited.size, false, 1.0) // <-- Why it's not working with 0.0 ? self.imageToEditView.layer.render(in: UIGraphicsGetCurrentContext()!) let image = UIGraphicsGetImageFromCurrentImageContext() UIGraphicsEndImageContext() //here "image" will be cropped but it haves white background let croppedCGImage = image?.cgImage?.cropping(to: path.cgPath.boundingBox) let croppedImage = UIImage(cgImage: croppedCGImage!) self.imageToEditView.layer.mask = nil UIImageWriteToSavedPhotosAlbum(croppedImage, nil, nil, nil) This code works, it crops my image as desired. But if I change the scale factor of the UIGraphicsBeginImageContextWithOptions to 0.0 (to get the default scale of the device, this will create the same "image" but when it runs this: let croppedCGImage = image?.cgImage?.cropping(to: path.cgPath.boundingBox) I will not get the right image cropped. It crops it as a different portion. should I scale my path?