childViewControllers is empty after calling addChildViewController
I have a question regarding add/remove childviewcontrollers with ContainerView. I have a UIViewController named "ContainerViewController" that contains a ContainerView, and this ContainerView has a UIViewController named "ContainerLinkViewController". I also have four other UIViewControllers that will be added to or removed from this "ContainerLinkViewController" whenever user a clicks one of the tab button that is placed at the bottom of "ContainerViewController". The storyboard looks like below. NOTE that the custom segues connected to those four UiViewcontrollers are just empty segue that does nothing but show visual connection in storyboard. So what I do is first add the First Tab ViewController to "ContainerLinkViewController" as a childViewController by using below code in viewDidLoad(). let firstTabViewController = self.storyboard?.instantiateViewController(withIdentifier: "FirstTabViewController") as! FirstTabViewController self.addChildViewController(firstTabViewController) firstTabViewController.view.frame = self.view.bounds self.view.addSubview(firstTabViewController.view) firstTabViewController.didMove(toParentViewController: self) After this initial setup, whenever user tabs on one of those tab buttons, I send signal from "ContainerViewController" that which UIViewController is to be added as new childViewController to "ContainerLinkViewController" and switching the old childViewController and this new childViewController using the below code. func swapViewControllers(from : UIViewController, to : UIViewController) { from.willMove(toParentViewController: nil) self.addChildViewController(to) to.view.frame = self.view.bounds self.transition(from: from, to: to, duration: 1.0, options: UIViewAnimationOptions.transitionCrossDissolve, animations: nil) { finished in from.view.removeFromSuperview() from.removeFromParentViewController() to.didMove(toParentViewController: self) } } Before calling this "swaptViewControllers()", I take the old childViewController by doing the following. let oldChildViewController = self.childViewControllers.last My problem is that this "oldChildViewController" is nil when I click one of those tabs for the first time right after the initial setup. So the function "swaptViewControllers()" does not even called because the self.childViewControllers is empty. I have been struggling with this for few days now and could not find clear answer to solve this. So I decided to ask here to get some help about what might cause this. Any help?? Thanks. NOTE : I am using swift 3. Maybe this would help to answer my question since it seems lots of things changed fro swift 2.