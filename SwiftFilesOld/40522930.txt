ZXingObjc - Cannot read Code128 when the barcode area is short
I'm using ZXingObjC to read barcode from images in my swift app. It works fine in most situations. But when the height of Code128 is short, it always get "A barcode was not found in this image". I also try to add kBarcodeFormatCode128 to possibleFormat of ZXDecodeHints but with no luck. Is this the limits of ZXingObjC, or did I miss something else? Any help is appreciated. Here is my code: import Foundation import ZXingObjC let zXingReader = ZXingReader.shared class ZXingReader { static let shared = ZXingReader() lazy var decodeHints: ZXDecodeHints = { let hints = ZXDecodeHints() return hints }() func readCodeFromImage(image: UIImage) throws -> ZXResult { let source = ZXCGImageLuminanceSource(CGImage: image.CGImage!) let binazer = ZXHybridBinarizer(source: source) let bitmap = ZXBinaryBitmap(binarizer: binazer) let reader = ZXMultiFormatReader() do { let result = try reader.decode(bitmap, hints: decodeHints) return result } catch let error as NSError { throw error } } func readCodeFromImage(image: UIImage, completion: (ZXResult) -> Void, failure: ((NSError) -> Void)?) { do { let result = try readCodeFromImage(image) completion(result) } catch let error as NSError { guard let failure = failure else { return } failure(error) } } } Here is the images I use: ZXingObjC works fine on the left image, but return nil on the right image.