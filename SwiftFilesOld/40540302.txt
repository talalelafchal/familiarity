Not able to get Push tokens from my TestFlight users
I use the following code to acquire a user's Push Notification Token for Apple: func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool { if (KeychainWrapper.hasValueForKey("logged_in")){ if (KeychainWrapper.stringForKey("logged_in") == "true"){ self.window = UIWindow(frame: UIScreen.mainScreen().bounds) let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil) let rootViewController: RootViewController = mainStoryboard.instantiateViewControllerWithIdentifier("RootViewController") as! RootViewController self.window?.rootViewController = rootViewController self.window?.makeKeyAndVisible() } } registerForPushNotifications(application) return true } func registerForPushNotifications(application: UIApplication) { let notificationSettings = UIUserNotificationSettings( forTypes: [.Badge, .Sound, .Alert], categories: nil) application.registerUserNotificationSettings(notificationSettings) } func application(application: UIApplication, didRegisterUserNotificationSettings notificationSettings: UIUserNotificationSettings) { if notificationSettings.types != .None { application.registerForRemoteNotifications() } } func application(application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: NSData) { let tokenChars = UnsafePointer<CChar>(deviceToken.bytes) var tokenString = "" for i in 0..<deviceToken.length { tokenString += String(format: "%02.2hhx", arguments: [tokenChars[i]]) } if (KeychainWrapper.hasValueForKey("push_token")){ KeychainWrapper.removeObjectForKey("push_token") } Constant.pushToken = tokenString print("Device Token:", tokenString) } Later in my app when creating an account I post the Constant.pushToken to my back-end When I ran this on my own phone it worked fine. I am receiving my own Push token in my database. Perhaps this is because my own phone is registered in my Apple Developer console (?). However, when my TestFlight users install the app and grant it permission to send Push Notifications I do not end up receiving their Push tokens in my database. I've been struggling with this for 2 days already and cannot seem to make it work. Yesterday I revoked all my certificates and provisioning files and re-created all of them. Still no luck. I am also receiving this message when uploading to the AppStore: Missing Push Notification Entitlement - Your app includes an API for Apple's Push Notification service, but the aps-environment entitlement is missing from the app's signature. To resolve this, make sure your App ID is enabled for push notification in the Provisioning Portal. Then, sign your app with a distribution provisioning profile that includes the aps-environment entitlement. This will create the correct signature, and you can resubmit your app. See "Provisioning and Development" in the Local and Push Notification Programming Guide for more information. If your app does not use the Apple Push Notification service, no action is required. You may remove the API from future submissions to stop this warning. If you use a third-party framework, you may need to contact the developer for information on removing the API. However, I've received that message on apps that are able to register Push tokens to my database as well. Here are some screenshots from my Apple Developer Consolde + Xcode: