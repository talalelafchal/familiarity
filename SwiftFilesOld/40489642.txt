formatting dictionary for Alamofire
This question is more about Swift & and Dictionaries than Alamofire itself I need to create a record via a webservice, and I'm using Alamofire. For some reason I have too many quotes than desired and the webservice refuses my call If I simulate the call via curl the webservice receives : {"records"=>[{"id"=>"2", "node"=>{"children"=>[{"specifications"=>"Specs", "description"=>"Fee", "line_item"=>{"sale_price"=>123.4, "amount"=>1, "vat_percentage"=>21, "unit_price"=>99.5}}]}}], "action"=>"create", "collection"=>"invoices", "controller"=>"api/v2/api"} If I do the call via Alamofire in my app, the webservice receives: {"records"=>[{"id"=>"2", "node"=>{"children"=>[{"specifications"=>"Specs", "description"=>"Fee", "line_item"=>{"sale_price"=>"123.4", "amount"=>"1", "vat_percentage"=>"21", "unit_price"=>"99.5"}}]}}], "action"=>"create", "collection"=>"invoices", "controller"=>"api/v2/api"} As you can see each number has quotes wrapped around itself (eg. "99.5" vs 99.5, causing the webservice to flip. I tweaked around but can't find on how to fix this in Swift. The way I created my payload for Alamofire is: let jsonObject: [String: AnyObject] = [ "id": id as AnyObject, "node" : [ "children": [[ "description" : lineDescription, "specifications" : lineSpecifications, "line_item" : [ "amount" : 1, "unit_price" : feePrice, "sale_price" : feePrice, "vat_percentage" : 21 ] ]] as AnyObject ] as AnyObject ] let parameters = ["records" : [jsonObject as AnyObject]] Alamofire.request(urlPath, method: .post, parameters: parameters, headers: ["X-API-KEY": apiKey, "Content-type application":"json", "Accept application" : "json"]).responseString() { response in switch (response.result) { blah blah } where the variables lineDescription and lineSpecifications are Strings and feePrice is a Double
As stated in the comment I needed to add an encoding to the request. To close the question and to show a more friendly formatted solution this answer : Alamofire.request(urlPath, method: .post, parameters: parameters, headers: ["X-API-KEY": apiKey, "Content-type application":"json", "Accept application" : "json"]).responseString() { should be : Alamofire.request(urlPath, method: .post, parameters: parameters, encoding: JSONEncoding.default, headers: ["X-API-KEY": apiKey, "Content-type application":"json", "Accept application" : "json"]).responseString() {