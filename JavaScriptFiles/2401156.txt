Passing javascript to a function
<p>Can I pass some Javascript to a function and then execute that Javascript from within the function, e.g.</p> <pre><code>test("a = 1; b = 2; test2(a,b);"); function test(js) { // execute dynamically generated JS here. } </code></pre> <p>Basically I have some code that is generated on the server and I want to pass that code to a JS function which when it has finished processing it executes the code passed as a parameter.</p> <p>This could also be useful for the parameter of setTimeout, then the code passed could be executed in the timeout event.</p> <p>Can this be done?</p>
<p>You can do:</p> <pre><code>function test(js) { setTimeout(js, 1000); //Execute in 1 second } </code></pre>
<p>It is possible if you do something like this as an example:</p> <pre><code>function foo(){ alert('foo'); } function bar(fn){ fn(); } bar(foo); // alerts 'foo' </code></pre>
<p><a href="http://www.w3schools.com/jsref/jsref_eval.asp" rel="nofollow noreferrer"><code>eval()</code></a> is what you <em>may</em> want.</p>
<p>I think you're looking for <a href="https://developer.mozilla.org/En/Core_JavaScript_1.5_Reference/Global_Functions/Eval" rel="nofollow noreferrer"><code>eval()</code></a>, but what you should be looking for is <a href="http://www.json.org/" rel="nofollow noreferrer">json</a>.</p>
<p>You can do this with <code>eval()</code>: <a href="http://www.w3schools.com/jsref/jsref_eval.asp" rel="nofollow noreferrer">http://www.w3schools.com/jsref/jsref_eval.asp</a></p> <p>However, be careful that you don't expose yourself to the security issues.</p> <p><a href="http://stackoverflow.com/questions/86513/why-is-using-javascript-eval-function-a-bad-idea">Why is using the JavaScript eval function a bad idea?</a></p>
<p>This is what <code>eval</code> is for:</p> <pre><code>test("a = 1; b = 2; test2(a,b);"); function test(js) { eval(js); } </code></pre> <p>Cue the onslaught of "eval is evil" comments.</p>
<p>You can use <a href="http://www.w3schools.com/jsref/jsref_eval.asp" rel="nofollow noreferrer">eval()</a> for this.</p>
<p>In stead of using <code>eval</code>, you could create a function from the parameter string like this</p> <pre><code>test("a = 1; b = 2; test2(a,b);"); function test(js) { var fn = new Function(js); // execute you new function [fn] here. } </code></pre>