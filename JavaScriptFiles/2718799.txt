Unable to `submit()` an html form after intercepting the submit with javascript
<p>I'm trying to intercept the submission of a form in order to change the value of my <code>keywords</code> label. </p> <p>I have the following code:</p> <pre><code>&lt;HTML&gt; &lt;FORM name="searchForm" method="get" action="tmp.html" &gt; &lt;input type="text" name="keywords" /&gt; &lt;input type="button" name="submit" value="submit" onclick="formIntercept();"/&gt; &lt;/FORM&gt; &lt;SCRIPT language="JavaScript"&gt; document.searchForm.keywords.focus(); function formIntercept( ) { var f = document.forms['searchForm']; f.keywords.value = 'boo'; f.submit(); }; &lt;/SCRIPT&gt; &lt;/HTML&gt; </code></pre> <p>When I run this in chrome and click the submit button the keywords label changes to <code>boo</code>, but the javascript console says:</p> <pre><code> Uncaught TypeError: Property 'submit' of object &lt;#an HtmlFormElement&gt; is not a function. </code></pre> <p>How can I submit the form with the manipulated keywords?</p>
<pre><code>&lt;html&gt; &lt;head&gt;&lt;/head&gt; &lt;body&gt; &lt;form name="searchForm" method="get" action="tmp.html" onsubmit="formIntercept(this);"&gt; &lt;input type="text" name="keywords" /&gt; &lt;input type="submit" name="submit" value="submit"/&gt; &lt;/form&gt; &lt;script type="text/javascript"&gt; document.searchForm.keywords.focus(); function formIntercept( form ) { form.keywords.value = 'boo'; //form.submit(); } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; </code></pre>
<p>The reason for the error when trying to call <code>form.submit()</code> is that your submit button is called "submit". This means that the "submit" property of your Form object is now a reference to the submit button, overriding the "submit" method of the form's prototype.</p> <p>Renaming the submit button would allow you to call the <code>submit()</code> method without error.</p>
<p>See jQuery <a href="http://api.jquery.com/submit/" rel="nofollow">.submit()</a>.</p> <pre><code>$("form").submit( function() { // TODO tweak your form data before it gets sent }); </code></pre>
<p>The problem is that when some element is <code>&lt;input type="submit" name="submit" /&gt;</code> submit() method will not work. The best solution to this situation is to change the name of that submit type input to something else for example button-submit etc.</p>
<p>Just change the name of submit button and it'll work!</p>
<p><strong>Chris Butler</strong> explained the issue well.</p> <p>You can use a native <strong>submit</strong> method of HTMLFormElement to work around a problem. In your case:</p> <pre><code>function formIntercept( ) { var f = document.forms['searchForm']; f.keywords.value = 'boo'; HTMLFormElement.prototype.submit.call(f); }; </code></pre>
<p>found this very helpful, error was caused by another element in the form with name=submit after renaming the <code>document.getElementById('myform').submit()</code> worked</p>