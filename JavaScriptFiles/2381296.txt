How do I make this link work in javascript
<p>Ok basically I have this javascript file <a href="http://assets.revback.com/scripts/share1.js" rel="nofollow noreferrer">http://assets.revback.com/scripts/share1.js</a> that basically adds a bunch of share buttons via javascript.</p> <p>What I want to do, is change the twitter image link to use an url shortener: </p> <p>so instead of:</p> <pre><code>&lt;a href=\"http:\/\/twitter.com\/home?status=Interesting Post:(UURRLL)\" title=\"Click to share this page on Twitter\"&gt;&lt;img src=\"http:\/\/assets.revback.com\/scripts\/images\/twitter.png\" border=\"0\"\/&gt;&lt;\/a&gt; </code></pre> <p>I want to use </p> <pre><code>&lt;a href="#" onClick="window.location='http://ko.ly?action=shorten&amp;uri=' + window.location + '&amp;dest=twitter.com/?status=Reading ';"&gt;&lt;img src=http://assets.revback.com/scripts/images/twitter.png"&gt;&lt;\/a&gt; </code></pre> <p>but I need that bottom one, to be written with javascript friendly syntax. i.e. like in the top one, instead of http://, you have http://</p>
<p>Try this</p> <pre><code>&lt;a href="#" onClick="window.location='http://site.com?action=shorten&amp;uri='+ window.location + '&amp;dest=twitter.com/?status=Reading;'"&gt;tweet this&lt;/a&gt; </code></pre>
<p>Change the <code>href</code> of the link in the <code>onclick</code> attribute:</p> <pre><code>&lt;a href="#" onclick="this.href='http://site.com?action=shorten&amp;uri=' + window.location + '&amp;dest=twitter.com/?status=Reading';"&gt;tweet this&lt;/a&gt; </code></pre> <p>The <strong>default action</strong> (going to the page designated by the <code>href</code> attribute) will always still be executed unless the event handler <code>onclick</code> receives a return value of <code>false</code>. So, changing the <code>href</code> before it happens will cause it to go to the page you want it to as long as you don't return false.</p>
<p>&lt;a href="#" onClick="window.location='<a href="http://site.com?action=shorten&amp;uri=" rel="nofollow noreferrer">http://site.com?action=shorten&amp;uri=</a>' + window.location.href + '&amp;dest=twitter.com/?status=Reading ';return false;">tweet this</p>
<p>Lose the <code>onclick</code>. There is no benefit to it whatsoever, since it just acts like a normal link (except much more broken). Now you don't have to worry about escaping JavaScript inside JavaScript and the consequent <code>\\\\\\\\</code> madness.</p> <pre><code>var buttonhtml= ( '&lt;a href="http://ko.ly?action=shorten&amp;amp;uri='+encodeURIComponent(location.href)+'&amp;amp;dest=twitter.com/?status=Reading"&gt;'+ '&lt;img src=http://assets.revback.com/scripts/images/twitter.png"&gt;'+ '&lt;/a&gt;' ); </code></pre> <p>(Note that the <code>encodeURIComponent</code>, which is essential to correctly inserting your current URL into another URL without breaking, is also protecting you from HTML-injection, since <code>&lt;</code> and <code>&amp;</code> characters get <code>%</code>-encoded. Without that safeguard, any page that includes your script has cross-site-scripting vulnerabilities.)</p> <p>Better still, lose the HTML string-slinging altogether and use DOM methods to create your content. Then you don't need to worry about <code>&amp;amp;</code> and other HTML escapes, and you don't have to hack your HTML together with crude, unreliable string replacing. You seem to be using jQuery, so:</p> <pre><code>var link= $('&lt;a&gt;', {href:'http://ko.ly?action=shorten&amp;uri='+encodeURIComponent(location.href)+'&amp;dest=twitter.com/?status=Reading'}); link.append('&lt;img&gt;', {src: 'http://assets.revback.com/scripts/images/twitter.png'}); link.appendTo(mydiv); </code></pre> <p>ETA: I'd replace the whole markuppy mess with a loop and the data broken out into a lookup. ie. something like:</p> <pre><code>(function() { var u= encodeURIComponent(location.href); var t= encodeURIComponent(document.title); var services= { Facebook: 'http://www.facebook.com/sharer.php?u='+u, Twitter: 'http://ko.ly?action=shorten&amp;uri='+u+'&amp;dest=twitter.com/?status=Reading', StumbleUpon: 'http://www.stumbleupon.com\/submit?url='+u+'&amp;title='+t, // several more }; var share= $('&lt;div class="ea_share"&gt;&lt;h4&gt;Share this with others!&lt;/h4&gt;&lt;/div&gt;'); for (var s in services) { share.append($('&lt;a&gt;').attr('href', services[s]).attr('title', 'Click to share this on '+s).append( $('&lt;img&gt;').attr('src', 'http://assets.styleguidence.com/scripts/images/'+s.toLowerCase()+'.png') )); } $('#question .vt').append(share); })(); </code></pre>