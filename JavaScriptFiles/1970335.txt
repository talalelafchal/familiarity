Best Performance Javascript on IE6 for finding top and left using offsetTop and offsetLeft
<p>I want to get the top and left values for a div on the screen.</p> <p>I have been using the code to calculate the top and left values.</p> <pre><code>var total1 = 0; var total2 = 0; while(element){ total1+=element.offsetTop; total2+=element.offsetLeft; try{ element=element.offsetParent; }catch(E){ break; } } </code></pre> <p>For the same DOM TREE this code is giving a performance reading of 30msec in IE8 and 80 to 200msec in IE6. I want to gain a considerable performance improvement in IE6.</p> <p>I am open to all ideas. </p> <p>By the way I also tried</p> <pre><code> var total1 = 0; var total2 = 0; do{ total1+=element.offsetTop; total2+=element.offsetLeft; }while(element=element.offsetParent); </code></pre> <p>after reading a blog entry or two. The performace is similar. </p> <p>I found that the bulk of the time is always spent in getting property value rather than parsing the DOM TREE which less constantly from my logs.(I might be wrong)</p> <p>Also the code I have put here is on the fly....might have made mistakes.</p> <p>Am looking at performance gain. The floor is open to try anything only constraint is just javascript, jquery, prototype etc are not an option.</p> <p>Thanks in advance!! :)</p>
<p>I seriously doubt you will be able to come up with anything faster than jQuery's offset calculations. IE6 is painfully slow and only so much can be done to improve it.</p> <p>Consider reading <a href="http://github.com/jquery/jquery/blob/master/src/offset.js" rel="nofollow noreferrer">jQuery's implementation</a> and including/porting it stand-alone.</p>
<p>I recommend you ask this question on <a href="http://groups.google.com/group/comp.lang.javascript" rel="nofollow noreferrer">comp.lang.javascript</a>. Also you might post there why you are finding this to be a performance problem. If this calculation is being repeated there may be a way to avoid the repeat calculation.</p>