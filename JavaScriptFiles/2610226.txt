how to construct a long string
<p>I need to construct a long string with javascript. Thats how i tried to do it:</p> <pre><code>var html = '&lt;div style="balbalblaba"&gt;&amp;nbsp;&lt;/div&gt;'; for(i = 1; i &lt;= 400; i++){ html+=html; }; </code></pre> <p>When i execute that in firefox its taking ages or makes it crash. what is the best way to do that? What is generally the best way to construct big strings in JS.</p> <p>can someone help me?</p>
<p>I assume you mean <code>html += html;</code>.</p> <p>If you do that, your <code>html</code> string's length will be 37 &times; 2<sup>400</sup> = 9.5 &times; 10<sup>121</sup> which is beyond the limit of any browsers, on any computers, in any<sup>[1]</sup> known universes can handle.</p> <p>If you just want to repeat that string 400 times, use</p> <pre><code>var res = ""; for (var i = 0; i &lt; 400; ++ i) res += html; return res; </code></pre> <p>or </p> <pre><code>var res = []; for (var i = 0; i &lt; 400; ++ i) res.push(html); return res.join(""); </code></pre> <p>See <a href="http://stackoverflow.com/questions/202605/repeat-string-javascript">Repeat String - Javascript</a> for more options.</p> <hr> <p><sup>[1]: As in "this universe".</sup></p>
<pre><code>var src = '&lt;div style="balbalblaba"&gt;&amp;nbsp;&lt;/div&gt;'; var html = ''; for(i = 1; i &lt;= 400; i++){ html=+src; }; </code></pre> <p>Your code is doubling the string 400 times.</p>
<p>Another way to do it is by create an <code>Array</code> of stings then using <code>Array.join('')</code>. This is effectively the Python way of building strings, but it should work for JavaScript as well.</p>
<p>String concatenation is very slow in some browsers (<em>cough</em>IE6*cough*). Joining an array should be much quicker than looping with concatenation:</p> <pre><code>var arr = new Array(401); var html = arr.join('&lt;div style="balbalblaba"&gt;&amp;nbsp;&lt;/div&gt;'); </code></pre>