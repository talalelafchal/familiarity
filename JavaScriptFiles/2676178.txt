joining relative urls?
<p>So i want to join strings with relative urls in Javascript.</p> <p>base url = "<a href="http://www.adress.com/more/evenmore" rel="nofollow noreferrer">http://www.adress.com/more/evenmore</a>"</p> <p>with</p> <p>relative url = "../../adress" => "<a href="http://www.adress.com/adress" rel="nofollow noreferrer">http://www.adress.com/adress</a>"<br> relative url = "../adress" => "<a href="http://www.adress.com/more/adress" rel="nofollow noreferrer">http://www.adress.com/more/adress</a>"</p> <p>What would be the best way? I was thinking of using regexp and checking<br> how many "../" i find, then subtracting that amount from the baseurl and adding them to what is left.</p>
<p>The following function decomposes the URL then resolves it.</p> <pre><code>function concatAndResolveUrl(url, concat) { var url1 = url.split('/'); var url2 = concat.split('/'); var url3 = [ ]; for (var i = 0, l = url1.length; i &lt; l; i ++) { if (url1[i] == '..') { url3.pop(); } else if (url1[i] == '.') { continue; } else { url3.push(url1[i]); } } for (var i = 0, l = url2.length; i &lt; l; i ++) { if (url2[i] == '..') { url3.pop(); } else if (url2[i] == '.') { continue; } else { url3.push(url2[i]); } } return url3.join('/'); } </code></pre>
<p>Using URI.js (http://medialize.github.com/URI.js/docs.html#absoluteto):</p> <pre><code>function joinUrl(baseUrl, url) { var theUrl = new URI(url); if (theUrl.is("relative")) { theUrl = theUrl.absoluteTo(baseUrl); } return theUrl.toString(); } </code></pre>