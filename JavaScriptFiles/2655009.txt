Javascript childNodes does not find all children of a div when appendchild has been used
<p>Alright, I am hoping someone can help me out. I apologize up front that this one may be confusing. I have included an example to try to help ease the confusion as this is better seen then heard.</p> <p>I have created a webpage that contains a group or set of groups. Each group has a subgroup. In a nutshell what is happening is this page will allow me to combine multiple groups containing subgroups into a new group. The page will give the chance to rename the old subgroups before they are combined into new groups in order to avoid confusion. </p> <p>When a group is renamed it will check to make sure there is not already a group with that name. If there is it will copy itself out of it's own group and into that group and then delete the original. If the group does not already exist it will create that group, copy itself in and then delete the original.</p> <p>Subgroups can also be renamed at which point they will move into the group with the same name if it exists, or create a new one if it doesn't.</p> <p>The page has a main div. The main div contains 'new sub group' divs. Inside each of those is another div containing the 'old sub group' divs. I use a loop through the child nodes of the 'new sub group' div when renaming a group in order to find each child node. These are then copied into a new div within the main div.</p> <p>The crux of the problem is this. If I loop through a DIV and copy all of the DIVs in it into a new or existing DIV all is well. When I then try to take that DIV and copy all of it's DIVs into another or new DIV it always skips one of the moved DIVs.</p> <p>For simplicity I have copied the entire working code below. To recreate the issue click the spot where the image should appear next to the name ewrewrwe and rename it to something else. All is well. Now click that new group the same way and name it something else. You will see it skip one each time. </p> <p>I have linked the page here: <a href="http://vtbikenight.com/test.html" rel="nofollow noreferrer">http://vtbikenight.com/test.html</a> </p> <p>The link is clean, it is my personal website I use for a local motorycle group I am part of.</p> <p>Thanks for the help everyone!!! Please let me know if I can clarify on anything. </p> <p>I know the code is not the best right now, it is just demo code and my intent is to get the concept working then streamline it all.</p>
<p>Well in the loop, you have a counter that you increment, <strong>and</strong> you're yanking nodes out of the list. That is, <code>obj.childNodes.length</code> will <em>change</em> whenever you pull something out of the container.</p>
<p>You need to decrement count after you remove the node, otherwise you skip over the node that just took the place of the removed node.</p> <pre><code> for ( var count = 0; count &lt; obj.childNodes.length; count++ ) { if(obj.childNodes[count].tagName == 'DIV'){ //alert(obj.childNodes[count].tagName +" - "+obj.childNodes[count].id); RenameOldSubGroup(obj.childNodes[count].id,NewNewGroupName) count--; // Decrement count to account for node you removed } } </code></pre>