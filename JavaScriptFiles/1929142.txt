quick javascript function help
<p>I have this function, and I want to pass a variable (z) to the OnClick event of an image.</p> <p>I have this:</p> <pre><code>for (z=1; z&lt;img_src.length; z++){ path_th_img= 'ad_images/'+category+'/'+'thumbs/'+img_src[z]; document.getElementById("thumb_pic_div").innerHTML += "&lt;img src='"+path_th_img+"' class='shadow2' style='margin:7px;' onclick='imageShow(z);'&gt;"; } </code></pre> <p>img_src.lengt is in this case 4... So no matter which of the three images I click, the nr 4 gets passed on... ideas?</p> <p>Thanks</p>
<p>you have to pass the value of z in your string</p> <pre><code>for (z=1; z&lt;img_src.length; z++) { path_th_img= 'ad_images/'+category+'/'+'thumbs/'+img_src[z]; document.getElementById("thumb_pic_div").innerHTML += "&lt;img src='"+path_th_img+"' class='shadow2' style='margin:7px;' onclick='imageShow("+z+");'&gt;"; } </code></pre>
<p>Shouldn't this:</p> <pre><code>onclick='imageShow(z);' </code></pre> <p>be something like this:</p> <pre><code>onclick='imageShow(' + z + ');' </code></pre>
<p>Try changing this line...</p> <pre><code>document.getElementById("thumb_pic_div").innerHTML += "&lt;img src='"+path_th_img+"' class='shadow2' style='margin:7px;' onclick='imageShow(z);'&gt;"; </code></pre> <p>To this...</p> <pre><code>document.getElementById("thumb_pic_div").innerHTML += "&lt;img src='"+path_th_img+"' class='shadow2' style='margin:7px;' onclick='imageShow("+z+");'&gt;"; </code></pre>
<p>Use the DOM, <em>properly</em>.</p> <pre><code>for (var z = 1, l = img_src.length; z &lt; l; ++z) { var new_img = document.createElement('img'); new_img.src = 'ad_images/' + category+'/' + 'thumbs/' + img_src[z]; new_img.onclick = (function(z){ return function() { imageShow(z); }; })(z); new_img.style.margin = '7px'; document.getElementById("thumb_pic_div").appendChild(new_img); } </code></pre>