Calendar Class in Javascript - unable to keep the reference.
<p>I wrote a datepicker in Javascript, but it is not working properly,</p> <p>as I lose the reference to the Calendar object.</p> <p>here is the example</p> <p><a href="http://asexpress.de/calendar/" rel="nofollow noreferrer">http://asexpress.de/calendar/</a></p> <p>by clicking within the input field the calendar will be displayed.</p> <p>What should I do that the reference to the Calendar object remains in contact.</p>
<p>From what I can tell so far of your script, the following code block:</p> <pre><code>Kalender.prototype.writeMonth = function() { var that = this; </code></pre> <p>contains some code further down:</p> <pre><code> else if ( this.isToday(displayNum, length) &amp;&amp; this.isLink(displayNum, length) ) { sbuffer.push('&lt;td class="date" onClick="that.changeDate(this,\'' + this.id + '\'); that.returnDate('+ this.month +','+ this.year+')"&gt;' + displayNum + '&lt;/td&gt;'); } </code></pre> <p>This would cause a problem, since the <code>that</code> variable is declared within the scope of this function and the onclick event will fire outside of the scope. IMO, building the HTML isn't the best method here. It would be best to build the table cells using the DOM and add event handlers that are inside the scope of the function. This happens a few times.</p> <p>FYI, you're using <code>eval()</code> rather unnecessarily in your code:</p> <pre><code>this.months = eval("config.language."+ this.options['language'] +".months"); // Can also be written as: this.months = config.language[this.options['language']].months; </code></pre> <p>See <a href="http://blogs.msdn.com/ericlippert/archive/2003/11/01/53329.aspx" rel="nofollow noreferrer">Eval is Evil</a> for more information.</p> <p><strong>Further Reading</strong></p> <p><a href="http://msdn.microsoft.com/en-us/library/ms532998(VS.85).aspx" rel="nofollow noreferrer">MSDN - Building Tables Dynamically</a><br> <a href="https://developer.mozilla.org/en/Traversing_an_HTML_table_with_JavaScript_and_DOM_Interfaces" rel="nofollow noreferrer">MDC - Traversing an HTML table with JavaScript and DOM Interfaces</a><br> <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Closures" rel="nofollow noreferrer">MDC - Working with Closures</a> </p>
<p>You should declare the variable which holds datepicker object globally.</p> <pre><code>var kalender; var kalender2; function reisedate(d) { document.getElementById("abc").value = d.getDate() + "/" + parseInt(d.getMonth()+1) + "/" + d.getFullYear(); } // rest of the code </code></pre> <p>Take a look at first two lines.</p>