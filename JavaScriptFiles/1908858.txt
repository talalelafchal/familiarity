Is it possible to detect text selection from a search with Ctrl+F?
<p>How can I detect text selection from a text search using the browsers Ctrl+F.</p> <p>For example, I want to make a FAQ, where are the items are closed (to remove clutter), and clicking them opens the text within them, but at the same time I don't want Ctrl+F to be broken.</p> <p>So I'm thinking, is there a way for JavaScript to detect that I have searched for some text within a non visible (but selectable) block of text, and to automatically open it.</p> <p>Is it even possible to detect text selection from a search with Ctrl+F? If so, how?</p> <p>A more specific example: I have a div with the id of "one" and a div with the id of "two" both have their own text:</p> <pre><code>&lt;div id="one"&gt;Google is a search engine&lt;/div&gt; &lt;div id="two"&gt;Stackoverflow users are very informative&lt;/div&gt; </code></pre> <p>both have their text hidden from view but still selectable, but not by mouse (using margins or covering)</p> <p>So a user searches for "Stackoverflow" on this page, I want to trigger a JavaScript function upon the search selection (how??), and I need the function that runs to know which div, with what ID has some text selected.</p>
<p>As far as I know, there is no way. The content of the search field entirely under the control of the browser, and you can't access this from within the page.</p> <p>What you might be able to do however, is detect a selection in the document and react to that. This will however probably produce many false positives (because you can't distinguish between an ordinary selection and a search), and it won't work with browsers that do not use an ordinary selection to highlight search results.</p> <p>More info on detecting selections: <a href="http://www.quirksmode.org/dom/range_intro.html" rel="nofollow noreferrer">Introduction to Range on Quirksmode</a></p>
<p>This is browser dependent. In Chrome (maybe Webkit in general?), it seems to use a selection that is separate from the one in the DOM API.</p> <p>However, Firefox will use the DOM selection when highlighting text from a Ctrl+F.</p> <p>For example, go to google.com, and type this in Firebug:</p> <p><code>window.getSelection().toString()</code></p> <p>This will return <code>""</code></p> <p>Now do a Ctrl+F, type in Privacy, press enter.</p> <p>Enter the above command again in Firebug, and you will get:</p> <p><code>"Privacy"</code></p>
<p>Why not make the FAQ search friendly and use a service for that. <a href="http://www.google.com/cse/" rel="nofollow noreferrer">Google Custom Search Engine</a> might be a good place to start.</p>