JavaScript not working in Firefox
<p>Hi ' im having a problem with my script in firefox, i'm getting the fault , " window.event is undefined " , where seems to be the problem? </p> <pre><code>&lt;script language="JavaScript1.2"&gt; function formattel(){ var value = document.formkkush.telefoon.value; var valueLen = document.formkkush.telefoon.value.length; if(valueLen&gt;2 &amp;&amp; valueLen&lt;4) { if(window.event.keyCode==8) document.formkkush.telefoon.value=document.formkkush.telefoon.value.remove(valueLen-1,1); else document.formkkush.telefoon.value=document.formkkush.telefoon.value+"/"; } if(valueLen&gt;5 &amp;&amp; valueLen&lt;7) { if(window.event.keyCode==8) document.formkkush.telefoon.value=document.formkkush.telefoon.value.remove(valueLen-1,1); else document.formkkush.telefoon.value=document.formkkush.telefoon.value+"."; } if(valueLen&gt;8 &amp;&amp; valueLen&lt;10) { if(window.event.keyCode==8) document.formkkush.telefoon.value=document.formkkush.telefoon.value.remove(valueLen-1,1); else document.formkkush.telefoon.value=document.formkkush.telefoon.value+"."; } } </code></pre>
<p>Seems like many faced this issue. Did you <a href="http://www.dotnetspider.com/forum/187373-How-Get-window-event-for-Firefox-browser.aspx" rel="nofollow noreferrer">check this post</a>?</p>
<p>The global event object isn't created in Firefox. It's instead passed as the first argument in the event handler's function.</p> <pre><code>function formattel(eventObj){ var value = document.formkkush.telefoon.value; var valueLen = document.formkkush.telefoon.value.length; // Make sure we have the even object no matter which browser we're running on eventObj = eventObj || window.event; if(valueLen&gt;2 &amp;&amp; valueLen&lt;4) { if(eventObj.keyCode==8) document.formkkush.telefoon.value=document.formkkush.telefoon.value.remove(valueLen-1,1); else document.formkkush.telefoon.value=document.formkkush.telefoon.value+"/"; } // etc... } </code></pre> <p>See the Mozilla documentation for <a href="https://developer.mozilla.org/en/DOM/event" rel="nofollow noreferrer">event</a>.</p> <p>As a completely unrelated suggestion, you should try and lessen the number of DOM node lookups by setting repeated lookups to a variable. It makes your code faster and much more presentable:</p> <pre><code>function formattel(eventObj){ var telefoon = document.formkkush.telefoon; var value = telefoon.value; var valueLen = value.length; // Make sure we have the even object no matter which browser we're running on eventObj = eventObj || window.event; if(valueLen&gt;2 &amp;&amp; valueLen&lt;4) { if(eventObj.keyCode==8) telefoon.value = telefoon.value.remove(valueLen-1,1); else telefoon.value += "/"; } // etc... } </code></pre> <p>Don't forget about assignment operators (such as <code>+=</code>) too! </p>