Positioning div above image dynamically via mouseover
<p>I want to display div above image so that div's top is aligned with cursor.<br> As cursor is moved, the div should be moved as well (right now just vertically).<br> In IE (<strong>pure javascript please</strong>).</p> <pre><code>&lt;head runat="server"&gt; &lt;title&gt;&lt;/title&gt; &lt;style type="text/css"&gt; #ToolTip{position:absolute; width: 200px;background-color:Lime; top: 0px; left: 0px; z-index:400;visibility:hidden;} &lt;/style&gt; &lt;script language="javascript" type="text/javascript"&gt; function On() { MoveToolTip("ToolTip", "event.y", "event.x"); document.getElementById('ToolTip').style.visibility = 'visible'; } function Off() { MoveToolTip("ToolTip", 0, 0); document.getElementById('ToolTip').style.visibility = 'hidden'; } function MoveToolTip(layerName, top, left) { document.getElementById(layerName).style.top = (eval(top)); //document.getElementById(layerName).style.left = (eval(left) - 360); } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;form id="form1" runat="server"&gt; &lt;div&gt; &lt;div id="ToolTip" &gt;This is a test &lt;/div&gt; &lt;a href="www.www.com"&gt;&lt;img alt="mg" border="0" src="http://www.google.com/logos/holiday09_4.gif" onmouseout="Off();" onmouseover="On();" /&gt;&lt;/a&gt; &lt;/div&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt; </code></pre>
<p>You can easily achieve something like this using jQuery and the plugin <a href="http://craigsworks.com/projects/qtip/" rel="nofollow noreferrer">qTip</a></p> <p>Edit: The problem with the javascript code is that you are not referencing actual screen positions in your move function, just text. You'll have to get the actual position of the cursor in the on/off function as pass it as a number to the move function.</p>
<p>You might want to optimize this to avoid flickering.</p> <p><div class="snippet" data-lang="js" data-hide="false" data-console="false" data-babel="false"> <div class="snippet-code"> <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;html&gt; &lt;head&gt; &lt;style type="text/css" media="screen"&gt; #ToolTip { position: absolute; visibility: hidden; padding: 5px; background-color: red; } &lt;/style&gt; &lt;script type="text/javascript" charset="utf-8"&gt; function Move(e) { MoveToolTip("ToolTip", e.x, e.y); } function On(e) { MoveToolTip("ToolTip", e.x, e.y); document.getElementById("theImage").onmousemove = Move; document.getElementById("ToolTip").style.visibility = 'visible'; } function Off(e) { document.getElementById("theImage").onmousemove = null; document.getElementById("ToolTip").style.visibility = 'hidden'; } function MoveToolTip(layerName, x, y) { document.getElementById(layerName).style.left = x + 'px'; document.getElementById(layerName).style.top = y + 'px'; } function init() { document.getElementById("theImage").onmouseover = On; document.getElementById("theImage").onmouseout = Off; } &lt;/script&gt; &lt;/head&gt; &lt;body onload="init();"&gt; &lt;div&gt; &lt;div id="ToolTip"&gt;This is a test&lt;/div&gt; &lt;a href="www.www.com"&gt;&lt;img id="theImage" alt="mg" border="0" src="http://www.google.com/logos/holiday09_4.gif" /&gt;&lt;/a&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;</code></pre> </div> </div> </p>
<p>Here's a possible fix for your problem:</p> <pre><code>&lt;html&gt; &lt;head runat="server"&gt; &lt;title&gt;&lt;/title&gt; &lt;style type="text/css"&gt; #ToolTip { position:absolute; width: 200px; background-color:Lime; z-index:400; visibility:hidden; cursor: pointer; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;form id="form1" runat="server"&gt; &lt;div&gt; &lt;div id="ToolTip"&gt;This is a test&lt;/div&gt; &lt;a href="www.www.com"&gt; &lt;img alt="mg" id="base-img" border="0" src="http://www.google.com/logos/holiday09_4.gif" /&gt; &lt;/a&gt; &lt;/div&gt; &lt;/form&gt; &lt;script language="javascript" type="text/javascript"&gt; function showToolTip(e) { e = e || window.event; // Older versions of IE handle events funny // Added code that compensates for the window's scroll position. var top = e.clientY + (window.pageYOffset || document.body.scrollTop) + 5; moveToolTip("ToolTip", top, e.clientX); document.getElementById('ToolTip').style.visibility = 'visible'; // We need to cancel the center to ensure that the onmousemove event // on the body element doesn't get triggered e.cancelBubble = true; if (e.stopPropagation) { e.stopPropagation(); } return false; } function hideToolTip() { moveToolTip("ToolTip", 0, 0); document.getElementById('ToolTip').style.visibility = 'hidden'; return false; } function moveToolTip(layerName, top, left) { document.getElementById(layerName).style.top = (top + "px"); } document.onmousemove = hideToolTip; document.getElementById("ToolTip").onmousemove = showToolTip; document.getElementById("base-img").onmousemove = showToolTip; &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; </code></pre> <p>Things I changed:</p> <ul> <li>Gave functions more readable names: <ul> <li>Renamed <code>On</code> to <code>showToolTip</code></li> <li>Renamed <code>Off</code> to <code>hideToolTip</code></li> </ul></li> <li>The <code>event</code> variable is now passed to the <code>showToolTip</code> function. This is needed to get the cursor's x, y position</li> <li>Added code that compensated for the window's scroll position</li> <li>Added <code>return false</code> to <code>showToolTip</code> and <code>hideToolTip</code></li> <li>Replaced <code>onmouseout</code> and <code>onmouseover</code> with the more widely supported <code>onmousemove</code> event</li> <li>Got rid of the flicker by adding the following: <ul> <li>Added <code>onmousemove</code> event to document, which calls <code>hideToolTip</code></li> <li>Added <code>onmousemove</code> event to the tool tip div, which calls <code>showToolTip</code></li> </ul></li> <li>Added <code>+ "px"</code> statement to the <code>.style.top</code> assignment. Some browsers get confuse if you assign an integer to a style.</li> <li>Moved script declarations to the bottom of the page.</li> <li>Moved event assignments to javascript and removed <code>onmousemove</code> attributes from the markup</li> <li>Added the <code>cursor: pointer</code> style to the tool tip. This removes cursor flicker.</li> <li>Changed code format</li> </ul> <p>I've also posted a working example: <a href="http://www.the-xavi.com/static/so-hover-div.html" rel="nofollow noreferrer">http://www.the-xavi.com/static/so-hover-div.html</a></p> <p>Hope this helps.</p>