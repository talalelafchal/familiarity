Javascript cast from object to function
<p>Suppose I have a javascript function of the form:</p> <pre><code>function(){alert("blah");} </code></pre> <p>Suppose I also have an applet, which has a method called doStuff that takes the function as a parameter:</p> <pre><code>MyApplet.doStuff(function(){alert("blah");}); </code></pre> <p>Now suppose that the applet passes the function to a success or failure javascript callback function depending on the result of its calculations. In that callback function, I want to execute the function so that the user gets my exceedingly informative "blah" message:</p> <pre><code>function callback(func) { func(); } </code></pre> <p>However, in the example above, func is no longer considered to be of type "function" (typeof func will return "object"). Is it possible to convert func to be a function so that it can be executed? I have a number of hacks in mind that can give me what I want, but they are very ugly and I was hoping that I was missing something simple.</p> <p>Any help is greatly appreciated.</p>
<p>Try func.call()</p>
<p>Using the same style code as you already have, the following should alert "called!":</p> <pre><code>function callback(func){ func(); } callback(function(){ alert("called!"); }); </code></pre> <p>Is MyApplet.doStuff(function(){alert("blah");}); definitely passing its argument to the callback function unchanged?</p>
<p>I opted to go for a different solution that isn't as ugly as I imagined it would be. The JSObject.call() java method converts all the callback function parameters to plain jane objects. So instead of passing:</p> <pre><code>function(){alert("blah")} </code></pre> <p>I now pass:</p> <pre><code>alert("blah") </code></pre> <p>or after some annoying escaping:</p> <pre><code>''alert(\''blah\'');'' </code></pre> <p>Not so terrible eh? Many thanks to everyone that offered their help, it is appreciated. But, just out of curiosity, does anyone know off the top of their head if it's possible to pass something from java to a javascript function via JSObject so that it retains its "function" type?</p>