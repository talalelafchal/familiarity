Rewriting HTML code using javascript
<p>I have some markup here that I need to reformat using javascript. Basically, I have this code:</p> <pre><code> &lt;div id="images"&gt; &lt;img src="01.jpg"&gt; &lt;img src="02.jpg"&gt; &lt;img src="03.jpg"&gt; &lt;img src="04.jpg"&gt; &lt;a id="src" href="01.jpg"&gt;&lt;/a&gt; &lt;a id="src" href="02.jpg"&gt;&lt;/a&gt; &lt;a id="src" href="03.jpg"&gt;&lt;/a&gt; &lt;a id="src" href="04.jpg"&gt;&lt;/a&gt; &lt;/div&gt; </code></pre> <p>and I want javascript to rewrite the code so that the images are placed inside the anchors. Like this:</p> <pre><code> &lt;div id="images"&gt; &lt;a id="src" href="01.jpg"&gt;&lt;img src="01.jpg"&gt;&lt;/a&gt; &lt;a id="src" href="02.jpg"&gt;&lt;img src="02.jpg"&gt;&lt;/a&gt; &lt;a id="src" href="03.jpg"&gt;&lt;img src="03.jpg"&gt;&lt;/a&gt; &lt;a id="src" href="04.jpg"&gt;&lt;img src="04.jpg"&gt;&lt;/a&gt; &lt;/div&gt; </code></pre> <p>any ideas?</p>
<p>General strategy:</p> <ol> <li>Get a reference to the "images" div</li> <li>Create a temporary object to store images, e.g. <code>var imgs = {};</code></li> <li>Loop over all <code>img</code> elements within the div. For each element: <ul> <li>Add each element to <code>imgs</code>, using its <code>src</code> as the key</li> </ul></li> <li>Loop over all <code>a</code> elements within the div. For each element: <ol> <li>Lookup the image from <code>imgs</code> using the element's <code>href</code> attribute</li> <li>Remove the <code>img</code> from its current location, and re-insert it within the body of the <code>a</code>.</li> </ol></li> </ol>
<pre><code>&lt;script&gt; var div = window.document.getElementById("images"); var anchors = div.getElementsByTagName("A"); var imgs = div.getElementsByTagName("IMG"); for (var i = anchors.length - 1; i &gt;= 0; i--) { anchors[i].appendChild(imgs[i]); } &lt;/script&gt; </code></pre>