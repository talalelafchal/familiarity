Are there any reasons for why you would include JavaScript using document.writeln
<p>Are there any good reasons for why you would include JavaScript like this:</p> <pre><code>&lt;script type="text/javascript"&gt;document.writeln('&lt;script src="http://example.com/javascript/MyJavaScript.js" type="text/javascript"&gt;&lt;' + '/script&gt;');&lt;/script&gt; </code></pre> <p>(Sorry for the long scrolling line. This is in the <code>head</code> of a HTML document.)</p> <p>I've been looking at some HTML recently and I've noticed this a few times (all on the one site). I can't think of any reasons why you would do it like this, but I can hardly claim to be a web developer. It's likely that these lines of code are automatically generated, but still, someone somewhere must have thought this was a good idea.</p>
<p>You may need to dynamically include a javascript file based on some sort of client-side business logic.</p>
<p>The site requires the js to be loaded later after some delay or after page is loaded.</p>
<p>I wouldn't say there are any particular reasons. It is just one way of writing directly to the document.</p>
<p>This technique has been used to load external scripts in parallel, preserving the execution order.</p> <p>It has some drawbacks, for example, in IE and Opera, even if the scripts are loaded in parallel, other external resources like images, stylesheets, other frames, etc... are blocked from downloading until the scripts are loaded.</p> <p>But nowadays, I would recommend to include external scripts by DOM scripting, generating dynamically <code>script</code> elements, but you have to care about IE <a href="http://ajaxian.com/archives/dynamic-script-generation-and-memory-leaks" rel="nofollow noreferrer">memory leaks</a>.</p> <p>Check this <a href="http://stevesouders.com/hpws2/couple-doc-write.php" rel="nofollow noreferrer">test page</a> to see the behavior of your browser.</p>
<p>In some cases, the document.writeln method is used to obfuscate the source of the script, and/or break simplistic ad blockers that do simple string matching on the generated html:</p> <pre><code>document.writeln('&lt;' + 'sc' + 'r' + 'ip' + 't' + etc...) </code></pre> <p>and</p> <pre><code>document.writeln('&lt;script src="' + decode_obfuscated_url('encoded garbage here') + '"&gt;'); </code></pre>