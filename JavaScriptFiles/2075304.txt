how to modify the document selection in javascript?
<p>I wanna modify the document selection (user currently selected by mouse or keyboard), how to do it in a cross browser way?</p>
<p>I have not worked with text selection enough to provide real help, but what you are trying to do can be done. You will want to look into the following two functions:</p> <ol> <li><code>createRange()</code> <a href="http://msdn.microsoft.com/en-us/library/ms536394(VS.85).aspx" rel="nofollow noreferrer">MSDN</a> | <a href="https://developer.mozilla.org/en/DOM/document.createRange" rel="nofollow noreferrer">MDC</a></li> <li><code>getRangeAt()</code> <a href="https://developer.mozilla.org/en/DOM/Selection/getRangeAt" rel="nofollow noreferrer">MDC</a></li> </ol> <p>I know it can be implemented cross browser. You can see some of it in action here:</p> <p><a href="http://fuelyourcoding.com/a-few-strategies-for-using-javascript/" rel="nofollow noreferrer">http://fuelyourcoding.com/a-few-strategies-for-using-javascript/</a></p> <p>By scrolling to the bottom and clicking the Elephant Icon, which uses the Evernote script. However, my script first selects the main content area (you will see it flash orange) and then it deselects once the capture is made.</p> <p>Here is a mini jQuery plugin that does it. It was adapted by me from some site, and like the comments say, I feel horrible for not remembering. Its really important to note I adapted it to jQuery, but the code came from some site where they explained how to do it:</p> <pre><code>// Adapted this from somewhere. Feel horrible for not remembering. $.fn.autoSelect = function(){ var selectTarget = this[0]; // Select first element from jQuery collection if(selectTarget != null) { if(selectTarget.tagName == 'TEXTAREA' || (selectTarget.tagName == "INPUT" &amp;&amp; selectTarget.type == "text")) { selectTarget.select(); } else if(window.getSelection) { // FF, Safari, Opera var sel = window.getSelection(); var range = document.createRange(); range.selectNode(selectTarget); sel.removeAllRanges(); sel.addRange(range); } else { // IE document.selection.empty(); var range = document.body.createTextRange(); range.moveToElementText(selectTarget); range.select(); }; }; return this; // Don't break the chain }; </code></pre> <p><em>It seems this script is a few places online, but <a href="http://forum.depiak.catreloaded.net/viewtopic.php?f=7&amp;t=56" rel="nofollow noreferrer">here is another variation on it</a></em></p>
<p>As an example, and the easiest one, let's say you want to move the user's selection to contain the contents of an element. The following will work in all major browsers:</p> <pre><code>function selectElementContents(el) { var body = document.body, range, sel; if (body.createTextRange) { range = body.createTextRange(); range.moveToElementText(el); range.select(); } else if (document.createRange &amp;&amp; window.getSelection) { range = document.createRange(); range.selectNodeContents(el); sel = window.getSelection(); sel.removeAllRanges(); sel.addRange(range); } } selectElementContents( document.getElementById("someElement") ); </code></pre>