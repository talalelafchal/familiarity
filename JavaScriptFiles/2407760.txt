Variable declaration warning in VS2008
<p>The following code in VS2008 gives me a "variable is already defined" warning:</p> <pre><code>if (someVar) { var a = 1; } else { var a = 2; } </code></pre> <p>The warning is given on the second <code>var a = ...</code>. To cure this warning I have done:</p> <pre><code>var a; if (someVar) { a = 1; } else { a = 2; } </code></pre> <p>But is this the correct way to do it?</p> <p>Thanks,</p> <p>AJ</p>
<p>Yes, that is the correct way to do it. There is no block scope in javascript; there is only function scope and global scope.</p> <p>you could also give each "block" functional scope using anonymous functions, although it's not very practical in this case:</p> <pre><code>if (someVar) { (function () { var a = 1; })(); } else { (function () { var a = 2; })(); } </code></pre> <p>As a side note, this is also why <code>for (var i = 0; ...)</code> is discouraged in favor of <code>var&nbsp;i;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0;&nbsp;...)</code>, to avoid 2 consecutive loops in the same function both trying to declare the variable <code>i</code></p>
<p>It depends on how you're using those variables afterwards.</p> <p>If they relate to the same object, then it's the correct way.</p> <p>If they relate to different objects, then I'd rename the variables, as this would prevent maintenance issues in the future.</p>
<p>Either way is perfectly valid and fine (both examples ensure that the variable is declared with the <code>var</code> keyword), but generally it's best practice to declare your vars at the top of the current code block, as in your second example.</p>