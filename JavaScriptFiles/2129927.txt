save javascript function to mysql
<p>how do i save the output from javascript function to mysql??</p> <pre><code> var macs = { getMacAddress : function() { document.macaddressapplet.setSep( "-" ); return (document.macaddressapplet.getMacAddress()); } } document.write(macs.getMacAddress()); </code></pre> <p>someone told me to use ajax, but ive tried to figure out but cant get anything.. Anyone would be good to help me. thanks</p>
<pre><code>var mac = macs.getMacAddress(); // if using jQuery - really an AJAX library is very useful $.get('/send-mac.php?mac=' + mac, function() { alert('yeah done'); }) </code></pre> <p>Then in PHP you would do something like</p> <pre><code>mysql_query('INSERT INTO macs SET mac = ' . mysql_real_escape_string($_GET['mac'])); </code></pre> <p>Obviously you'll want some more error handling etc.</p>
<p>AJAX would be the way to do that. You can do this with vanilla Javascript but it's messy. Personally I always use a library for this with jQuery being my preferred choice. Then your code becomes:</p> <pre><code>&lt;input type="button" id="sendmac" value="Send MAC Address"&gt; </code></pre> <p>with:</p> <pre><code>$(function() { $("#sendmac").click(function() { document.macaddressapplet.setSep( "-" ); $.post("savemacaddress.php", { getMacAddress: document.macaddressapplet.getMacAddress() }); }); }); </code></pre> <p>savemacaddress.php:</p> <pre><code>&lt;?php $addr = $_POST['savemacaddress']; $addr = mysql_real_escape_string($addr); $sql = "INSERT INTO macaddress ('$addr')"; mysql_connect(...); mysql_query($sql); ?&gt; </code></pre> <p>assuming you're using PHP.</p>
<p>thanks for the prompt answer...</p> <p>I've placed the code at create_user.php</p> <pre><code>var mac = macs.getMacAddress(); $.get('/send-mac.php?mac=' + mac, function() { alert('yeah done'); }) </code></pre> <p>can you explain what, "$.get('/send-mac.php?mac=' + mac, function() { alert('yeah done'); })" means?</p> <p>and checkAvailability,</p> <pre><code>mysql_select_db($dbname); $sql_query = mysql_query("SELECT * from user WHERE UserID ='".$_POST['newUserID']."'"); mysql_query('INSERT INTO test SET mac = ' . mysql_real_escape_string($_GET['mac'])); </code></pre>