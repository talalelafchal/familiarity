Looping through siblings of a specific row/setting up function
<p>Trying to work through my javascript book I am referencing to learn the language and got stuck on looping through siblings of a specific row. W3schools and W3 didnt have what i was looking for. Below is a function walk-through...</p> <p>It reads: Create the countRecords() function. The purpose of this function is to count the number of visible rows in the data table after the table headings. The total is then displayed in the table cell with the id "records". Add the follow commands to the function:</p> <p>a. Create a object named headRow that points to the table row with the id "titleRow". Create a variable named rowCount, setting its initial value to 0.</p> <p>b. Create a for loop that uses familial references starting with the first sibling of headRow and moving to the next sibling until there are no siblings left. Within the for loop. test whether the node name of the currentnext sibling until there are no sibilings left. Within the for loop test whether the node name of the current node is equal to "TR". If it is, test wheter the value of its display style is equal to an empty text string. If it is (indicating that it is visible in the document) increate the value of the rowCount variable by 1.</p> <p>c. Change the text of the "records" table cell to the value of the rowCount variable. Don't use innerHTML. Create a text node that contains the value of the rowCount variable and assign it to a variable called txt. Create a variable called record to store the reference to the element "records" table cell.</p> <p>d. Insert an if condition that test whether the "records" cell has any child nodes. If it does, replace the replace the text node of the "record" table cell with the created text node (txt). If it doesn't append the text node to the cell.</p> <pre><code> var headRow; // part a var rowCount = 0; </code></pre> <p>//part b this is where I get lost. I know I need to access the id titleRow but unsure how to set my loop up specifically for this</p> <pre><code> headRow = document.getElementById("titleRow"); for(var i=0; i&lt;headrow.length; i++) { if (something is not equal == "TH") { make code happen here } if (is "TR" == ""){ rowCount = +1; } </code></pre> <p>//part c </p> <pre><code>var txt = document.createTextNode(rowCount); var record = document.getElementsById("records") </code></pre> <p>//part d holding off on this part until I get a,b,c figured out.</p> <p>The HTML supporting snippet:</p> <pre><code>&lt;table id="filters"&gt; &lt;tr&gt;&lt;th colspan="2"&gt;Filter Product List&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Records: &lt;/td&gt; &lt;td id="records"&gt;&lt;/td&gt; &lt;/tr&gt; &lt;table id="prodTable"&gt; &lt;tr&gt;&lt;th colspan="8"&gt;Digital Cameras&lt;/th&gt;&lt;/tr&gt; &lt;tr id="titleRow"&gt; &lt;th&gt;Model&lt;/th&gt; &lt;th&gt;Manufacturer&lt;/th&gt; &lt;th&gt;Resolution&lt;/th&gt; &lt;th&gt;Zoom&lt;/th&gt; &lt;th&gt;Media&lt;/th&gt; &lt;th&gt;Video&lt;/th&gt; &lt;th&gt;Microphone&lt;/th&gt; &lt;/tr&gt; </code></pre> <p>Thanks for the help!</p>
<p>You should check out the <a href="https://developer.mozilla.org/En/DOM/Node.nextSibling" rel="nofollow noreferrer"><code>nextSibling</code></a> property. I'm not sure how strictly you want to follow your book but a <code>while</code> loop seems more appropriate than a <code>for</code>:</p> <pre><code>var headRow = document.getElementById("headRow"); var rowCount = 0; var cRow = headRow; // used as a reference to the current row while (cRow = cRow.nextSibling) // While there is a next sibling, loop { if (cRow.tagName == "TR" &amp;&amp; cRow.style.display === "") rowCount++; // increment rowCount by 1 } </code></pre> <p>If you're insistent on using a <code>for</code> loop, I suppose you could do something like this:</p> <pre><code>var headRow = document.getElementById("headRow"); var rowCount = 0; for (var cRow = headRow.nextSibling; cRow = cRow.nextSibling;) { if (cRow.tagName == "TR" &amp;&amp; cRow.style.display === "") rowCount++; // increment rowCount by 1 } </code></pre>