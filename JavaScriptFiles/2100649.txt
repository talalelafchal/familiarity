asp.net date validation with three drop down list
<p>i have three drop down list for day month and year now i want to validate this selected date in asp.net using javascript or inbuild asp.net validation control.</p> <p>thanks......</p>
<p>This is a java script code for validate date format :</p> <pre><code>&lt;script language="javascript" type="text/javascript"&gt; function ValidateDate(args) { var date=args.Value; var arr=date.split('/'); if(arr.length!=3) { args.IsValid=false; return; } var day; if(arr[1]=='08') { day=parseInt('8'); } else if(arr[1]=='09') { day=parseInt('9'); } else { day=parseInt(arr[1]); } var month; if(arr[0]=='08') { month=parseInt('8'); } else if(arr[0]=='09') { month=parseInt('9'); } else { month=parseInt(arr[0]); } var year=parseInt(arr[2]); var boolday=false; var boolmonth=false; var boolyear=false; if(!isNaN(year)) { if(1800&lt;year&amp;&amp;year&lt;2100) { boolyear=true; } } if(!isNaN(month)) { if(0&lt;month&amp;&amp;month&lt;13) { boolmonth=true; } } if(!isNaN(day)) { var val=32; if(boolmonth) { if(month==2) { if(boolyear) { if(year%4==0) { val=30; } else { val=29; } } } else if(month==4||month==6||month==11||month==9) { val=31 } } if(0&lt;day&amp;&amp;day&lt;val) { boolday=true; } } if(boolyear&amp;&amp;boolmonth&amp;&amp;boolday) { args.IsValid=true; } else { args.IsValid=false; } } &lt;/script&gt; </code></pre> <p>And you can validate date entered in the 3-DropDownList by concatinate the 3 values and passing it to the function</p>
<p>Using a custom validator:</p> <pre><code>protected void dobCustomValidator_ServerValidate(object sender, ServerValidateEventArgs e) { CustomValidator validator = (CustomValidator) sender; ddlDateofBirthDay = (DropDownList)validator.Parent.FindControl("ddlDateofBirthDay"); ddlDateofBirthMonth = (DropDownList)validator.Parent.FindControl("ddlDateofBirthMonth"); ddlDateofBirthYear = (DropDownList)validator.Parent.FindControl("ddlDateofBirthYear"); if (ddlDateofBirthDay.SelectedIndex == 0 || ddlDateofBirthMonth.SelectedIndex == 0 || ddlDateofBirthYear.SelectedIndex == 0) { e.IsValid = false; } else { string dateOfBirthString = ddlDateofBirthDay.SelectedItem.Value + "/" + dateTools.MonthNumber(ddlDateofBirthMonth.SelectedItem.Value) + "/" + ddlDateofBirthYear.SelectedItem.Value; try { DateTime.Parse(dateOfBirthString, Culture); } catch { e.IsValid = false; } } } </code></pre>
<p>See below. The main function is isDate to which you can pass day, month and year. These are javascript functions, so it alerts a relevant message and returns false.</p> <p>The daysInFebruary will calculate the number of days for feb for the year passed.</p> <p>The DaysArray keeps an array of the number of days for each month.</p> <pre><code>var minYear=1900; var maxYear=2100; function daysInFebruary (year){ // February has 29 days in any year evenly divisible by four, // EXCEPT for centurial years which are not also divisible by 400. return (((year % 4 == 0) &amp;&amp; ( (!(year % 100 == 0)) || (year % 400 == 0))) ? 29 : 28 ); } function DaysArray(n) { for (var i = 1; i &lt;= n; i++) { this[i] = 31 if (i==4 || i==6 || i==9 || i==11) {this[i] = 30} if (i==2) {this[i] = 29} } return this } function isDate(strDay,strMonth,strYear ){ var daysInMonth = DaysArray(12) if (strDay.charAt(0)=="0" &amp;&amp; strDay.length&gt;1) strDay=strDay.substring(1) if (strMonth.charAt(0)=="0" &amp;&amp; strMonth.length&gt;1) strMonth=strMonth.substring(1) for (var i = 1; i &lt;= 3; i++) { if (strYr.charAt(0)=="0" &amp;&amp; strYr.length&gt;1) strYr=strYr.substring(1) } month=parseInt(strMonth) day=parseInt(strDay) year=parseInt(strYr) if (strMonth.length&lt;1 || month&lt;1 || month&gt;12){ alert("Please enter a valid month") return false } if (strDay.length&lt;1 || day&lt;1 || day&gt;31 || (month==2 &amp;&amp; day&gt;daysInFebruary(year)) || day &gt; daysInMonth[month]){ alert("Please enter a valid day") return false } if (strYear.length != 4 || year==0 || year&lt;minYear || year&gt;maxYear){ alert("Please enter a valid 4 digit year between "+minYear+" and "+maxYear) return false } return true } </code></pre>
<p>You could use JavaScript to load a hidden input with the value of the three dropdowns on the change event ie </p> <pre><code>hidDate.value = ddlDay.value + "/" + ddlMonth.value + "/" ddlYear.value; </code></pre> <p>Then use a compare validation control with the dataType set to DateTime validating the hidden input. You'll want to make sure that you the drop downs for values and only concat the /'s when needed.</p> <p>(Note: This is for concept only and not going to be syntactically correct) </p>
<pre><code>// validate that the user made a selection other than default function isChosen(select) { if (select.selectedIndex == 0) { alert("Please make a choice from the list."); return false; } else { return true; } } function daysInFebruary (year){ // February has 29 days in any year evenly divisible by four, // EXCEPT for centurial years which are not also divisible by 400. return (((year % 4 == 0) &amp;&amp; ( (!(year % 100 == 0)) || (year % 400 == 0))) ? 29 : 28 ); } function DaysArray(n) { for (var i = 1; i &lt;= n; i++) { this[i] = 31 if (i==4 || i==6 || i==9 || i==11) {this[i] = 30} if (i==2) {this[i] = 29} } return this } function focusElement(formName, elemName) { var elem = document.forms[formName].elements[elemName]; elem.focus(); elem.select(); } function valid(dob1,dob2,dob3){ var daysInMonth = DaysArray(12) var date=dob1.value var month=dob2.value var year=dob3.value if((month==2 &amp;&amp; date&gt;daysInFebruary(year)) || date&gt;daysInMonth[month]){ alert("Please enter a valid day") return false } return true } function validateForm(form) { if (isChosen(form.dob1)) { if (isChosen(form.dob2)) { if (isChosen(form.dob3)) { if(valid(form.dob1,form.dob2,form.dob3)){ document.frm.action="&lt;%=contextPath%&gt;/Conformation"; //"conformation" is for servelet mapping document.frm.submit(); } } } } return false; } &lt;/script&gt; &lt;script language="javascript"&gt; function gotoAddResourceAction() { validateForm(document.frm) } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;form name="frm" method="post"&gt; &lt;table width="100%" id='table1' border="0" cellspacing="2" cellpadding="2"&gt; &lt;tr&gt;&lt;td width="40%" class="txt-label"&gt; &lt;SPAN CLASS="txt-label"&gt;Date Of Birth (DOB)&lt;/SPAN&gt;&lt;font color='red'&gt; *&lt;/font&gt;: &lt;/td&gt; &lt;td width="60%" class="txt-lable"&gt; &lt;Select name="dob1"&gt;&lt;option value="" selected&gt;Date&lt;/option&gt; &lt;option value="1" &gt;1&lt;/option&gt;&lt;option value="2" &gt;2&lt;/option&gt;&lt;option value="3"&gt;3&lt;/option&gt;&lt;option value="4"&gt;4&lt;/option&gt;&lt;option value="5"&gt;5&lt;/option&gt;&lt;option value="6"&gt;6&lt;/option&gt;&lt;option value="7"&gt;7&lt;/option&gt;&lt;option value="8"&gt;8&lt;/option&gt;&lt;option value="9"&gt;9&lt;/option&gt;&lt;option value="10"&gt;10&lt;/option&gt;&lt;option value="11"&gt;11&lt;/option&gt;&lt;option value="12"&gt;12&lt;/option&gt;&lt;option value="13"&gt;13&lt;/option&gt;&lt;option value="14"&gt;14&lt;/option&gt;&lt;option value="15"&gt;15&lt;/option&gt;&lt;option value="16"&gt;16&lt;/option&gt;&lt;option value="17"&gt;17&lt;/option&gt;&lt;option value="18"&gt;18&lt;/option&gt;&lt;option value="19"&gt;19&lt;/option&gt;&lt;option value="20"&gt;20&lt;/option&gt;&lt;option value="21"&gt;21&lt;/option&gt;&lt;option value="22"&gt;22&lt;/option&gt;&lt;option value="23"&gt;23&lt;/option&gt;&lt;option value="24"&gt;24&lt;/option&gt;&lt;option value="25"&gt;25&lt;/option&gt;&lt;option value="26"&gt;26&lt;/option&gt;&lt;option value="27"&gt;27&lt;/option&gt;&lt;option value="28"&gt;28&lt;/option&gt;&lt;option value="29"&gt;29&lt;/option&gt;&lt;option value="30"&gt;30&lt;/option&gt;&lt;option value="31"&gt;31&lt;/option&gt;&lt;/select&gt; &lt;Select name="dob2"&gt;&lt;option value="" selected&gt;Month&lt;/option&gt; &lt;option value="1" &gt;January&lt;/option&gt;&lt;option value="2" &gt;February&lt;/option&gt;&lt;option value="3"&gt;March&lt;/option&gt;&lt;option value="4"&gt;April&lt;/option&gt;&lt;option value="5"&gt;May&lt;/option&gt;&lt;option value="6"&gt;June&lt;/option&gt;&lt;option value="7"&gt;July&lt;/option&gt;&lt;option value="8"&gt;August&lt;/option&gt;&lt;option value="9"&gt;September&lt;/option&gt;&lt;option value="10"&gt;October&lt;/option&gt;&lt;option value="11"&gt;November&lt;/option&gt;&lt;option value="12"&gt;December&lt;/option&gt;&lt;/select&gt; &lt;Select name="dob3"&gt;&lt;option value="" selected&gt;Year&lt;/option&gt; &lt;option value="1950" &gt;1950&lt;/option&gt;&lt;option value="1951" &gt;1951&lt;/option&gt;&lt;option value="1952"&gt;1952&lt;/option&gt;&lt;option value="1953"&gt;1953&lt;/option&gt;&lt;option value="1954"&gt;1954&lt;/option&gt;&lt;option value="1955"&gt;1955&lt;/option&gt;&lt;option value="1956"&gt;1956&lt;/option&gt;&lt;option value="1957"&gt;1957&lt;/option&gt;&lt;option value="1958"&gt;1958&lt;/option&gt;&lt;option value="1959"&gt;1959&lt;/option&gt;&lt;option value="1960"&gt;1960&lt;/option&gt;&lt;option value="1961"&gt;1961&lt;/option&gt;&lt;option value="1962"&gt;1962&lt;/option&gt;&lt;option value="1963"&gt;1963&lt;/option&gt;&lt;option value="1964"&gt;1964&lt;/option&gt;&lt;option value="1965"&gt;1965&lt;/option&gt;&lt;option value="1966"&gt;1966&lt;/option&gt;&lt;option value="1967"&gt;1967&lt;/option&gt;&lt;option value="1968"&gt;1968&lt;/option&gt;&lt;option value="1969"&gt;1969&lt;/option&gt;&lt;option value="1970"&gt;1970&lt;/option&gt;&lt;option value="1971"&gt;1971&lt;/option&gt;&lt;option value="1972"&gt;1972&lt;/option&gt;&lt;option value="1973"&gt;1973&lt;/option&gt;&lt;option value="1974"&gt;1974&lt;/option&gt;&lt;option value="1975"&gt;1975&lt;/option&gt;&lt;option value="1976"&gt;1976&lt;/option&gt;&lt;option value="1977"&gt;1977&lt;/option&gt;&lt;option value="1978"&gt;1978&lt;/option&gt;&lt;option value="1979"&gt;1979&lt;/option&gt;&lt;option value="1980"&gt;1980&lt;/option&gt;&lt;option value="1981"&gt;1981&lt;/option&gt;&lt;option value="1982"&gt;1982&lt;/option&gt;&lt;option value="1983"&gt;1983&lt;/option&gt;&lt;option value="1984"&gt;1984&lt;/option&gt;&lt;option value="1985"&gt;1985&lt;/option&gt;&lt;option value="1986"&gt;1986&lt;/option&gt; &lt;option value="1987"&gt;1987&lt;/option&gt;&lt;option value="1988"&gt;1988&lt;/option&gt;&lt;option value="1989"&gt;1989&lt;/option&gt;&lt;option value="1990"&gt;1990&lt;/option&gt;&lt;option value="1991"&gt;1991&lt;/option&gt;&lt;option value="1992"&gt;1992&lt;/option&gt;&lt;option value="1993"&gt;1993&lt;/option&gt;&lt;option value="1994"&gt;1994&lt;/option&gt;&lt;option value="1995"&gt;1995&lt;/option&gt;&lt;option value="1996"&gt;1996&lt;/option&gt;&lt;option value="1997"&gt;1997&lt;/option&gt;&lt;option value="1998"&gt;1998&lt;/option&gt;&lt;option value="1999"&gt;1999&lt;/option&gt;&lt;option value="2011"&gt;2011&lt;/option&gt;&lt;/select&gt; &lt;/td&gt;&lt;/tr&gt; &lt;table width="100%" border="0" align="center"&gt; &lt;tr&gt;&lt;td&gt; &lt;input type="button" name="SubmitForm" value="Submit" class="button" onMouseOver=(this.className='buttonover') onMouseOut=(this.className='button') onClick="gotoAddResourceAction()"&gt; &lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; </code></pre>