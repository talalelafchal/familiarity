Adding names to an array and outputting them to a table
<p>I'm having some trouble getting my code to work. This is what I have so far.</p> <pre><code>function outputNamesAndTotal() { var name; var outputTable; var inputForm; var nameArray; var outputDiv; outputDiv = document.getElementById("outputDiv"); inputForm = document.getElementById("inputForm"); outputTable = document.getElementById("outputTable"); name = inputForm.name.value; nameArray = []; nameArray.push(name); for (var i = 0; i &gt; nameArray.length; i++) { outputTable.innerHTML += "&lt;tr&gt;" + nameArray[i] + "&lt;/tr&gt;"; } inputForm.name.focus(); inputForm.name.select(); return false; } </code></pre> <p>When I add the loop it breaks the code completely, but I can't figure out why.</p> <p>What I'm trying to do is use an HTML form to get a name from the user. Once the user enters the name, the program adds the name to the array, and outputs each array entry to a row in a table.</p> <p>It's pretty basic, but it's still giving me all kinds of trouble! </p>
<blockquote> <pre><code>for (var i = 0; i &gt; nameArray.length; i++) { </code></pre> </blockquote> <p>I think you mean <code>i &lt; nameArray.length</code></p>
<p>I think you are clearing your array of names every time you call the function. You should bring the line:</p> <pre><code>nameArray = []; </code></pre> <p>out and make it global.</p> <p>I ran a quick test and the following code works in at least FireFox</p> <p><strong>Edited to use appendChild</strong></p> <pre><code>&lt;html&gt; &lt;head&gt; &lt;script type='text/javascript'&gt; var names = []; function addName() { var nameTxt = document.getElementById('name_txt'); var name = nameTxt.value; names.push(name); var outTable = document.getElementById('out_tbl'); var row = document.createElement('tr'); var entry = document.createElement('td'); var txt = document.createTextNode(name); entry.appendChild(txt); row.appendChild(entry); outTable.appendChild(row); var numDiv = document.getElementById('num_div'); removeAllChildren(numDiv); var numTxt = document.createTextNode('You have ' + names.length + ' names'); numDiv.appendChild(numTxt); } function removeAllChildren(e) { while (e.hasChildNodes()) { e.removeChild(e.firstChild); } } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;table id='out_tbl'&gt; &lt;/table&gt; &lt;div id='num_div'&gt;You have 0 names&lt;/div&gt; &lt;input id='name_txt' type='text'/&gt; &lt;button onclick="addName()"&gt;CLICK&lt;/button&gt; &lt;/body&gt; &lt;/html&gt; </code></pre> <p><strong>Edit:</strong> Oh yeah and you are the fact that you are looping through the array every time. If you "globalize" the name array, you're gonna print the whole array every time you add a name.</p> <p><strong>Edit x2:</strong> the code you originally posted had nameArray as a local variable inside the function. This effectively clears the array every time you call the function. Then every time you call the function you add the current name to the now empty array, and loop through all 1 (one) elements that the array now holds.</p> <p>What you want to do is "globalize" the name array, and remove the loop from your function. This will allow you to build up your name array across multiple calls, and works the way that you want it.</p> <p>Also, innerHTML is not really the best way to add things to the page. I would suggest using appendChild().</p> <p>-C </p>