Set the Dropdown box as selected in Javascript
<p>I am using Javascript in my app. In my table, I have a column named <code>industry</code> which contains value like</p> <pre><code>id 69 name :aruna username :aruna email :artkjnjkn@sf.sd password: bd09935e199eab3d48b306d181b4e3d1:i0ODTgVXbWyP1iFOV type : 3 industry: | Insurance | Analytics | EIS and Process Engineering </code></pre> <p>actually this industry value is inserted from a dropdown box multi select..</p> <p>now i am trying like on load to make my form as to contain these values</p> <p>where industry is dropdown box</p> <pre><code>&lt;select id="ind1" moslabel="Industry" onClick="industryfn();"mosreq="0" multiple="multiple" size="3" class="inputbox" name="industry1[]"&gt;'+ &lt;option value="Banking and Financial Services"&gt;Banking and Financial Services&lt;/option&gt; &lt;option value="Insurance"&gt;Insurance&lt;/option&gt; &lt;option value="Telecom"&gt;Telecom&lt;/option&gt; &lt;option value="Government "&gt;Government &lt;/option&gt; &lt;option value="Healthcare &amp;amp; Life sciences"&gt;Healthcare &amp; Life sciences&lt;/option&gt; &lt;option value="Energy"&gt;Energy&lt;/option&gt; &lt;option value="Retail &amp;amp;Consumer products"&gt;Retail &amp;Consumer products&lt;/option&gt; &lt;option value="Energy, resources &amp;amp; utilities"&gt;Energy, resources &amp; utilities&lt;/option&gt; &lt;option value="Travel and Hospitality"&gt;Travel and Hospitality&lt;/option&gt; &lt;option value="Manufacturing"&gt;Manufacturing&lt;/option&gt; &lt;option value="High Tech"&gt;High Tech&lt;/option&gt; &lt;option value="Media and Information Services"&gt;Media and Information Services&lt;/option&gt; &lt;/select&gt; </code></pre> <p>How to keep the industry values(| Insurance | Analytics | EIS and Process Engineering ) as selected?</p> <p>EDIT: Window.onDomReady(function(){ user->get('industry'); $s=explode('|', $str) ?></p> <pre><code> var selectedFields = new Array(); &lt;?php for($i=1;$i&lt;count($s);$i++){?&gt; selectedFields.push("&lt;?php echo $s[$i];?&gt;"); &lt;?php }?&gt; for(i=1;i&lt;selectedFields.length;i++) { var select=selectedFields[i]; for (var ii = 0; ii &lt; document.getElementById('ind1').length; ii++) { var value=document.getElementById('ind1').options[ii].value; alert(value); alert(select); if(value==select) { document.getElementById('ind1').options[ii].selected=selected; }//If } //inner For }//outer For &lt;/script&gt; </code></pre> <p>i have tried the above the alert functions are working correctly. But the if loop didnt works correctly .. Why so ..Please help me....</p>
<p>Explode selected values into an array, make a foreach cycle to run through all options of your select and if those values match, just put there selected="selected".</p> <p><strong>Example:</strong></p> <p><em>Javascript / PHP:</em></p> <pre><code>&lt;script type="text/javascript"&gt; Array.prototype.in_array = function( p_val ) { for(var i = 0, l = this.length; i &lt; l; i++) { if(this[i] == p_val) { return true; } } return false; } // Swap this for normal onDomReady if you don't use jQuery $(document).ready( function() { &lt;?php $selected_from_db = "Insurance|Analytics|EIS and Process Engineering|Telecom"; $selected = explode( "|", $selected_from_db ); ?&gt; var selected_fields = new Array(); &lt;?php foreach ( $selected as $key =&gt; $value ) { ?&gt; selected_fields.push("&lt;?php echo $value;?&gt;"); &lt;?php } ?&gt; var ind_dropdown = document.getElementById( "ind1" ); for ( var i = 0; i &lt; ind_dropdown.length; i++ ) { if ( selected_fields.in_array( ind_dropdown.options[ i ].text ) ) { ind_dropdown.options[ i ].setAttribute( "selected", "selected" ); } /*var select=selectedFields[i]; for (var ii = 0; ii &lt; document.getElementById('ind1').length; ii++) { var value=document.getElementById('ind1').options[ii].value; alert(value); alert(select); if(value==select) { document.getElementById('ind1').options[ii].selected=selected; } }*/ } }); &lt;/script&gt; </code></pre> <p><em>HTML:</em></p> <pre><code>&lt;body&gt; &lt;select id="ind1" name="industry[]" multiple="multiple" size="5"&gt; &lt;option value="Banking and Financial Services"&gt;Banking and Financial Services&lt;/option&gt; &lt;option value="Insurance"&gt;Insurance&lt;/option&gt; &lt;option value="Telecom"&gt;Telecom&lt;/option&gt; &lt;option value="Government "&gt;Government &lt;/option&gt; &lt;option value="Healthcare &amp;amp; Life sciences"&gt;Healthcare &amp;amp; Life sciences&lt;/option&gt; &lt;option value="Energy"&gt;Energy&lt;/option&gt; &lt;option value="Retail &amp;amp;Consumer products"&gt;Retail &amp;amp; Consumer products&lt;/option&gt; &lt;option value="Energy, resources &amp;amp; utilities"&gt;Energy, resources &amp;amp; utilities&lt;/option&gt; &lt;option value="Travel and Hospitality"&gt;Travel and Hospitality&lt;/option&gt; &lt;option value="Manufacturing"&gt;Manufacturing&lt;/option&gt; &lt;option value="High Tech"&gt;High Tech&lt;/option&gt; &lt;option value="Media and Information Services"&gt;Media and Information Services&lt;/option&gt; &lt;/select&gt; &lt;/body&gt; </code></pre> <p>I don't recommend mixing PHP and Javascript code tho. It's way too messy and hard to maintain. I'd recommend you to parse these data either on server side (PHP) or client side (AJAX).</p>