Javascript keeps undefining my vars, it's harshing my buzz. Help?
<p>This is my first experience with javascript, and... Well... Ugh. Here's what's happening:</p> <pre><code>function step_1(id) { //blah blah step_2(id); } function step_2(id) { //blah blah step_3(id); } function step_3(id) { //blah blah alert(id); } step_1(0); // I can stick any number here, same thing happens... </code></pre> <p>The alert pops up and says "Undefined". But, if I throw an alert(id); in step_2, then both alerts say "0".</p> <p>Why/how is id undefined? What am I doing wrong?</p> <p>I've even tried reassigning id in each function, like:</p> <pre><code>var nid = id; step_2(nid); </code></pre> <p>etc... But that still doesn't work without the alerts.</p> <p>EDIT: Since my example apparently works fine, perhaps it would help to <a href="http://pastebin.com/78W0pVCK" rel="nofollow noreferrer">look at the blah blah that's going on in my code</a>. It works fine, unless I take out the alert(id); on line 11.</p>
<p>There's a difference between step_2 and step2. And all your other little steps ...</p>
<p>_in the steps may be killing program and your buzz step2 and step_2 are two different things</p>
<p>You have a line (line 30) at the end of checkUpload that calls itself without any parameters:</p> <pre><code> window.setTimeout('checkUpload();', 333); </code></pre> <p>It seems like this is what you meant to do:</p> <pre><code> window.setTimeout(function() { checkUpload(id); }, 333); // which is the equivalent to: // window.setTimeout("checkUpload(" + id + ");", 333); </code></pre>
<p>Your script re-calls <code>checkUpload()</code> via a timer without passing along the id parameter it's expecting.</p> <p>Line 30</p> <pre><code>window.setTimeout('checkUpload();', 333); </code></pre> <p>Change to</p> <pre><code>window.setTimeout( function(){ checkUpload(id); }, 333 ); </code></pre> <p>In the future, as a helpful piece of advice, I encourage you to post your actual problem the first time around, and not a pared down example that you <em>think</em> illustrates the issue. Just saves everyone time and effort ;)</p>
<p>Mate, I don't know if this answer is relevant as pointed by others, but couple of observations from seeing your code.</p> <pre><code>if (uploadFrame.contentDocument.readyState == 'complete') { if (uploadFrame.contentDocument.getElementById('new_image_id')) { var new_id = uploadFrame.contentDocument.getElementById('new_image_id').innerHTML; </code></pre> <p>Really! you should know that '==' is not the correct operator but '===' is. A common mistake made by js learners/users. Also you may want to recheck the id, is it <code>'new_image_id'</code> or <code>'new_image_'+id</code>. </p>