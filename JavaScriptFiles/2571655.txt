javascript parameter passing in dynamic action handler
<p>I need to create several Divs dynamically, and I need to add "onmouseover" event to them. However, the JAVASCRIPT "div.onmouseover = handler" can't pass in parameters. <strong>how can I pass parameters in those dynamic event handlers?</strong></p>
<p>You can create a <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Closures" rel="nofollow noreferrer">closure</a>.</p> <pre><code>div.onmouseover = function(){ handler(arguments,here); } </code></pre>
<p>You can use a <a href="http://en.wikipedia.org/wiki/Closure_(computer_science)" rel="nofollow noreferrer">closure</a> to do this:</p> <pre><code>myParam = "test"; div.onmouseover = function(){ alert(myParam); } </code></pre>
<p>You can take advantage of <a href="http://en.wikipedia.org/wiki/Closure_(computer_science)" rel="nofollow noreferrer">closures</a> to do this:</p> <pre><code>function createHandlerFor(a, b, c) { return function(event) { // This function will be called later, and it has access // to 'a', 'b', and 'c' }; } </code></pre> <p>Or using a named function (my preference, so call stacks and such are clearer);</p> <pre><code>function createHandlerFor(a, b, c) { function myNiftyHandler(event) { // This function will be called later, and it has access // to 'a', 'b', and 'c' }; return myNiftyHandler; } </code></pre> <p>Use:</p> <pre><code>div.onmouseover = createHandler(1, 2, "three"); </code></pre> <p>...or hook it up via <code>addEventListener</code> (standards) or <code>attachEvent</code> (IE &lt; 8).</p> <p>Although you could define the handler inline, doing so "closes over" everything that's in scope where you define it. Using a separate function and passing it parameters keeps the closure as small as possible, which is useful for memory management.</p> <p>Closures are not complicated, but they have some interesting properties. <a href="http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html" rel="nofollow noreferrer">More here.</a></p>