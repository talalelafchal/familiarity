Parsing special strings within a text (eg. &quot;%var%&quot;)?
<p>I am supplying a Javascript function strings with commands (<em>SVG path commands</em>):</p> <pre><code>eg. "move 10 10 line 50 50" </code></pre> <p><strong>move and line</strong> are <strong><em>commands</em></strong></p> <p><strong>numbers</strong> are <strong><em>x, y coordinates</em></strong></p> <p>I would like to add <strong>special strings</strong> to these commands, that would instruct the function to use specific variables</p> <pre><code>eg. "move %mouseX%+1 %mouseY%+1" </code></pre> <p>where <strong>%mouseX% and %mouseY%</strong> would be the mouse <strong><em>x,y coordinates</em></strong></p> <p>How can I parse and replace these? </p>
<p>You can use split method to split the string.</p> <pre><code>var arrSplitString = stringToSplit.split(' '); </code></pre> <p>and result will be an array. Then replace the corresponding index values with the desired one.</p> <p>See <a href="https://developer.mozilla.org/En/Core_JavaScript_1.5_Reference/Objects/String/Split" rel="nofollow noreferrer">split</a></p> <p>To get the mouse position you can use <code>e.PageX</code> and <code>e.PageY</code></p> <p>See <a href="http://docs.jquery.com/Tutorials:Mouse_Position" rel="nofollow noreferrer">Mouse position</a> </p>
<pre><code>var command = 'move %mouseX%+1 %mouseY%+1'; command = command.replace('%mouseX%', mouseX).replace('%mouseY%', mouseY); </code></pre> <p>Where mouseX and mouseY are the variables holding the mouse position.</p>
<p>For this type of string manipulation, as a starting point, you could take advantage of using a powerful feature of the <code>String.prototype.replace</code> function, using its callback function:</p> <pre><code>function replaceTokens(str, replacement) { return str.replace(/\%([^%]+)\%/g, function (string, match) { return replacement[match]; }); } replaceTokens("move %mouseX%+1 %mouseY%+1", {mouseX: 100, mouseY: 200}); // returns "move 100+1 200+1" replaceTokens("%foo% %bar%!!!", {foo: 'Hello', bar: 'World'}); // returns Hello World!!! replaceTokens("I'm %name%, and I %action% %place%", {name: 'CMS', action: 'love', place:'StackOverflow' }); // "I'm CMS, and I love StackOverflow" </code></pre> <p>That is only a simple example about the sort of things that you are able to do with this technique. This small function will make you able to do multiple <em>%token%</em> replacements in one step.</p> <p>Recommended article:</p> <ul> <li><a href="http://ejohn.org/blog/search-and-dont-replace/" rel="nofollow noreferrer">Search and Don't Replace</a></li> </ul>