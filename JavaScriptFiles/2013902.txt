Select Cells On A Table By Dragging
<p>I was looking at <a href="http://stackoverflow.com/questions/746082/how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver">this question</a> and saw the reference to the iPhone game where you drag across the screen selecting letters as you go.</p> <p>I was curious to see an implimentation of this in Javascript using tables. So you'd drag the mouse over each cell they would then become highlighted.</p> <p>I'm not sure what the best method would be but I hope someone has a go. Someone attempted it <a href="http://grover.open2space.com/sites/default/files/articles/dom/test.htm" rel="nofollow noreferrer">here</a>, but it doesn't really work.</p> <p><img src="https://i.imgur.com/UIMwD.png" alt="alt text"> <img src="https://imgur.com/ZfFVu.png" alt="alt text"></p> <p><em>Thank <a href="https://cacoo.com/" rel="nofollow noreferrer">Cacoo</a> for the sexy diagrams. It's like an online visio, really nice. Check it out ;)</em></p>
<p><a href="http://www.jaanuskase.com/stuff/dragSelect.html" rel="nofollow noreferrer">http://www.jaanuskase.com/stuff/dragSelect.html</a></p> <p>Not sure if you wanted pure-Javascript implementation, I used jQuery for convenience.</p>
<p>Here's a working prototype: <a href="http://jsfiddle.net/few5E/" rel="nofollow noreferrer">http://jsfiddle.net/few5E/</a> Using jQuery for DOM hooking, but could easily be implemented with another framework.</p> <p><strong>Update</strong>: <a href="http://jsfiddle.net/Brv6J/" rel="nofollow noreferrer">http://jsfiddle.net/Brv6J/</a> a slightly different version - the highlighted state will only change when you release and click again.</p> <p><strong>Update 2</strong>: <a href="http://jsfiddle.net/Brv6J/3/" rel="nofollow noreferrer">http://jsfiddle.net/Brv6J/3/</a> - binding onselectstart so that text is not selected in IE.</p> <p>A few relevant facts:</p> <ul> <li>The mousedown event of the table cells is hooked to track the actual click. This event is stopped, so that text selection is hindered. Also binding ontextselect for the same effect in IE.</li> <li>The mouseover event will toggle the highlighted class for the cell</li> <li>The mouseout event is hooked on <code>document</code>. This is to ensure that it always runs. If the mouseup event was hooked on the table cell, it would not trigger if you released the mouse key with the mouse outside of the table. This state is tracked in <code>isMouseDown</code>.</li> </ul> <p>Full source code for reference:</p> <pre><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt; &lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt; &lt;head&gt; &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"/&gt; &lt;title&gt;&lt;/title&gt; &lt;style type="text/css" media="screen"&gt; table td { width:100px; height:100px; text-align:center; vertical-align:middle; background-color:#ccc; } table td.highlighted { background-color:#999; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;table cellpadding="0" cellspacing="1" id="our_table"&gt; &lt;tr&gt; &lt;td&gt;a&lt;/td&gt; &lt;td&gt;b&lt;/td&gt; &lt;td&gt;c&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;d&lt;/td&gt; &lt;td&gt;e&lt;/td&gt; &lt;td&gt;f&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;g&lt;/td&gt; &lt;td&gt;h&lt;/td&gt; &lt;td&gt;i&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt; &lt;script type="text/javascript" charset="utf-8"&gt; $(function () { var isMouseDown = false; $("#our_table td") .mousedown(function () { isMouseDown = true; $(this).toggleClass("highlighted"); return false; // prevent text selection }) .mouseover(function () { if (isMouseDown) { $(this).toggleClass("highlighted"); } }) .bind("selectstart", function () { return false; // prevent text selection in IE }); $(document) .mouseup(function () { isMouseDown = false; }); }); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; </code></pre>
<p>If you're after spreadsheet-like cell selection (in column/row blocks), you need to highlight every cell in every row that is between your start &amp; end index (both row and cell) in your mouseover event:</p> <pre><code>for (var i = rowStart; i &lt;= rowEnd; i++) { var rowCells = table.find("tr").eq(i).find("td"); for (var j = cellStart; j &lt;= cellEnd; j++) { rowCells.eq(j).addClass("selected"); } } </code></pre> <p>As the user might start selecting cells from all directions (up-bottom, bottom-up, right-left, left-right) you need to assign the correct indexes for start &amp; end.</p> <p>Here is a <a href="http://jsfiddle.net/vello/qvw0pgcu/" rel="nofollow">jsFiddle</a>.</p>