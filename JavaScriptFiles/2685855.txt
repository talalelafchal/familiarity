Retrieveing ALL head elements in document including iframe
<p>I'm trying to add <code>style</code> elements to all ALL the <code>head</code> elements in a document, including those in an iframe.</p> <p>if i use</p> <pre><code>var heads = document.getElementsByTagName('head'); </code></pre> <p>It just returns the first head element and not the ones in the iframe. this is the complete code :</p> <pre><code>var heads = document.getElementsByTagName("head"); var style = document.createElement("style"); style.type = "text/css"; style.appendChild(document.createTextNode(css)); for(var i=0;i&lt;heads.length;i++) heads[i].appendChild(style); </code></pre> <p>but this doesn't seem to work! am i doing something wrong here...?</p>
<p>What if you <code>getElementsbyTagName('iframe')</code> and then get the children elements?</p> <p>Beware that you may be hitting up against security restrictions on iframes that are put there to prevent cross site scripting.</p>
<p>this is what worked for me. thanx for all the help btw -_-</p> <pre><code>try { if(top.location.href != window.location.href) { return; } } catch(e) { return; } window.setTimeout(getAllHeads, 1000); function getAllHeads() { var heads = new Array(); var head = document.getElementsByTagName("head")[0]; if(head) addHead(head); var frames = document.getElementsByTagName("iframe"); for(var i = 0, len = frames.length; i &lt; len; i++) { var frame = frames[i]; head = (frame.contentDocument).getElementsByTagName("head")[0]; if(head) addHead(head); } function addHead(h) { heads.push(h); } alert(heads.length); } </code></pre>