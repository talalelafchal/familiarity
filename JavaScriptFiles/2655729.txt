How to get top and left style property values in Javascript
<p>I have a little bit of Javascript that almost works correctly. Here's the code:</p> <pre><code>function toggle(curlink) { curlink.style.backgroundColor = curlink.style.backgroundColor == "yellow" ? "transparent" : "yellow"; var maindiv = document.getElementById("grid"); var links = maindiv.getElementsByTagName("a"); var list = ""; for (var i = 0; i &lt; links.length; ++i) { var link = links[i]; if (link.style.backgroundColor == "yellow") { list += ("," + parseInt(link.style.left, 10) + "-" + parseInt(link.style.top, 10)); } } document.theForm.theList.value = list.substring(1); return false; }; window.onload = function() { var links = document.getElementById("grid").getElementsByTagName("a"); for (var i = 0; i &lt; links.length; ++i) { links[i].onclick = function() { return toggle(this); } } }; </code></pre> <p>The issue is with line #9; it only works when I specify values for the top and left style property of every link in the array. How do I get the top and left style property values (or X and Y coordinates) of each link in the array with Javascript when those values aren't given?</p> <p>Also, what would the code above look like in jquery? Not that it's needed - I just want to reduce the code a little and dabble in the jquery framework (I'm a Javascript newbie).</p> <p>Thanks in advance, Dude-Dastic</p>
<p><code>link.offsetLeft</code> and <code>link.offsetTop</code>. More about finding position <a href="http://www.quirksmode.org/js/findpos.html" rel="nofollow noreferrer">here</a>. They'll be positions relative to the offsetParent, but the link shows a way to get position relative to the document.</p> <p><a href="http://www.quirksmode.org/dom/w3c_cssom.html" rel="nofollow noreferrer">offsetParent</a> will evaluate to the body if the parent elements are positioned statically or there's no table in the parent hierarchy. If you want a position other than body then update the parent of the links to have a non-static position, perhaps <code>relative</code></p> <p>I'm not familiar with JQuery so I can't help there</p>
<p>The jQuery might look something like this. Untested.</p> <pre><code>$(function(){ // Get all &lt;a&gt; descendents of #grid var $anchors = $('#grid a'); // Bind a click handler to the anchors. $anchors.click(function(){ var $clickedAnchor = $(this); var coordinates = []; // Set the background color of the anchor. $clickedAnchor.css('background-color', $clickedAnchor.css('background-color') == 'yellow' ? 'transparent' : 'yellow'); // Loop through each anchor. $anchors.each(function(){ var $anchor = $(this); if ($anchor.css('background-color') == 'yellow') { var offset = $anchor.offset(); coordinates.push(offset.left + '-' + offset.top); // Or maybe.. // var parentOffset = $('#grid').offset(); // coordinates.push((offset.left - parentOffset.left) + '-' + (offset.top - parentOffset.top)); } }); $('#theList').val(coordinates.join(',')); return false; }); }); </code></pre>