Toggle label element in javascript
<p>Hello everybody I've recently asked <a href="http://stackoverflow.com/questions/1907006/replace-input-with-javascript">this question</a> and I've given up with the 'replace input idea'. Instead I've decided to try another approach.. </p> <p>I've made my password field background transparent and I placed <code>&lt;label&gt;</code> element "behind" the password input, so that it appears to be part of the password field. Now I wrote a standard function for toggling element like this :</p> <pre><code>function togglePassword(obj) { var el = document.getElementById(obj); if ( el.style.display != 'none' ) { el.style.display = 'none'; } else { el.style.display = ''; } } </code></pre> <p>I trigger this function onforus and onblur from password field so that label disappears when the password field is focused but I have problems with onblur, because after I type password and hit TAB on the which takes me to login submit button then the <code>&lt;label&gt;</code> element appears with password value again and its mixed with typed password. <img src="http://i49.tinypic.com/23s7ypc.png" alt="image"> Here is the image of that, so I tried to come up with something new.</p> <pre><code>function togglePassword(obj) { var el = document.getElementById(obj); var input_el = document.getElementById('password_field'); if(input_el.value.length &gt; 0) { el.style.display = 'none'; } else { if ( el.style.display != 'none' ) { el.style.display = 'none'; } else { el.style.display = ''; } } } </code></pre> <p>Unfortunately, this code doesn't work .. can someone point to me where did I made mistake? So this second code should check whether password field is emtpy or not, if its not empty then continue to toogle if it is don't toggle just hide the password value. Help :D thank you</p>
<p>HI,</p> <p>try to use a library like JQuery. they are really helpful in such simple tasks, and also can handle quite complex ones...</p> <p>important point is: such a thing like hiding/showing is solved already hundred times. do not reinvent the wheel ;-)</p>
<p>One day I'll get round to writing up the details of this technique, but a working implementation has been sitting in my tmp directory for the last six months: <a href="http://dorward.me.uk/tmp/label-work/example.html" rel="nofollow noreferrer">http://dorward.me.uk/tmp/label-work/example.html</a></p>
<p>Try this it will work</p> <pre><code>function togglePassword(obj) { var el = document.getElementById(obj); var input_el = document.getElementById('password_field'); if((input_el.style.display == ‘none’) || ((input_el.style.display=='') && (input_el.offsetWidth==0))){ el.style.display = 'block'; } else { el.style.display = ‘none’; } } } </code></pre>
<p>I have not quite understand the requirement, but you should verify in your function if you are doing a blur on focu action and reacting on this.</p> <p>Perhaps something like that :</p> <pre><code>&lt;script type="text/javascript"&gt; function togglePassword(alwaysVisible, labelId, pwdId){ var label=document.getElementById(labelId); if (alwaysVisible){ label.style.display=""; } else { var pwd=document.getElementById(pwdId); label.style.display= (pwd.value.length==0)?"":"none"; } } &lt;/script&gt; </code></pre> <p>....</p> <pre><code>&lt;form&gt; &lt;label for="pwd" id="labelPwd"&gt;Type your password&amp;nbsp;:&amp;nbsp;&lt;/label&gt; &lt;input name="pwd" id="pwd" onfocus="togglePassword(true, 'labelPwd', 'pwd')" onblur="togglePassword(false , 'labelPwd', 'pwd')" type="password"&gt; &lt;input type="submit"&gt; &lt;/form&gt; </code></pre>