How can I get the window in which an object was defined?
<p>I would like to check if an object is an instanceof a certain built-in class. The problem is that my checking code might not be in the window where the object is defined, so <code>x instanceof String</code> would return <code>false</code> even though <code>x</code> is a <code>String</code>. What I need is something like <code>x instanceof getWindowOf(x)['String']</code>? But is it possible to define a function such as <code>getWindowOf</code>?</p> <p>Or, we could solve this in another way if we were able to get all the windows of a JS application. <code>top</code>, and looping recursively through <code>top.frames</code> come close, but we would be missing pop-ups.</p> <p>So what's a solution?</p> <p>Note that I am just using <code>String</code> as an example. I really want to check classes like <code>Element</code> or any other classes defined in the browser.</p>
<p>To avoid the cross-frame issues that you are having with the <code>instanceof</code> operator, and as you want to check a certain built-in object, I would recommend you to use the <code>Object.prototype.toString</code> method, it returns a string containing the internal <code>[[Class]]</code> property, e.g. assuming that <code>str</code> is a String and <code>arr</code> is an Array object both from other frame:</p> <pre><code>Object.prototype.toString.call(str); // returns "[object String]" Object.prototype.toString.call(arr); // returns "[object Array]" // while str instanceof String; // is false arr instanceof Array; // is false // and typeof arr; // "object" </code></pre> <p>More info:</p> <ul> <li><a href="http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/" rel="nofollow noreferrer"><code>instanceof</code> considered harmful</a></li> </ul>