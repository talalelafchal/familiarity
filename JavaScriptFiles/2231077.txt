Newlines not appearing where I want them in generated javascript
<p>I am sticking values into a script, and I am using the function below to 'implode' the array</p> <pre><code>function implode() { var str=''; for(item in globvars) str +='\n'+globvars[item]+';'; return str+'\n'; } </code></pre> <p>Sample usage:</p> <pre><code>globvars = ['Tom', 'Dick', 'Harry']; output = '&lt;script type = "text/javascript"&gt;\n'+implode(globvars)+'&lt;/script\&gt;'; </code></pre> <p>Expected output <strong>should be</strong>:</p> <pre><code> &lt;script type = "text/javascript"&gt; Tom Dick Harry &lt;/script&gt; Instead, I am getting something like this: &lt;script type = "text/javascript"&gt; Tom Dick Harry &lt;/script&gt; </code></pre> <p>what the ... ?</p>
<p>It's working allright for me. Are you outputting the <code>output</code> to the browser? Browsers ignore newlines etc, do an <code>alert(output)</code> and you'll see that the newlines are there.</p> <p>Also, your current initialization of <code>globvars</code> is wrong, you can't build an object like that. Use <code>[ ]</code> to build an array: </p> <pre><code>globvars = ['Tom', 'Dick', 'Harry']; </code></pre>
<p>If you make your <code>globvars</code> as an array (see Tatu's answer), you can use the internal <code>.join</code> instead of <code>implode</code>:</p> <pre><code>globvars = ['Tom', 'Dick', 'Harry']; output = '&lt;script type = "text/javascript"&gt;\n'+ globvars.join(";\n") +';\n&lt;/script\&gt;'; </code></pre>
<p>@Tatu Ulmanen</p> <p>He is rendering a script tag. If he was doing &lt;div>...&lt;/div> the \ns will get stripped out.</p> <p>@OP</p> <p>Try sending</p> <pre><code>&lt;script&gt;&lt;![CDATA[ x y z ]]&gt;&lt;/script&gt; </code></pre> <p>The ajax request might have munged it and stripped the newlines. If this was a straight-up rendering into a regular request the browser should not remove the \ns.</p> <p>If this does not work please indicate:</p> <p>What browser is being tested on, what kind of request is done, what you are trying to accomplish such that these newlines are so important.</p>