Validate image type using javascript
<p>i have a form like this: </p> <pre><code>&lt;form method=post src=upload enctype="multipart/form-data"&gt; &lt;input name="img1" id="img1" type="file"&gt; &lt;input type="submit" value="Upload"&gt; &lt;/form &gt; </code></pre> <p>Please how can I valid this form using javascript so that only jpg files are uploaded. thanks for reading.</p>
<p><a href="http://stackoverflow.com/questions/71944/how-do-i-validate-the-file-type-of-a-file-upload">71944</a> has some javascript that looks like it might do what you need. Bear in mind that it's only client side validation, so you'll still want to validate it on the server too.</p>
<p>A Google search unearthed this: <a href="http://www.webdeveloper.com/forum/archive/index.php/t-104406.html" rel="nofollow noreferrer">http://www.webdeveloper.com/forum/archive/index.php/t-104406.html</a></p> <p>For your application, I would recommend running the input through:</p> <pre><code>function valid(a){ return a.indexOf(".jpg") != -1 &amp;&amp; a.type == file; } </code></pre> <p>That should work.</p>
<p>You can use the "accept" paramter to the input tag:</p> <pre><code>&lt;input name="img1" id="img1" type="file" accept="image" /&gt; </code></pre> <p>Its not JavaScript but should still be helpful to prevent the user from even attempting to upload a non-image file.</p>
<p>You can bind the <code>onsubmit</code> event of your form, and check if the <code>value</code> of your file input ends with ".jpg" or ".jpeg", something like this:</p> <pre><code>window.onload = function () { var form = document.getElementById('uploadForm'), imageInput = document.getElementById('img1'); form.onsubmit = function () { var isValid = /\.jpe?g$/i.test(imageInput.value); if (!isValid) { alert('Only jpg files allowed!'); } return isValid; }; }; </code></pre> <p>Check the above example <a href="http://jsbin.com/erine" rel="nofollow noreferrer">here</a>.</p>
<p>Form :-</p> <pre><code>&lt;form method=post src=upload enctype="multipart/form-data" onsubmit="return validateFile()"&gt; &lt;input name="img1" id="img1" type="file"&gt; &lt;input type="submit" value="Upload"&gt; &lt;/form&gt; </code></pre> <p>Javascript Code:-</p> <pre><code> function validateFile() { var allowedExtension = ['jpeg', 'jpg']; var fileExtension = document.getElementById('img1').value.split('.').pop().toLowerCase(); var isValidFile = false; for(var index in allowedExtension) { if(fileExtension === allowedExtension[index]) { isValidFile = true; break; } } if(!isValidFile) { alert('Allowed Extensions are : *.' + allowedExtension.join(', *.')); } return isValidFile; } </code></pre> <p>if you want to add more image extensions please add in allowedExtension array; </p> <pre><code>var allowedExtension = ['jpeg', 'jpg', 'png', 'gif', 'bmp']; </code></pre>