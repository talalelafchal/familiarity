Allocating matrix of certain size
<p>I want to perform a pretty simple calculation - i have matrix A with one value in each row.</p> <p>I want to loop through the matrix subtracting the previous value from the last value in the array and so on working backwards though the matrix. The result should be added as a row in matrix B ea.</p> <p>This shouldn't take long but the loop goes on for minutes, I think because I am not preallocating the matrix B correctly and it grows in size each loop. I'm unsure how to do it properly.</p> <p>My code:</p> <pre><code>matrixB = []; for alfa=25471: -1: 2, row = matrixA(alfa)-matrixA(alfa-1) matrixB = [row;matrixB] end </code></pre>
<p>As commented by Divakar, you should use <code>matrixB = diff(matrixA)</code> for this. It's simple and fast. </p> <p>As for general preallocation of size, you can do this by initiating your matrix variable with the <code>zeros</code> command. This is done in the following form: <code>matrix = zeros(numRows, numCols)</code>. It is always better to initiate matrices this way if you know their size. Dynamic matrices can be handy but there is a performance pay off associated with updating the size length everytime you access the variable.</p> <p>To elaborate using your example code:</p> <pre><code>numElements = length(matrixA); matrixB = zeros(numElements - 1, 1); for index = numElements:-1:2 matrixB(index) = matrixA(index) - matrixA(index - 1); end </code></pre>