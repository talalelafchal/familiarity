Using variable-precision arithmetic together with functions
<p>I want to compute my function with four decimal digit arithmetic in Matlab. But when I run <code>vpa(MyFunc(), 4)</code> Matlab returns the same result as when I run <code>MyFunc()</code> while the results are actually different on paper. Now my question is how can I use <code>vpa()</code> without editing my function?</p> <p><strong>EDIT</strong> In the following example my function is <code>sum()</code> and as you see the results are the same (<code>vpa()</code> affected just the last result)</p> <pre><code>&gt;&gt; x = exp([-10:0.01:1]); &gt;&gt; sum(x) ans = 273.1851 &gt;&gt; vpa(sum(vpa(x, 4)), 4) ans = 273.2 </code></pre> <p>As @Daniel said, I decided to write the <code>sum()</code> function with <code>vpa()</code> within it, But the result still is the same! What is wrong?</p> <pre><code>&gt;&gt; s = 0; for x = -10:0.01:1, s = vpa( vpa(s,4) + vpa(exp(x),4) , 4); end &gt;&gt; s s = 273.2 </code></pre>
<p>To use vpa inside your function, you either have to input a vpa <code>MyFunc(vpa(4))</code> or use vpa inside your function. The code from your question is the same as:</p> <pre><code>x=MyFunc() vpa(x,4) </code></pre> <p>First <code>MyFunc</code> is called, then the result is converted to vpa.</p> <p>I suggest to run your code in the debugger and check the data type of each number. Only if this type is vpa, vpa is used.</p>