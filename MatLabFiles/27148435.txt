Matlab:renaming Files in a Sequential Order
<p>I have a number of text files with no Sequential Order :</p> <pre><code>010010.txt 010030.txt 010070.txt </code></pre> <p>How could I change the file names to:</p> <pre><code>text01.txt text02.txt .... </code></pre> <p>Is it possible not to re writte over the old directory but create a new directory</p> <p>I have used the following script but the result is that it is working fine but it goes from <code>text001.txt</code> to <code>text021.txt</code> to then <code>text041.txt</code></p> <p>any idea?</p> <pre><code>directory = 'C:\test\'; %//' Directory with txt files filePattern = fullfile(directory, '*.txt'); %//' files pattern with absolute paths old_filename = cellstr(ls(filePattern)) %// Get the filenames file_ID = strrep(strrep(old_filename,'file',''),'.txt','') %// Get numbers associated with each file file_ID_doublearr = str2double(file_ID) file_ID_doublearr = file_ID_doublearr - min(file_ID_doublearr)+1 file_ID = strtrim(cellstr(num2str(file_ID_doublearr))) str_zeros = arrayfun(@(t) repmat('0',1,t), 4-cellfun(@numel,file_ID),'uni',0) %// Get zeros string to be pre-appended to each filename new_filename = strcat('file',str_zeros,file_ID,'.txt') %// Generate new filenames cellfun(@(m1,m2) movefile(m1,m2),fullfile(directory,old_filename),fullfile(directory,new_filename)) %// Finally rename files with the absolute paths </code></pre>
<p>That looks pretty complicated. I would simply make a system call to move all of the files to a new directory, then sequentially rename each file one at a time with additional system calls. It also looks like you're using Windows, so I'll provide a solution for that platform. You have the beginning right where you are reading in the files from a source directory. </p> <pre><code>directory = 'C:\test\'; %// Directory with txt files directoryToCopyOver = 'C:\out\'; %// Directory where you want to copy the files over %// Copy source directory to target directory system(['xcopy ' directory ' ' directoryToCopyOver]); filePattern = fullfile(directoryToCopyOver, '*.txt'); %//' files pattern with absolute paths names = dir(filePattern); %// Find all files with above pattern %// For each file we have... for idx = 1 : numel(names) name = names(idx).name; %// Get a name of a file %// Rename this file to textxx.txt outName = sprintf('text%2.2d.txt', idx); %// Call system and rename the file system(['ren ' directoryToCopyOver name ' ' directoryToCopyOver outName]); end </code></pre> <hr> <p>Some important things to note is that I use <a href="http://www.mathworks.com/help/matlab/ref/system.html" rel="nofollow"><code>system</code></a> to make system calls to your Windows command prompt. I use <a href="http://technet.microsoft.com/en-us/library/bb491035.aspx" rel="nofollow"><code>xcopy</code></a> to copy a whole directory from one point to another. In this case, this would be your source directory over to a new target directory. After I do this, I invoke MATLAB's <a href="http://www.mathworks.com/help/matlab/ref/dir.html" rel="nofollow"><code>dir</code></a> to determine all of the file names that match the particular pattern you have laid out, which is all of the text files.</p> <p>Then, for each text file name we have, we read in this name, then create an output name of type <code>textxx.txt</code>, where <code>xx</code> is a number starting from 1 to as many text files as we have, and then I invoke the Windows command prompt command <a href="http://technet.microsoft.com/en-us/library/bb490987.aspx" rel="nofollow"><code>ren</code></a> to rename the file from the original name to the new name. Also, take a look at <a href="http://www.mathworks.com/help/matlab/ref/sprintf.html" rel="nofollow"><code>sprintf</code></a> from MATLAB. It is designed to create strings using formatting delimiters. If you see how I called it, <code>%2.2d</code> means that I am expecting the number to be two digits long, and should the number be less than two digits, fill the spaces with a zero. If you want to increase the amount of digits, simply add more to each place. For example, if you want to have 4 digits, do <code>%4.4d</code>, and so on. This will properly create the right string so that we can rename the right file in this new directory.</p> <hr> <p>Hope this helps!</p>