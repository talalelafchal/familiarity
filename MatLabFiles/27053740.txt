Inputting a function on MATLAB
<p>I have been trying to write a MATLAB code that can take in any function for optimization with as many variables as the user wants. </p> <pre><code>function Enter_Optimization_Code clear all clc x=[]; U=''; n=input('Enter the number of variables= ') U=input('Enter function with variables as x(1), x(2), x(3)..= ','s') start=input('Enter coordinates of the starting point as [1,3,..]= ') for i=1:n x(i)=start(i) end int(U) </code></pre> <p>The code is asking the user to enter the number of variables they want and then the function they want to optimize (I didnt write the optimization code yet). For now, I want the code to plug in the value of the starting point into the function and spit out the answer.</p> <p>e.g. I am entering a function that is x(1)+x(2) and start point as [1,2]. This should cause the code to do the calculation of 1+2=3 and print 3. This is what's happening instead:</p> <pre><code>Enter the number of variables= 2 n = 2 Enter function with variables as x(1), x(2), x(3)..= x(1)+x(2) U = x(1)+x(2) Enter coordinates of the starting point as [1,3,..]= [1,2] start = 1 2 x = 1 x = 1 2 Undefined function 'int' for input arguments of type 'char'. Error in Enter_Optimization_Code (line 17) </code></pre> <p>Can anybody solve this?</p>
<p>If you want the user to enter the equation in this manner, you can convert the string to an anonymous function using <a href="http://www.mathworks.com/help/matlab/ref/str2func.html" rel="nofollow"><code>str2func</code></a>:</p> <pre><code>fun = str2func(['@(x)',U]); </code></pre> <p>This will work for function literals like <code>x(1)-x(2)^x(3)</code> and valid function calls <code>my_opt(x)</code>.</p>
<p>If you are trying to integrate the function with the symbolic function <a href="http://uk.mathworks.com/help/symbolic/int.html" rel="nofollow"><code>int</code></a>, you can't pass a string input to that function, it has to be a symbolic expression, check the documentation.</p> <p>You probably need to do <code>int(sym(U))</code> instead to convert the string <code>U</code> into a symbolic expression.</p> <p><strong>EDIT based on comments and using TroyHaskin's suggestion</strong></p> <p>Here's a version that should work. However, I'm not sure why this is a function, it should really be a script.</p> <pre><code>function Enter_Optimization_Code % Not sure why you're using a function, this should really be a script % clear all should only be used in scripts, not in functions clc % n=input('Enter the number of variables= '); not needed U=input('Enter function with variables as x(1), x(2), x(3)..= ','s'); start=input('Enter coordinates of the starting point as [1,3,..]= '); f = str2func(['@(x)',U]); y = feval(f,start); disp([U 'evaluated at x=([' num2str(start) ']) = ' num2str(y)]) </code></pre>