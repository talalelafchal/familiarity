How can I generate all combinations of n elements in an array?
<p>I have <code>n</code> states like <code>10, 15, 18, ...</code> and I want to generate all possible combinations of my states in an array with length of <code>m</code>.</p> <p>For example, if <code>m=5</code> and <code>n=2</code> (<code>states={10,15}</code>), I want to generate all possible combinations like this example:</p> <pre><code>comb = { 10 10 10 10 15 10 10 10 15 10 10 10 10 15 15 ... 15 15 15 15 10 } </code></pre> <p>Each row should consist of one possible combination of <code>10, 15</code>. How to generate this array in MATLAB?</p>
<p>One approach is:</p> <pre><code>m = 4; n = 2; states = [10, 15]; v = mod(perms(1:(2*(m-1))),n) + 1; ind = unique(v(:,1:m),'rows'); comb = states(ind) comb = 10 10 10 15 10 10 15 10 10 10 15 15 10 15 10 10 10 15 10 15 10 15 15 10 10 15 15 15 15 10 10 10 15 10 10 15 15 10 15 10 15 10 15 15 15 15 10 10 15 15 10 15 15 15 15 10 </code></pre> <p>Note that this has horrible performance for high values of <code>m</code> and <code>n</code>). </p>
<p>Try something like:</p> <pre><code>n = 5; states = [10,15]; m = numel(states); sz = m*ones(1,n); idx = {0}; idx = repmat(idx,1,n); comb = zeros(m^n,n); for i = 1:(m^n) [idx{:}] = ind2sub(sz,i); comb(i,:) =states([idx{:}]); end </code></pre> <p>This will give you all possible combinations and put them in the matrix <code>comb</code>; then you can sort out all the unwanted combinations afterwards - it is unclear which combinations you aren't interested in (it could for example be the combinations with not all elements of the same state, or the combinations with at least one of each of the states represented).</p>