Converting an image double to logical using a 5x5 window. MATLAB
<p>I have a double image and my aim is to convert it to logical. I want to create 5x5 window and put it on each pixel in the image. Then, I calculate the average of these 25 pixels. If the center pixel value is greater then the average value, it will be 1. Otherwise 0. </p> <p>How can I do that?</p> <p>P.S. I don't want to do that this way: </p> <pre><code>IM[i - 2, j - 2] IM[i - 1, j - 2] IM[i, j - 2] IM[i + 1, j - 2] IM[i + 2, j - 2] . . </code></pre>
<p>Several approaches (running time is probably in decreasing order):</p> <ol> <li><p>With <a href="http://es.mathworks.com/help/images/ref/nlfilter.html" rel="nofollow"><code>nlfilter</code></a>:</p> <pre><code>result = nlfilter(im, [5 5], @(x) x(3,3)&gt;mean(x(:))); </code></pre></li> <li><p>With <a href="http://es.mathworks.com/help/images/ref/blockproc.html" rel="nofollow"><code>blockproc</code></a>:</p> <pre><code>result = blockproc(im, [1 1], @(x) x.data(3,3)&gt;mean(x.data(:)), ... 'Bordersize', [2 2], 'Trimborder', 0); </code></pre> <p>Note that with <code>blockproc</code> we need to specify blocks of size 1x1 (so that the block "moves" from pixel to pixel in each direction), border of size 2 in eacch direction around wach pixel (to get 5x5 blocks), and prevent the function result from being trimned, because the result is just 1 value.</p></li> <li><p>With <a href="http://es.mathworks.com/help/matlab/ref/conv2.html" rel="nofollow"><code>conv2</code></a>:</p> <pre><code>result = im &gt; conv2(im, ones(5,5)/25, 'same'); </code></pre></li> </ol>
<p>If I am right, it seems like a outlier method. The code below may be what you wanted:</p> <pre><code>mask = 0.04 * ones(5); mask(3, 3) = 0; % // mask is for average the double image avgIm = filter2(mask, imd); % // imd is your double image. output = imd &gt; avgIm; </code></pre>