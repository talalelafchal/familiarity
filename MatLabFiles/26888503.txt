perform operations next to a string in matlab
<p>I have my data coming back as a cell which looks like this (each trade is underneath each other in the cell ie its a 5 by 4 cell):</p> <pre><code>sell 50 FTSE 6500 buy 100 Eurostoxx 3300 buy 25 SP 1980 buy 30 FTSE 6490 sell 25 Eurostoxx 3315 </code></pre> <p>Firstly because I have mixed data its coming back from my database query as a cell so not sure if thats a problem</p> <p>What I'd like to do is mark these to market, so I have closing market price of each of these contracts as a variable lets call them <code>FTSE_CLOSE</code>, <code>EUROSTOXX_CLOSE</code> and <code>SP_CLOSE</code>. </p> <p>I'd like to be able to do something that goes as follows:</p> <pre><code>where coloumn 3 = "FTSE" and column 1 = "sell" then column 5 = column2 * (column4 - FTSE_CLOSE) where column 3 = "FTSE" and column 1 = "buy" then column 5 = column2 * (FTSE_CLOSE - column4) </code></pre> <p>and so on for the other contracts.</p> <p>Basically I am struggling with the mixed use of strings and numbers </p> <ol> <li>Do I need to <code>cell2mat</code> everything so I have several vectors and then somehow look into the string vectors and perform the calucaltion on the other relevant vectors i.e. <code>quantity * price - close_price</code> </li> <li>Is there a simpler way of doing this</li> </ol>
<p>I think you are simply looking for the command <code>str2num</code></p> <p>Here is one idea:</p> <pre><code>input_data={"sell","50","FTSE","6500"; "buy","100","Eurostoxx","3300"; "buy","25","SP","1980", "buy","30","FTSE","6490", "sell","25","Eurostoxx","3315"}; closing_price.FTSE=6000; closing_price.Eurostoxx=3000; closing_price.SP=2000; for i=1:size(input_data,1) if strcmp(input_data{i,1},'sell') diff_from_market(i)=str2num(input_data{i,2}) ... *(str2num(input_data{i,4})-closing_price.(input_data{i,3})); elseif strcmp(input_data{i,1},'buy') diff_from_market(i)=str2num(input_data{i,2}) ... *(closing_price.(input_data{i,3})-str2num(input_data{i,4})); end end diff_from_market </code></pre>