Finding the minimum of corresponding elements in four matrices
<p>So I need to find the minimum value of corresponding elements in multiple matrices. I did find <a href="http://stackoverflow.com/questions/16462206/how-to-i-find-the-maximum-value-of-corresponding-elements-in-multiple-matrices">this page</a> but I would like to extend my question a little further. My matrices has positive and negative values (and zeros) and I want to find the minimum values <strong>excluding zeros</strong>.</p> <p>Example:</p> <pre><code>Z(:,:,1) = [-5 0 5 0 0 0 1 0 3]; Z(:,:,2) = [1 0 2 0 0 0 0 0 0]; Z(:,:,3) = [0 0 0 -9 0 4 0 0 0]; Z(:,:,4) = [0 0 0 -2 0 0 0 0 0]; </code></pre> <p>Here's what I'm using as of now:</p> <pre><code>Zmin = min(Z,[],3); </code></pre> <p>But that gives me:</p> <pre><code>[-5 0 0 -9 0 0 0 0 0] </code></pre> <p>But I want my result to be:</p> <pre><code>[-5 0 2 -9 0 4 1 0 3] </code></pre> <p>Any ideas? When I use <code>nonzeros</code>, it messes up everything.</p>
<p>One option is to set all zero elements to <code>NaN</code> that way:</p> <pre><code>Z(Z==0)=NaN; </code></pre> <p>And then use <code>nanmean</code></p> <pre><code>Zmin = nanmin(Z,[],3); </code></pre>
<p>Here's a workaround:</p> <p>Replace all the 0s in Z by NaN, calculate the min, then switch back to 0:</p> <pre><code>clear all clc close all Z(:,:,1) = [-5 0 5 0 0 0 1 0 3]; Z(:,:,2) = [1 0 2 0 0 0 0 0 0]; Z(:,:,3) = [0 0 0 -9 0 4 0 0 0]; Z(:,:,4) = [0 0 0 -2 0 0 0 0 0]; %// Assign NaN to 0 elements Z(Z ==0) = NaN; Zmin = min(Z,[],3); %// Switch back with 0 Zmin(isnan(Zmin)) = 0; %// Same for Z; Z(isnan(Z)) =0; </code></pre> <p>The output looks like this:</p> <pre><code>Zmin Z Zmin = -5 0 2 -9 0 4 1 0 3 Z(:,:,1) = -5 0 5 0 0 0 1 0 3 Z(:,:,2) = 1 0 2 0 0 0 0 0 0 Z(:,:,3) = 0 0 0 -9 0 4 0 0 0 Z(:,:,4) = 0 0 0 -2 0 0 0 0 0 </code></pre>