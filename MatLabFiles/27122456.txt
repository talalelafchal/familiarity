Avoid division by zero between matrices in MATLAB
<p>I'm using matlab and I have two matrices :</p> <pre><code>G = 1 1 1 1 1 1 1 1 </code></pre> <p>and the scond:</p> <pre><code>m = 4 4 4 4 0 0 0 0 </code></pre> <p>I want this result : </p> <pre><code>x = 1/4 1/4 1/4 1/4 0 0 0 0 </code></pre> <p>What I did so far is this : </p> <pre><code>x = G ./ m </code></pre> <p>But it returns : </p> <pre><code>x = 1/4 1/4 1/4 1/4 NaN NaN NaN NaN </code></pre> <p>How can I avoid the divison by zero by placing a default value "0" if there is a division by zero ?</p>
<p>One option would be to preallocate <code>x</code> and then only use division on the parts where <code>m</code> is not zero.</p> <pre><code>x = zeros(size(m)); % output is same size as m n = m~=0; % find indexes x(n)=G(n)./m(n); </code></pre>
<p>You can convert the NaNs back to zero:</p> <pre><code>x = G ./ m; x(isnan(x))=0; % thanks to comment by @nkjt </code></pre> <p>Or, if you have also NaNs in matrix <code>m</code> that you want to save, you can do:</p> <pre><code>x(m==0)=0; </code></pre>