In matlab, increment different column element for every row in without using a loop
<p>Assume you have an 4x4 matrix A of zeros: </p> <pre><code>0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 </code></pre> <p>And an 4x1 vector B that represents column indices for matrix A (so values [1:4])</p> <pre><code>4 2 3 1 </code></pre> <p>Now I want to increment those columnpositions in matrix A on the index on every row from vector B. I have tried a couple of constructions myself but can't quite manage to do this. </p> <p>For example I tried:</p> <pre><code>A(:, B) = A(:, B)+1 </code></pre> <p>Which just increment every element in A.</p> <p>This is how I want the operation to act:</p> <pre><code>&gt;&gt; A(somethting(B)) = A(somethting(B)) + 1 0 0 0 1 0 1 0 0 0 0 1 0 1 0 0 0 </code></pre>
<p>You can do this by using the linear index to each of the elements you want to address. Compute this using <code>sub2ind</code>:</p> <pre><code>&gt;&gt; A = zeros(4) A = 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 &gt;&gt; B = [4 2 3 1] B = 4 2 3 1 &gt;&gt; i=sub2ind(size(A),B,1:4) i = 4 6 11 13 &gt;&gt; A(i) = A(i)+1 A = 0 0 0 1 0 1 0 0 0 0 1 0 1 0 0 0 </code></pre>
<p>Well just in case you want a looped version :p</p> <pre><code>A = zeros(4,4); B = [4, 2, 3, 1]; for i = 1:length(B) A(i, B(i) ) = A(i, B(i) ) + 1; end </code></pre>
<pre><code>A = zeros(4); B = [4 2 3 1]; A(repmat([1:4]',1,4) == repmat(B,4,1)) = 1 A = 0 0 0 1 0 1 0 0 0 0 1 0 1 0 0 0 </code></pre>