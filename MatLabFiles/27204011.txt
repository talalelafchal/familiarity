Shift the z -value of contour plot in Matlab 2014b
<p>I'm trying to make a figure of a surface plot, and beneath the surface I wish to show the contour lines, but I want the contour to be at <code>z = -1</code> instead of at the default value <code>0</code>. I found a previous post about this problem <a href="http://stackoverflow.com/questions/8054966/matlab-how-to-change-contourf-plots-location-on-z-axis">here</a>, but when I try the solution the contour is still at <code>z = 0</code>. Maybe it has something to do with the version of MATLAB I'm using, which is 2014b? Any ideas on how to make it work?</p> <p>The code I tried:</p> <pre><code>%# plot surface and contour Z = peaks; surf(Z), hold on [~,h] = contourf(Z); %# get handle to contourgroup object %# change the ZData property of the inner patches hh = get(h,'Children'); %# get handles to patch objects for i=1:numel(hh) zdata = ones(size( get(hh(i),'XData') )); set(hh(i), 'ZData',-10*zdata) end </code></pre>
<p>So, I couldn't really figure out to do it as proposed in the example I found and posted, but I found a way that works. What I ended up doing was basically this: </p> <pre><code>figure hold on surf(X,Y,Z+1); contour(X,Y,Z); zz = get(gca,'ZTick'); set(gca,'ZTickLabel',sprintf('%3.1f\n',zz-1)); </code></pre> <p>This gets me the surf and contour in the same figure, but yields some problems with color mappings. </p>
<p>I figured out how to solve the problem with color mappings the user Kine faced. Note: I've done the following code on MATLAB R2015b:</p> <pre><code>offset = 0.5; plotHandle = surfc(X1, Y1, Z1); hold on; % This line moves the surface up from its original location and increases the space between the surface and the contour plot plotHandle(1).ZData = plotHandle.ZData + offset; % However in doing so the color mappings are changed. So, the line below restores these mappings plotHandle(1).CData = plotHandle.CData - offset; % This line changes fills the contour plot plotHandle(2).Fill = 'on'; grid on; % The following lines draw critical areas on the contour line, as it was more readable in my case axisHandle = gca; ZHeight = axisHandle.ZLim(1); plot3(X2, Y2, ZHeight, 'o', 'MarkerSize', 10, 'LineWidth', 1, 'Color', 'k', 'MarkerFaceColor', 'm'); plot3(Y2, X2, ZHeight, 'o', 'MarkerSize', 10, 'LineWidth', 1, 'Color', 'k', 'MarkerFaceColor', 'm'); hold off </code></pre>
<p>I got the same problem. And finally, I got the contourf on plane Z=-10. My MATLAB version is</p> <p>MATLAB Version: 8.5.0.197613 (R2015a)</p> <p>hope the codes work 4 you</p> <pre><code>clear all clc [X,Y,Z] = peaks; [~,hContour] = contourf(X,Y,Z,20,'edgecolor','none'); hContour.ContourZLevel = -10; % set the contour's Z position view(44,30) colormap(jet) </code></pre>