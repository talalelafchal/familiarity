Comparing elements in 2 arrays to a percentage tolerence
<p>I am trying to compare a four element array containing some results with 5 other four element array to see if they are equal. For this I can use isequal. The problem I am having is that I would like to allow a small bit of error (~2%) and still get the a logical yes output for each matching element. </p> <p>I could run through loads of IF loops bur I feel like there should be a simple way to implement this but I can't figure it out.</p> <p>Any help on this would be greatly appreciated as I am stumped on this seemingly simple problem. </p> <p>Thanks.</p> <p>An example is below. y is within 1% of x1 but still I get not a match. The reason I want to see if it matches all 4 elements, or just one or whatever, is that I can use this information later on.</p> <pre><code>x1= [0.012 1.323 0.1423 3.458]; x2= [0.341 2.973 0.234 1.234]; x3= [3.093 2.324 4.321 3.234]; x4= [0.987 2.345 2.543 3.243]; y= [0.0121 1.3362 0.1437 3.4926]; y1 =(x1==y) y2 =(x2==y) y3 =(x3==y) y4 =(x4==y) if sum (y1) == 4 display ('y equals x1') elseif sum(y2) == 4 display ('y equals x2') elseif sum(y3) == 4 display ('y equals x3') elseif sum(y4)== 4 display ('y equals x4') else display ('Unknown') end </code></pre>
<p>Here is one suggestion. Create an error matrix such as</p> <pre><code>err1=abs((x1-y)./y); </code></pre> <p>This will give you the percentage error in x. Remember to use ./ for element-wise division. For some situations you might want to divide by x or not take the absolute value.</p> <p>Then you can compare your error to your tolerance.</p> <pre><code>y1=(err1&lt;0.02); </code></pre> <p>This should give you a binary array as you desire.</p>