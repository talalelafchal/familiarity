Why doesn't this timed while loop work (Matlab)?
<p>I am semi-advanced and don't understand why this code does not execute properly. I want the code to execute something at a certain time. Thanks for your input. /Hank</p> <pre><code>running=1; while running==1 if hour(now)==17 &amp; minute(now)==4 &amp; second(now)==59 (Do Stuff) running=0; end end </code></pre>
<p>It's probably because <code>second</code> returns a double array, and with floating point double precision, the condition <code>second(now)==59</code> may never be true. I would replace it with something like: <code>abs(second(now)-59)&lt;1e-3</code> or whatever threshold you think is appropriate. The values returned by <code>hour</code> and <code>minute</code> are integer, so the equality test should be valid.</p>
<p>As far as I know, <a href="http://nl.mathworks.com/help/finance/second.html" rel="nofollow"><code>second</code></a> does not return an integer. Therefore the equality second(now) == 59 is ambigious. </p> <p>It is better to use <code>round(second(now))==59</code></p>