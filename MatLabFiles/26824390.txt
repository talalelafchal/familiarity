Subscripted assignment dimension mismatch in matlab
<p>I'm executing the following code to get a matrix multiplication between the image and <code>w</code>. Why do I get the <code>Subscripted assignment dimension mismatch</code> error.</p> <pre><code>[e,f] = size(outImg); m = zeros(e,f); w = [1 2 4 8; 16 32 64 128; 256 512 1024 2048; 4096 8192 16384 32768]; for i = 1:e-3 for j = 1:f-3 I = double(outImg((i:i+3),(j:j+3))); m(i,j) = I * w; end end </code></pre>
<p>This is carrying on from my comment, and now understanding what you're truly after. What you intended to do was perform an element-by-element multiplication of <code>I</code> and <code>w</code>, then <strong>sum</strong> all of the elements in the matrix. What I mean by element-by-element is that the corresponding values in one matrix get multiplied by the corresponding positions in the other matrix and that's the ending result. As such, you simply have to change the <code>*</code> operator to <code>.*</code>, then do a summation on this entire matrix. In other words, do this:</p> <pre><code>[e,f] = size(outImg); m = zeros(e,f); w = [1 2 4 8; 16 32 64 128; 256 512 1024 2048; 4096 8192 16384 32768]; for i = 1:e-3 for j = 1:f-3 I = double(outImg((i:i+3),(j:j+3))); m(i,j) = sum(sum(I .* w)); %// Change end end </code></pre> <p>Note the nested <code>sum</code> calls. This is because when summing over a matrix, by default it sums over all of the rows for each column and produces a single row vector that contains this result. If you want to sum every single value in the matrix, you must call <code>sum</code> one more time to sum over the row vector to compute the overall sum of the matrix. This should now equate to a single value, and you shouldn't get the dimension mismatch error anymore.</p> <p>Good luck!</p>