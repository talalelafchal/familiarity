indexing (querying) ndgrid output without actually constructing it
<p>Is there anyway to index a ndgrid output without actually constructing the output, because of memory issues? Suppose we need to construct <em>output</em> and ask for <em>i</em> th element</p> <pre><code>[output{1:n}] = ndgrid(1:k) [output{1}(i) ... output{n}(i)] </code></pre> <p>Is it possible to avoid the construction?</p>
<p>I believe you are looking for the function <a href="http://www.mathworks.com/help/matlab/ref/ind2sub.html" rel="nofollow"><code>ind2sub</code></a>:</p> <pre><code>[o{1:n}] = ind2sub( ones(1,n)*k, ii ); </code></pre> <p>The size of your ndgrid is <code>[k, k, ... k]</code> (<code>n</code> times) and you are trying to access the linear index <code>ii</code> into this <code>k^n</code> dimensional hyper-volume.</p> <hr> <p>PS,<br> It is best <a href="http://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab">not to use <code>i</code> as a variable name in Matlab</a>.</p>
<p>I had worked this out, so I am posting a complete answer. Write the following function in an m-file:</p> <pre><code>function output=my_ndgrid(varargin) in=nargin; sz=zeros(1,in-1); for i=1:in-1 sz(i)=length(varargin{i}); end ind=varargin{in}; [ndgrid_ind{1:length(sz)}] = ind2sub(sz,ind); for i=1:length(sz) output{i}(ind)=varargin{i}(ndgrid_ind{i}); end end </code></pre> <p>following command taken from <a href="http://stackoverflow.com/a/27010611/1586200">this</a> answer</p> <p><code>[ndgrid_ind{1:length(sz)}] = ind2sub(sz,ind);</code> </p> <p>In the above function, you can pass as many arguments as you want, same as you would pass to <code>ndgrid</code>. Just the last argument has to be the index (in your case the <code>i^th</code> element, so the index will be <code>i</code>).</p> <p>For example,</p> <pre><code>a=my_ndgrid(1:3:10,2:2:6,5:1:8,10); %asking for 10th element </code></pre> <p>It will be stored as <code>a{1}(10),...,a{3}(10)</code>, as you wanted.</p> <p>You get <code>[4 6 5]</code> as the answer which matches by creating <code>ndgrid</code> manually.</p>