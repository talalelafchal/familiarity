How to assign values to image in matlab
<p>I have 5 columns x, y, r, g, b with values of line number, column number, red, green and blue. The lines of this n by 5 matrix are not in a particular order, however they are consistent with image(x,y) and the r,g,b. </p> <p>I would like to do something like <code>I=uint8(zeros(480,640,3)</code> and just change those rgb values based on the n by 5 mat.</p> <p>Something along the lines of <code>I(mat(:,1), mat(:,2), 1)=mat(:,3) for red etc</code></p>
<p>An alternative:</p> <pre><code>INDr = sub2ind([480, 640, 3], mat(:, 1), mat(:,2), ones([numel(mat(:,3)), 1])); INDg = sub2ind([480, 640, 3], mat(:, 1), mat(:,2), 2*ones([numel(mat(:,3)), 1])); INDb = sub2ind([480, 640, 3], mat(:, 1), mat(:,2), 3*ones([numel(mat(:,3)), 1])); I=uint8(zeros(480,640, 3)); I(INDr)=mat(:,3); I(INDg)=mat(:,4); I(INDb)=mat(:,5); </code></pre> <p><strong>Note</strong> that in Matlab, the convention between axes is different between images and arrays.</p>
<p>The following uses the concept of <a href="http://es.mathworks.com/help/matlab/math/matrix-indexing.html" rel="nofollow">linear indexing</a> and the versatile <a href="http://es.mathworks.com/help/matlab/ref/bsxfun.html" rel="nofollow"><code>bsxfun</code></a> function:</p> <pre><code>m = 640; %// number of rows n = 480; %// number of columns I = zeros(m, n, 3, 'uint8'); %// initiallize directly as uint8 I(bsxfun(@plus, x(:)+(y(:)-1)*m, (0:2)*m*n)) = [r(:) g(:) b(:)]; %// fill values </code></pre> <p>Small example: for</p> <pre><code>m = 2; n = 3; x = [1 2 1]; y = [1 1 2]; r = [ 1 2 3]; g = [11 12 13]; b = [21 22 23]; </code></pre> <p>the code produces</p> <pre><code>I(:,:,1) = 1 3 0 2 0 0 I(:,:,2) = 11 13 0 12 0 0 I(:,:,3) = 21 23 0 22 0 0 </code></pre>