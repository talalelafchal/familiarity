Vector inputs when converting symbolic expression to function handler [Matlab]
<p>I have a symbolic ODE:</p> <pre><code>syms x1 x2 cs ks ms t2 real xx=[x1 x2]; fun_sym=[xx(2); (cs/ms)*(xx(1)^2-1)*xx(2) - (ks/ms)*xx(1)]; </code></pre> <p>I want to solve it using ODE function, but first I need to convert it into function handler:</p> <pre><code>v=matlabFunction(fun_sym,'vars', [t2,xx,cs,ks,ms]); [T,x]= ode15s(@(t2,xx) v,t,[1 0]); </code></pre> <p>where <code>t=[0:0.1:1]</code>. Matlab gives an error:</p> <pre><code>@(T2,XX)V returns a vector of length 1, but the length of initial conditions vector is 2. </code></pre> <p>I think this is because it interpret v as: <code>@(t2,x1,x2,cs,ks,ms)</code>, so it expects the second argument to be <code>x1</code>, which is a 1-by-1 element, even though I have defined v as <code>[t2,xx,...]</code>, where <code>xx</code> is a 1-by-2 element. How can I solve this issue?</p>
<p>This works, but you need to give values to the other parameters as well (<code>cs</code>, <code>ks</code>, and <code>ms</code>)</p> <pre><code>v=matlabFunction(fun_sym,'vars', [t2,x1,x2,cs,ks,ms]); [T,x]= ode15s(@(t2,xx) v(t2,xx(1),xx(2),cs,ks,ms),t,[1 0]); </code></pre>