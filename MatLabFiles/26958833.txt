MATLAB webcam background replacement
<p>how to change real time webcam background like this vid :</p> <p><a href="https://www.youtube.com/watch?v=YhJPbeI3vVU" rel="nofollow">https://www.youtube.com/watch?v=YhJPbeI3vVU</a></p> <p>can someone explain what to do and where to start , do i need chromakey,opencv or something like that ? it doesnt need to be video background, image will do.</p> <p>im using matlab and already done the GUI</p> <pre><code> %% object initialitation caminf = imaqhwinfo; mycam = char(caminf.InstalledAdaptors(end)); mycaminfo = imaqhwinfo(mycam); resolution = char(mycaminfo.DeviceInfo.SupportedFormats(end)); vd = videoinput(mycam, 1, resolution); %% Previewing video vidRes = get(vd, 'VideoResolution'); nBands = get(vd, 'NumberOfBands'); hImage = image(zeros(vidRes(2), vidRes(1), nBands)); preview(vd, hImage); </code></pre> <p>thx,</p> <p>regards.</p>
<p>Here's a bit of code that should hopefully get you in the right direction. Basically you take a background image and a foreground image and where the two differ by more than a tolerance threshold value, those pixels are considered 'foreground'. Replace these same pixels in the new background with those captured on the webcam to get your background replacement image. Do that with images taken from a video to get a dynamic background.</p> <pre><code>% User Input: threshVal = 0; % Tolerance for difference between 'webcam' background and foreground images %%%%%%%%%%%% % End User input % Read in some images % img1 is the webcam background image img1 = imread('http://i.imgur.com/toD56.jpg'); % bkgdImg is the image to replace the background of img1 with bkgdImg = imread('http://i.imgur.com/dIMct6u.jpg'); % Resize bkgdImg so it is the same size as img1. With two images from the same webcam this will not be necessary. bkgdImg = imresize(bkgdImg, [size(img1, 1), size(img1, 2)]); % Draw on 'webcam' image to make it different % In actual algorithm, img2 would be a second image captured with the % webcam with the same background but different foregrounds, such as a % person now standing in front of camera. img2 = img1; % Draw Ncircles number of random-colored circles. Details here are not % important except that it adds a unique foreground to the second 'webcam' % image Ncircles = 10; X = bsxfun(@plus,(1:size(img1, 1))',zeros(1,size(img1, 2))); Y = bsxfun(@plus,(1:size(img1, 2)),zeros(size(img1, 1),1)); for k = 1:Ncircles circleCenter = rand(1,2).*[size(img1, 1), size(img1, 2)]; circleRadii = 50*rand(1); B = sqrt(sum(bsxfun(@minus,cat(3,X,Y),reshape(circleCenter,1,1,[])).^2,3))&lt;=circleRadii; Npix = sum(B(:)); img2(repmat(B, 1, 1, 3) == 1) = reshape(255*ones(Npix, 1)*rand(1,3), [], 1); end % Take difference of background and foreground images % If difference is greater than threshVal, then add those pixels to the % mask. % The operation has to be done both ways because images are unsigned % integers and negative values are ignored. diffMask = ((img1 - img2) &gt; threshVal) | ((img2 - img1) &gt; threshVal); % Reduce mask by taking any value along 3rd dimension as logical true diffMask = any(diffMask, 3); % Replicate replacement background bkgdImgReplace = bkgdImg; % In regions where mask is true (ie where background ~= foreground from % webcam) replace those pixels in the replacement background image with the % foreground pixels bkgdImgReplace(repmat(diffMask, 1, 1, 3)) = img2(repmat(diffMask, 1, 1, 3)); % Display figure() subplot(2, 2, 1) imshow(img1) title('Original Background') subplot(2,2,2) imshow(img2) title('Modified Background w/ New foreground') subplot(2,2,3) imshow(bkgdImg) title('Replacement Background') subplot(2,2,4) imshow(bkgdImgReplace); title('Replacement Background w/ New foreground') </code></pre>