Incorrect angle detected between two planes
<p>I want to calculate the angle between 2 planes, Reference plane and Plane1. When I feed the X,Y,Z co-ordinates of pointCloud to the function plane_fit.m (by Kevin Mattheus Moerman), I get the coefficients:</p> <p>reference_plane_coeff: [-0.13766204 -0.070385590 130.69409]</p> <p>Plane1_coeff: [0.0044337390 -0.0013548643 95.890228]</p> <p><img src="https://i.stack.imgur.com/i7YrZ.png" alt="enter image description here"></p> <p>Next, I find the intersection of both planes, separately on the XZ plane and get a line equation; ref_line_XZ and plane1_line_XZ respectively. For this, I make the second coefficient 0. (Is this right?)</p> <pre><code>Aref = reference_plane_coeff(1); Cref = reference_plane_coeff(3); ref_line_XZ = [Aref Cref]; Arun = Plane1_coeff(1); Crun = Plane1_coeff(3); plane1_line_XZ = [Arun Crun]; angle_XZ = acos( dot(ref_line_XZ,plane1_line_XZ ) / (norm(ref_line_XZ) * norm(plane1_line_XZ )) ) </code></pre> <p>I get the angle_XZ value as 0.0012 rad. i.e. 0.0685 degrees</p> <p>When I plot these planes on a graph and view it, the angle seems to be much more than 0.0012 degrees. I'm talking about the angle made by the two lines after intersection of both planes with the XZ plane.</p> <p><img src="https://i.stack.imgur.com/uDljj.png" alt="enter image description here"></p> <p>What am I doing wrong?</p> <p>Also, when I tried to find angle between its normals, using:</p> <pre><code>angle_beta_deg = acosd( dot(reference_plane_coeff,Plane1_coeff) / (norm(reference_plane_coeff) * norm(Plane1_coeff)) ) </code></pre> <p>I got the angle as 0.0713.</p> <p>On visual inspection of both planes' plots and manually calculating from the plot, angle_XZ should be around 9 degrees.</p> <p><a href="http://in.mathworks.com/matlabcentral/fileexchange/22042-plane-fit/content/plane_fit.m" rel="nofollow noreferrer">plane_fit.m (by Kevin Mattheus Moerman)</a></p>