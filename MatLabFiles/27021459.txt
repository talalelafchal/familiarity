Wrong value while summing floats in matlab
<pre><code>while (tempsumf ~= sum) iter = iter + 1; tempsumf = tempsumf + fitness(iter, 1); if (tempsumf &gt; sel1) break; end end </code></pre> <p>I have an array(fitness) of floats here (mostly with exponent -6/-5) which i am summing up in tempsumf ... now when the loop goes to the second iteration, i get the value 5.000 which is utterly wrong. I can figure out the issue.</p>
<p>This is probably due to floating point precision. You shouldn't do equality or inequality tests on double precision numbers. Instead of <code>while (tempsumf ~= sum)</code>, use <code>while (abs(tempsumf - sum))&gt;1e-6)</code> or whatever threshold you deem appropriate.</p> <p>See the <a href="http://matlab.wikia.com/wiki/FAQ#Why_is_0.3_-_0.2_-_0.1_.28or_similar.29_not_equal_to_zero.3F" rel="nofollow">MATLAB wiki entry</a> on this topic for more information.</p> <p>Second possible cause of the error: you are overwriting the built-in function <code>sum</code> with your variable <code>sum</code>. Don't do that! Call your variable <code>my_sum</code> or something similar.</p>