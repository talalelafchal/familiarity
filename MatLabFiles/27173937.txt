How to reshape a matrix in Matlab after having vectorized some parts of it?
<p>I have a matrix <code>A</code> in Matlab</p> <pre><code>m=4; s=3; r=2; A=[1 2; 3 4; 5 6; 7 8; 9 10; 11 12; 13 14; 15 16; 17 18; 19 20; 21 22; 23 24]; %// (m*s) x r </code></pre> <p>and want to obtain the matrix </p> <pre><code>B=[1 7 13 19; 3 9 15 21; 5 11 17 23; 2 8 14 20; 4 10 16 22; 6 12 18 24]; %// (s*r) x m </code></pre> <p>without using cell (e.g. <code>mat2cell</code>). </p>
<h2>Code</h2> <pre><code>B = reshape(permute(reshape(A,s,m,[]),[1 3 2]),s*r,[]) </code></pre> <h2>Some explanation</h2> <p>There are basically three steps followed in the code listed above and those are listed below for a better understanding of this solution and hopefully must also guide you on your future queries on <code>reshaping</code> -</p> <ol> <li>With the innermost <code>reshape</code>: Cut <code>A</code> after every <code>s</code> rows and make a <code>3D</code> array out of it such that each <code>3D</code> slice holds elements of each column of <code>A</code>.</li> <li>With the only <code>permute</code>: Exchange <code>dim2</code> and <code>dim3</code>, so that we bring <code>dim3</code> elements closer to <code>dim1</code> elements as needed for reshaping in the next stage in accordance with the linear indexing used by MATLAB.</li> <li>With the outermost <code>reshape</code>: Reshape the elements to bring them to the desired shape (size).</li> </ol>
<p>You should use something like</p> <pre><code>cat(1,reshape(A(:,1),3,4),reshape(A(:,2),3,4)); </code></pre>