Is there any way to easily convert .mat file to .nc file?
<p>Trying to convert data from a <code>.mat</code> file into a <code>.nc</code> file, so I can view the data quickly using NCVIEW.</p> <p>The variable I want to save into a <code>.nc</code> file looks like this:</p> <ul> <li>Variable name: <code>Watts_Map</code></li> <li>Variable description: <code>Wattages plotted over a set of geographic grid cells</code></li> <li><p>Variable dimensions: <code>&lt;225x61x2920 double&gt;</code> </p> <p>So this would be a 3-D netCDF file. </p></li> </ul> <p>The matrix is <code>225</code>x<code>61</code>, for each timestep. There are <code>2920</code> timesteps. Each grid cell contains a wattage value. So there are <code>2920</code> matrices of dimensions <code>225</code>x<code>61</code>.</p> <ul> <li><p>Longitude: <code>0W</code> to <code>140W</code>, <code>0.625 deg</code> resolution, denoted by <code>225</code></p></li> <li><p>Latitude: <code>0N</code> to <code>30N</code>, <code>0.5 deg</code> resolution, denoted by <code>61</code></p></li> </ul> <p>There does not seem to be an intuitive way to do this. Trying <code>nccreate</code> and <code>ncwrite</code>.</p> <p>Any advice on how to do this?</p> <hr> <p>Here is the code I am trying:</p> <pre><code>% Clear out all data and clean up workspace clc; clear all; % load the .mat file to be converted to netcdf file %load('2000_ATL_Watts_Maps_inc_Land.mat'); % variable to be taken from .mat file and saved as netcdf file % Watts_Map = W/sq m % Dimensions: 225x61x2920 (lon x lat x time) % % Put another way, there are 2920 maps of size 225x61, containing W/sq m % values for each grid cell % % Resolution: longitude = 0.625 deg % latitude = 0.5 degree % time = starts at midnight on Jan 1st of the year, increments % every 3 hours. So timestep 1 is midnight on Jan 1st, % timestep 2 is 3am on Jan 1st, and so on. % Create and write data to netcdf file nccreate('test_files.nc','Watts','Dimensions',{'time' 2920 'lon' 225 'lat' 61}); </code></pre>
<p>Hope this gets you started:</p> <pre><code>%% Create !rm test_files.nc nccreate('test_files.nc','Watts','Dimensions',{'time' 2920 'lon' 225 'lat' 61}); nccreate('test_files.nc','lat','Dimensions',{'lat' 61}); nccreate('test_files.nc','lon','Dimensions',{'lon' 225}); nccreate('test_files.nc','time','Dimensions',{'time' 2920}); ncdisp('test_files.nc'); %% write dimensions % https://www.unidata.ucar.edu/software/netcdf/docs/netcdf/Dimensions.html %Latitude: 0N to 30N, 0.5 deg resolution, denoted by 61 ncwrite('test_files.nc','lat',0:.5:30); %Longitude: 0W to 140W, 0.625 deg resolution, denoted by 225 ncwrite('test_files.nc','lon',0:.625:140); % Time? %% write data ncwrite('test_files.nc','Watts',rand(2920,225,61)); </code></pre>