Matlab: Assigning same value to (different) fields in the same position of a struct array
<p>Suppose I have a <code>1x10</code> struct <code>my_struct</code> with two fields: <code>fieldA</code> and <code>fieldB</code>.</p> <p>How should I assign a scalar number (or any other entity) on a specific position for all fields in a more direct form?</p> <p>In other words, is there a way to do this:</p> <pre><code>my_struct(5).fieldA = pi; my_struct(5).fieldB = pi; </code></pre> <p>In a way like this: <code>my_struct(5).* = pi</code> or <code>my_struct(5) = deal(pi)</code>?</p>
<p>You can use a combination of <code>fieldnames</code> and <code>cell2struct</code> to programmatically build up a struct with the same value in all fields, and then do full-struct assignment.</p> <pre><code>function out = setAllFields(s, value) %SETALLFIELDS Build a scalar struct from template, replacing all field values % Where s is your template struct, and value is the value desired in all fields out = cell2struct(repmat({value}, [numel(fieldnames(s)) 1]), fieldnames(s)); </code></pre> <p>With that function defined, you can do the assignment like this, using single or multiple target indexes.</p> <pre><code>my_struct(5) = setAllFields(my_struct, pi); my_struct([2 4:6]) = setAllFields(my_struct, 'foo'); </code></pre>