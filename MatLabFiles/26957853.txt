Using VideoWriter to make a video from matrices of doubles. How to make it use imagesc rather than image
<p>I have a series of matrices of doubles, and I'm trying to get VideoWriter to put them together into a video. Just running:</p> <pre><code>outputVideo=VideoWriter('test.avi'); outputVideo.FrameRate=10; open(outputVideo); for p = 1:nFrames img = MATRIX; writeVideo(outputVideo,img); end close(outputVideo); </code></pre> <p>Works fine, apart from the fact that each frame looks just like what I get when I run:</p> <pre><code>image(MATRIX) </code></pre> <p>What I want, is for each frame to look like what I get when I run:</p> <pre><code>imagesc(MATRIX) </code></pre> <p>That is to say, it should scale the data to use the full range of the colourmap (if this is not done, I.E. if just 'image' is used, the frame is black).</p> <p>I've tried various different ways of doing this, all to no avail.</p> <p>Thanks in advance.</p>
<p>I don't get this issue when I use your code (with random images) but here is a possible workaround. Use imagesc to display the actual image in a figure, capture the content of the figure with getframe, and save that the data in your video:</p> <pre><code>clear clc outputVideo=VideoWriter('TestAVIImage.avi'); outputVideo.FrameRate=10; open(outputVideo); nFrames = 10; MATRIX = rand(500,500,nFrames); %// I just created images with random values. for p = 1:nFrames img = MATRIX(:,:,p); %// This line and the following can be reduced to only 1 line. hAx = imagesc(img); imgFrame = getframe(gcf); %// Capture figure's content writeVideo(outputVideo,imgFrame.cdata); %// The actual pixel values are in 'cdata'. pause(0.2) %// Just used to see the actual movie end close(gcf) close(outputVideo); </code></pre> <p>Hope that helps!</p>