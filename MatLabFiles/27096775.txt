How can I produce a MATLAB bar graph of categorical responses?
<p>I have a 646x108 array of 646 student responses to 108 exam questions. It was a MCQ exam and all the responses are A, B, C, or D, so those letters are the contents of the cell array. I've been instructed to create a graph similar to the following one:</p> <p><img src="https://i.stack.imgur.com/sN2TM.png" alt="enter image description here"></p> <p>I was told that the 'bar' function would work. However, it would not work with the cell array. </p> <p>I tried changing it to an array of double where A was converted to 1, B to 2, C to 3, D to 4. However, that still didn't work. It seemed to be not treating the responses as categorical, but averaging across the responses.</p> <p>When I'm working in the cell format, the data looks like this:</p> <p><img src="https://i.stack.imgur.com/NYw0N.png" alt="enter image description here"></p> <p>In other words, on Q1 person 1 answered A, and person 2 answered B. On Q2 both students answered D.</p> <p>When I converted that to double, the A became a 1, the B a 2, and so on.</p>
<p>Try this. First I created some sample data, for 10 students answering 5 questions:</p> <pre><code>choices=['A' 'B' 'C' 'D'] %// I'll use this variable later as well for m=1:10 for n=1:5 answers{m,n}=choices(randi(4)); end end answers </code></pre> <p>Then to find the frequency of each answer to each question, <code>freq</code>, I looked at each response individually, and counted up how many students gave that answer to that question. That gives <code>freq</code>, an array with 4 rows (one for each possible answer) and 5 columns (one for each question).</p> <pre><code>freq=zeros(length(choices),size(answers,2)); for i=1:length(choices) freq(i,:)=sum(strcmp(answers,choices(i))); end </code></pre> <p>Then to do the bar plot, you have to take the transpose of <code>freq</code>, and I divided it by the number of students so that the bars have height 1.</p> <pre><code>bar(freq.'/size(answers,1),'stack') legend('A','B','C','D','Location','NorthEastOutside') </code></pre> <p><img src="https://i.stack.imgur.com/m2UH7.png" alt="enter image description here"></p> <p>As a side note, <code>freq</code> can also be calculated without a <code>for</code> loop</p> <pre><code>freq=cell2mat(arrayfun(@(k) sum(strcmp(answers,choices(k))),1:length(choices),'UniformOutput',false).') </code></pre> <p>but it's not very readable or efficient.</p>