Why &quot;lighting phong&quot; is a must in order to create aminated GIF/movie successfully?
<p>I have the following Matlab code, which is used for gif and avi animation creation; Matlab <code>imwrite</code> is used to create frames of the gif; but I found <code>lighting</code> command is critical in order to successfully obtain the animated gif.</p> <pre><code>close all clear all clc; % nFrames = 50; % Preallocate movie structure. mov(1:nFrames) = struct('cdata', [],'colormap', []); % Create movie. figure('color','white'); Z = peaks(150); surf(Z,Z,'edgecolor','none'); view(3); axis vis3d tight equal off; v = axis; % for k = 1:nFrames clf; surf(1.5*sin(2*pi*k/20)*Z,Z,'edgecolor','none'); axis(v); axis off camlight; lighting phong mov(k) = getframe; [Inx,cmap]=rgb2ind(mov(k).cdata,256); if k==1 imwrite(Inx,cmap,'testoutx.gif','gif','DelayTime',0.25,'LoopCount',Inf) % else imwrite(Inx,cmap,'testoutx.gif','gif','WriteMode','append','DelayTime',0.25) % end end % Create AVI file. movie2avi(mov, 'myPeaks.avi', 'compression', 'None'); </code></pre> <p>When I comment "lighting phong", then the obtained gif is static, not animated. It seems only one of the frames is stored. I also tried to use <code>drawnow</code> before each <code>getframe</code> sentence, but that did not work. Why? How can I solve the problem without using <code>lighting</code>?</p> <p>The desired gif (obtained from the code above):</p> <p><img src="https://i.stack.imgur.com/ifmfj.gif" alt="enter image description here"></p> <p>The undesired gif with "lighting phong" commented:</p> <p><img src="https://i.stack.imgur.com/8BOgv.gif" alt="enter image description here"></p>