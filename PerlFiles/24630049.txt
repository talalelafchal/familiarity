How to load .bash_aliases from perl/bash script
<p>Lets say I have a perl script that setups a bash_aliases as follow</p> <p><em>source file: bash_aliases.sh</em></p> <pre><code>alias w="cd /var/www" </code></pre> <p><em>install.pl</em></p> <pre><code>#!/usr/bin/perl my $aliase_src= "${installation_dir}/bash_aliases.sh"; my $aliase_target="$ENV{'HOME'}/.bash_aliases"; if (! copy($aliase_src,$aliase_target)) { print "Failed to copy file $aliase_src to Destination:$aliase_target. Reason:$! ."; die; } [command required to load .bash_aliases file] </code></pre> <p>I should be able to go as follow:</p> <pre><code>./install.pl w </code></pre> <p>I dont want to :</p> <pre><code>./install.pl source ~/.bash_aliases w </code></pre> <p>I am unable to find command to load these aliases such that once the file is moved to home directory these aliases should be available to current script (install.pl) as well as all other script without running another command from command line e.g <code>source ~/.bash_aliases</code> OR <code>. .bash_aliases</code></p> <p><strong>Edit</strong> <em>auto_load_aliases.sh using <code>PROMPT_COMMAND</code> (trying to following l0b0, answer)</em></p> <pre><code>#!/bin/bash echo 'alias test="echo tested"' &gt; $HOME/.bash_aliases export PROMPT_COMMAND="$HOME/.bash_aliases"; </code></pre> <p>this also did not work :</p> <pre><code>./auto_load_aliases.sh test </code></pre> <p>What I expected what that auto_load_aliases.sh script sets the PROMPT_COMMAND , once it's set I have <code>test</code> aliase available.But that did not work. </p>
<p><code>~/.bash_aliases</code> is not loaded by Bash by default, it is just a common convenience to avoid putting too much stuff in <code>~/.bashrc</code>. If you want the aliases to be available in new Bash shells you have to <code>source ~/.bash_aliases</code> somewhere in <code>~/.bashrc</code>. Some popular distributions (I believe Ubuntu is one) does this by default.</p> <p>If you want to automatically <code>source ~/.bash_aliases</code> after changing it, you could try adding this in <code>~/.bashrc</code> to source it after each command:</p> <pre><code>PROMPT_COMMAND='source ~/.bash_aliases' </code></pre> <p>If your alias file is very complex, you could make this faster by using <code>inotifywait</code> and only reloading the file when it changes.</p> <p>Another way of loading aliases after changing them would be to replace the current shell with another one:</p> <pre><code>exec "$SHELL" </code></pre> <p>Bottom line, <em>something</em> has to change to automatically load new aliases. There is no built-in runtime configuration option in Bash to do this (and even then you'd have to enable that option).</p>