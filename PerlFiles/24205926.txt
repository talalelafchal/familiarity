Perl attempts to use wrong package
<p>i am very new to perl. I'm leraning how to use Mechanize package. I have example page. I don't know if it is good for learning cause it works in a strange way but still, i want to understand what's happening right now.</p> <p>First, i have written script which is getting directly content under page1:</p> <pre><code>my $mech = WWW::Mechanize::Frames-&gt; new(); my $mechFr = WWW::Mechanize::Frames-&gt; new(); my $url="page1 url"; $mech-&gt;get($url); my @frames = $mech-&gt;get_frames(); $mechFr= $frames[0]; print $mechFr-&gt;content(); </code></pre> <p>And this works fine. Then i was trying to get to this page from page0 and i have written this:</p> <pre><code>my $mech = WWW::Mechanize::Frames-&gt; new(); my $mechFr = WWW::Mechanize::Frames-&gt; new(); my $url="page0url"; $mech-&gt;get($url); $mech=$mech-&gt;follow_link(text_regex =&gt; qr/page1like/); print $mech-&gt;content(); my @frames = $mech-&gt;get_frames(); $mechFr= $frames[0]; print $mechFr-&gt;content(); </code></pre> <p>Content under mech afeter following link looks ok (i really am on page1), but then i get error <code>Can't locate object method "get_frames" via package HTTP:Headers" at (...)/Message.pm line 694"</code>. My package list is the same in both scripts:</p> <pre><code>use strict; use warnings; use WWW::Mechanize::Frames; </code></pre> <p>So my question is, what am i doing wrong?</p>
<p>According to the <a href="https://metacpan.org/pod/WWW%3a%3aMechanize#mech-follow_link" rel="nofollow"><code>WWW::Mechanize documentation</code></a> <code>$mech-&gt;follow_link(...)</code> returns an HTTP::Response object, you assign this result into your variable <code>$mech</code>. This effectively replaces the existing value of <code>$mech</code> with an HTTP::Response object.</p> <p>The HTTP::Response module has no method <code>get_frames()</code> as Perl correctly tells you. </p> <p>You need to store your HTTP response in a <em>separate</em> variable: </p> <pre><code>my $mech = WWW::Mechanize::Frames-&gt; new(); my $mechFr = WWW::Mechanize::Frames-&gt; new(); my $url="page0url"; $mech-&gt;get($url); my $http_response = $mech-&gt;follow_link(text_regex =&gt; qr/page1like/); print $http_response-&gt;content(); my @frames = $mech-&gt;get_frames(); $mechFr= $frames[0]; print $mechFr-&gt;content(); </code></pre>