PERL: Cant use variables in Sybase SQL Driver to MS SQL Server
<p>I'm trying to use a dynamically constructed query to get data from an ms sql server(2008) in perl.</p> <p>The sql-string looks like this:</p> <pre><code>$sql = (q/SELECT COUNT(DISTINCT COLUMNa) FROM TABLEa WHERE COLUMNb = '$var'/); </code></pre> <p>When I try to execute this I get the following error message:</p> <pre><code>DBD::Sybase::st execute failed: Server message number=245 severity=16 state=1 line=1 server=HOSTNAME text=Conversion failed when converting the varchar value '$var' to data type tinyint. at ./scriptname.pl line 32. </code></pre>
<p>q() is literal. You need qq() if you want $var interpolated.</p> <pre><code>$sql = qq/SELECT COUNT(DISTINCT COLUMNa) FROM TABLEa WHERE COLUMNb = '$var'/; </code></pre> <p>Also, I agree with the comment on SQL injection. You should use a bind variable instead.</p>