Perl: identification of unknown code
<p>I have to include a perl script into a web system for my work, however the original author is no longer here and no one else in the office knows perl.<br> I've only first dealt with perl this morning and i'm stuck trying to figure out a couple lines that maybe someone might be able to help with</p> <pre><code>1] $customer = $q-&gt;param('account') || ''; 2] $customer =~ s/[^\d]//g; 3] $customer ||= ''; 4] if( $customer and ( $customer =~ /^10\d{5}$/ or $customer eq '1' ) ) { 5] $no_error = 1; 6] } </code></pre> <p>I found out that line 2 removes all non-numeric values, but I am not so sure how that statement actually functions..?<br> Again, i'm unsure to what <code>=~ /^10\d{5}$/</code> means.<br> Line 3 is the main one i cannot figure out, i'm used to <code>||</code> meaning logical <code>OR</code>.</p>
<pre><code>$customer ||= ''; </code></pre> <p>is same as</p> <pre><code>$customer = $customer || ''; </code></pre> <p>or</p> <pre><code>if (!$customer) { $customer = ""; } </code></pre>
<p>1) Accept the parameter if it's a value that Perl considers "true", otherwise, an empty string.</p> <p>2) A regex substitution, eliminating any non-digits found in $customer.</p> <p>3) If <code>$customer</code> is a "false" Perl value, set it to an empty string.</p> <p>4) If <code>$customer</code> is a 'true' value, and either a 7-digit number starting with 10, or the string, '1'...</p> <p>5) Set <code>$no_error</code> to the numeric value 1.</p> <p>6) Close a block.</p> <p>The <code>||</code> and <code>||=</code> operators are explained in <code>perldoc</code> <a href="http://perldoc.perl.org/perlop.html" rel="nofollow">perlop</a>. In some cases, they're a lurking bug because "0" may be a legitimate value for the parameter, yet would trigger the 'or' clause, which is one reason why the <code>//</code> and <code>//=</code> operators were introduced in Perl 5.10. Of course if the current code isn't broken in its use of <code>||</code>, don't introduce a new bug by "fixing" it. ;)</p> <p>Regular expressions are explained in <a href="http://perldoc.perl.org/perlre.html" rel="nofollow">perlre</a>, <a href="http://perldoc.perl.org/perlrequick.html" rel="nofollow">perlrequick</a>, <a href="http://perldoc.perl.org/perlretut.html" rel="nofollow">perlretut</a>, and <a href="http://perldoc.perl.org/perlop.html" rel="nofollow">perlop</a>.</p> <p>What constitutes true and false values is described in <a href="http://perldoc.perl.org/perlintro.html" rel="nofollow">perlintro</a>, <a href="http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood" rel="nofollow">perlsyn</a> and <a href="http://perldoc.perl.org/perldata.html" rel="nofollow">perldata</a>.</p>