Perl parsing JSON code - why is my path wrong?
<p>I have been parsing json code found here: <a href="http://steamcommunity.com/market/listings/440/Name%20Tag/render/?count=10&amp;start=10" rel="nofollow">http://steamcommunity.com/market/listings/440/Name%20Tag/render/?count=10&amp;start=10</a> and trying to extract information from the data. (here is a parser to paste the response into: <a href="http://json.parser.online.fr/" rel="nofollow">http://json.parser.online.fr/</a>)</p> <p>I want to find out the</p> <pre><code>"steamid_lister":"76561198054594560", </code></pre> <p>value.</p> <p>I am using the following code to do so:</p> <pre><code>use JSON::XS; use WWW::Mechanize; use HTTP::Cookies; use LWP::UserAgent; use strict; use warnings; use LWP::Simple; my $url = "http://steamcommunity.com/market/listings/440/Name%20Tag/render/?count=10&amp;start=10"; my $json = get $url; my $data = decode_json $json; my @infoids = keys %{$data -&gt; {listinginfo}}; foreach my $infoid (@infoids) { print $infoid . "\n"; } foreach my $infoid (@infoids) { my $price = $data -&gt; {listinginfo}{$infoid}{converted_price} ?$data -&gt; {listinginfo}{$infoid}{converted_price} : 0 ; #Problem is here print $price . "\n"; } </code></pre> <p>When executed in the command prompt I get:</p> <pre><code>2837579576399030707 2837579576272398122 2828572377224672029 2836453676551501383 2837579576412912762 2837579576057748967 2837579576057701282 2837579576057640907 2837579576412827087 2836453676554468348 0 0 0 0 0 0 0 0 0 0 </code></pre> <p>The first set of numbers are the listing ids which are working fine however the 0s are the problem. I should be getting more numbers so I assume im referencing the "steamid_lister" object wrong on the commented line however im not sure how to fix this problem. Any help would be really greatly appreciated.</p> <p>Thank you for your time Seb Morris</p>
<p>The point is, that you try to access a key which does not exists <code>converted_price</code>! Just try it with <code>price</code></p> <pre><code>foreach my $infoid (@infoids) { my $price = $data-&gt;{listinginfo}-&gt;{$infoid}-&gt;{price} ? $data-&gt;{listinginfo}-&gt;{$infoid}-&gt;{price} : 0; print $price . "\n"; } </code></pre>