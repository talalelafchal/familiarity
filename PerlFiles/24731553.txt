Perl ::To find the no of occurenaces and max min value
<p>Please help me to find the no of occurrences in file. also to find the max and min values. Im able to find the no of occurrences.</p> <p>file</p> <pre><code>SQL :: select * from person ...etc , Time Taken :: 30 SQL :: select * from emp ...etc , Time Taken :: 5 SQL :: select * from home ...etc , Time Taken :: 20 SQL :: select * from emp ...etc , Time Taken :: 30 SQL :: select * from person ...etc , Time Taken :: 10 SQL :: select * from home ...etc , Time Taken :: 20 SQL :: select * from person ...etc , Time Taken :: 50 </code></pre> <p>output should be<code>enter code here</code></p> <pre><code>SQL No of occu total Min Max select * from person 3 90 10 50 select * from emp 2 35 5 30 </code></pre>
<pre><code>#!/usr/bin/perl # sql -&gt; {times, min, max} my $data = {}; while (&lt;&gt;) { if (m{SQL.*?(select.*?\.\.\.).*?Taken\s\:\:\s(\d+)}xmsi) { my ($sql, $time) = ($1, $2); my $times = $data-&gt;{$sql}-&gt;{times} || 0; my $min = $data-&gt;{$sql}-&gt;{min} || $time; my $max = $data-&gt;{$sql}-&gt;{max} || $time; $max = $time if $time &gt; $max; $min = $time if $time &lt; $min; $times++; $data-&gt;{$sql}-&gt;{min} = $min; $data-&gt;{$sql}-&gt;{max} = $max; $data-&gt;{$sql}-&gt;{times} = $times; } } print "SQL No of occu total Min Max\n"; foreach my $sql(sort keys %{$data}) { print "$sql $data-&gt;{$sql}-&gt;{times} total $data-&gt;{$sql}-&gt;{min} $data-&gt;{$sql}-&gt;{max}\n"; } </code></pre> <p>running:</p> <pre><code>stat.pl &lt;your data file&gt; </code></pre> <p>add total yourself.</p>