attribute comparision using XML::Twig
<p>I am having huge xml file like this:</p> <pre><code> &lt;List NAME="ANDREW" ENROLED="2" FEE="640" CONFORMATION="I"&gt; &lt;DATA&gt; &lt;HOUSE&gt; &lt;PRIMARY GROUP_ID="37496" SECTION="A"/&gt; &lt;PRIMARY GROUP_ID="37496" SECTION="B"/&gt; &lt;/HOUSE&gt; &lt;/DATA&gt; &lt;/List&gt; &lt;List NAME="SAM" ENROLED="4" FEE="640" CONFORMATION="O"&gt; &lt;DATA&gt; &lt;HOUSE&gt; &lt;PRIMARY GROUP_ID="36816" SECTION="A"/&gt; &lt;PRIMARY GROUP_ID="36816" SECTION="B"/&gt; &lt;/HOUSE&gt; &lt;/DATA&gt; &lt;/List&gt; &lt;List NAME="RAY" ENROLED="1" FEE="982" CONFORMATION="O"&gt; &lt;ADDRESS&gt; &lt;STREET&gt; &lt;PRIMARY GROUP_ID="36892" SECTION="A"/&gt; &lt;PRIMARY GROUP_ID="36892" SECTION="B"/&gt; &lt;/STREET&gt; &lt;/ADDRESS&gt; &lt;/List&gt; &lt;List NAME="MATHEW" ENROLED="3" FEE="467" CONFORMATION="I"&gt; &lt;DATA&gt; &lt;HOUSE&gt; &lt;PRIMARY GROUP_ID="37436" SECTION="A"/&gt; &lt;PRIMARY GROUP_ID="37436" SECTION="B"/&gt; &lt;/HOUSE&gt; &lt;/DATA&gt; &lt;/List&gt; &lt;List NAME="RAY" ENROLED="1" FEE="982" CONFORMATION="O"&gt; &lt;ADDRESS&gt; &lt;STREET&gt; &lt;PRIMARY GROUP_ID="36892" SECTION="A"/&gt; &lt;PRIMARY GROUP_ID="36892" SECTION="B"/&gt; &lt;/STREET&gt; &lt;/ADDRESS&gt; &lt;/List&gt; </code></pre> <p>i have to print the value of "FEE" and "GROUP_ID" if the CONFORMATION IS "O" and if the conformation is "I" i have to print that in separate line.</p> <p>i have used following program i got help for this</p> <pre><code>XML::Twig; my $phraser = XML::Twig-&gt;new(twig_handlers =&gt; {API_PORT =&gt; \&amp;process_list}); $phraser -&gt; parsefile("FS_CONF.xml"); sub process_list { my ( $twig, $list ) = @_; my $conformation = $list -&gt; att( 'LIST' ); my $fee = $list -&gt; att ( 'FEE' ); foreach my $primary ( $list -&gt; first_child ( 'DATA' ) -&gt; first_child ('HOUSE') -&gt; children() ) { my $group_id = $primary -&gt; att ( 'GROUP_ID' ); print "$conformation, $fee, $group_id\n"; } } </code></pre> <p>after getting printed two values it is showing error because all the tags are not same and showing error can't call method first child on undefined value.</p> <p>this is comming because of all the "first_child" are not similar.</p> <p>please help. </p>
<p>Change your handler to <code>List</code>.</p> <p>Use <code>CONFORMATION</code> for <code>$conformation</code>.</p> <p>Check for the <code>DATA</code> tag with <code>defined</code>.</p> <pre><code>use warnings; use strict; use XML::Twig; my $phraser = XML::Twig-&gt;new( twig_handlers =&gt; { List =&gt; \&amp;process_list } ); $phraser-&gt;parsefile("FS_CONF.xml"); sub process_list { my ( $twig, $list ) = @_; my $conformation = $list-&gt;att('CONFORMATION'); my $fee = $list-&gt;att('FEE'); if (defined $list-&gt;first_child('DATA')) { foreach my $primary ( $list-&gt;first_child('DATA')-&gt;first_child('HOUSE')-&gt;children() ) { my $group_id = $primary-&gt;att('GROUP_ID'); print "$conformation, $fee, $group_id\n"; } } } </code></pre>