selectively run perl script on all **.dat files containing text &quot;some_attr&quot; in directory and sub directories
<p>I want to run a perl script over all <strong>.dat</strong> files containing text <strong><em>"some_attr"</em></strong> in the specified directory and its sub directories. How can I do that? I can list all <strong>.dat files containing <em></strong>"some_attr"<strong></em> using '***grep -nri some_attr * ./'*</strong> and run perl script manually over greped files,but I want to automate this using perl</p>
<p>Assuming you have a Bash shell, you can use a simple for loop combined with grep: </p> <pre><code>for file in `grep -lr some_attr | uniq` do perl script_name.pl $file done </code></pre>
<p>You can use <a href="http://perldoc.perl.org/File/Find.html" rel="nofollow"><code>File::Find</code></a> or <a href="https://metacpan.org/pod/File%3a%3aFind%3a%3aRule" rel="nofollow"><code>File::Find::Rule</code></a>:</p> <pre><code>use strict; use warnings; use autodie; use File::Find::Rule; # find all the .dat files in . my @files = File::Find::Rule-&gt;file() -&gt;name( '*.dat' ) -&gt;in( '.' ); for my ($file) { my $data = do { open my $fh, '&lt;', $file; local $/; &lt;$fh&gt;; }; next if $data !~ /some_attr/; print $file, "\n"; } </code></pre>