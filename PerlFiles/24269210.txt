Assign a Perl Array to Javascript variable
<p>I was attempting to integrate Perl code with JavaScript and came across an issue where I simply wanted to see the output of an Array I have stored within Perl. The following code gives me the proper elements within the array I have stored but I'm not able to see the elements within JavaScript.</p> <pre><code>my @list_of_vendors; while(!$resultSet-&gt;EOF) { push @list_of_vendors, $resultSet-&gt;Fields("vendor")-&gt;Value; $resultSet-&gt;MoveNext; } print "The First Vendor is: " . $list_of_vendors[0]. "\n"; </code></pre> <p>This Prints out <code>The First vendor is: 3D Systems</code> The following code doesn't seem to give me the results I want...</p> <pre><code>print &lt;&lt;ONE; &lt;html&gt; &lt;body&gt; &lt;h4&gt; Test Vendor Array Javascript &lt;/h4&gt; &lt;p id="demo"&lt;/p&gt; &lt;script type="text/javascript" language="JavaScript"&gt; var myVendorArray = @list_of_vendors; document.write('&lt;p&gt; $list_of_vendors[0] is the same as myVendorArray[0] &lt;/p&gt;'); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; ONE </code></pre> <p>I thought this would give me <code>3D Systems is the same as 3D Systems</code> but it gives a blank for the html screen.</p> <p>Can anyone point out to me what I might be doing wrong? Or point me in the right direction to debug this using notepad++ or some other useful IDE for this. Thanks a bunch!!</p>
<p>Everything in your code's heredoc is interpolated with Perl but interpreted by the client as JavaScript. So if you write</p> <pre><code>@list_of_vendors = ("Alice","Bob","Charlie"); ... print &lt;&lt;EOF; ... &lt;script&gt; var list_of_vendors = @list_of_vendors; ... EOF </code></pre> <p>what the client will see is something like</p> <pre><code>var list_of_vendors = Alice Bob Charlie; </code></pre> <p>Perl has very good facilities for converting Perl data structures into the JSON notation, which is easily understood by JavaScript, so you should do something like:</p> <pre><code>use JSON; $list_of_vendors_json = encode_json(\@list_of_vendors); ... var list_of_vendors = $list_of_vendors_json; ... </code></pre> <p>in which case the browser would see something like:</p> <pre><code>var list_of_vendors = ["Alice","Bob","Charlie"]; </code></pre> <p>and the rest of your code would work as intended.</p>