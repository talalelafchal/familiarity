How to print multiple words from same line in Perl?
<p>I've been using this Perl regex script for a while now:</p> <pre><code>open DOC1, "&lt;", "list.txt" or die $!; open DOC2, "&gt; list.xls"; while (my $lines = &lt;DOC1&gt;) { if ($lines =~ m/([^\s]+(([a-z0-9._%+-]+\@)|([a-zA-Z0-9]{2,15}(\.|\-|_)[a-zA-Z0-9]{2,15})))/i) { print DOC2 lc($1), "\n"; } } close DOC2; close DOC1; </code></pre> <p>It works fine, but recently I've realized that it prints only the first match in each line. Once it finds a match and prints it, it jumps to the next line without further checking the current line. How can I solve this?</p>
<p>You want to use the <code>g</code> modifier (g for global, which saves your position in the string after a match is made, and allows you to find multiple matches), and then perform the regex in a <code>while</code> loop instead of an <code>if</code>. Try this:</p> <pre><code>open DOC1, "&lt;", "list.txt" or die $!; open DOC2, "&gt; list.xls"; while (my $lines = &lt;DOC1&gt;) { while ($lines =~ m/([^\s]+(([a-z0-9._%+-]+\@)|([a-zA-Z0-9]{2,15}(\.|\-|_)[a-zA-Z0-9]{2,15})))/gi) { print DOC2 lc($1), "\n"; } } close DOC2; close DOC1; </code></pre>