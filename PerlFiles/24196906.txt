Permission denied - readline() on closed filehandle
<p>I'm having a problem when trying to import a user list into Zentyal 3.4.</p> <p>The script I'm using is this:</p> <pre><code>#!/usr/bin/perl use strict; use warnings; use EBox; use EBox::Users::User; EBox::init(); my $usersMod = EBox::Global-&gt;getInstance()-&gt;modInstance('users'); my $parent = $usersMod-&gt;objectFromDN('ou=Promo 2022,ou=Alumnos,'.$usersMod-&gt;ldap-&gt;dn()); my $file = 'users.csv'; open (my $USERS, $file) or die "Can't open '$file': $!"; while (my $line = &lt;$USERS&gt;) { chomp ($line); my ($username, $givenname, $surname, $password) = split(';', $line); EBox::Users::User-&gt;create( uid =&gt; $username, parent =&gt; $parent, givenname =&gt; $givenname, surname =&gt; $surname, password =&gt; $password, ); } close ($USERS); 1; </code></pre> <p>It worked perfectly the first time I used it but now it gives a "Permission denied" error when it tries to open the file.</p> <p>Both the file intended to open and the script have <code>0777</code> permissions so any user should be able to do whatever the please with them.</p> <p>The script needs to be run as sudo (which I did).</p>
<p><em>Solved it by the OP in the comments.</em></p> <p>The relevant files had permissions <code>0777</code>. However, the containing folder <code>/home/angardi</code> was set to <code>0700</code>.</p> <p>Therefore, although I could read the files, perl didn't have permissions to read.</p>