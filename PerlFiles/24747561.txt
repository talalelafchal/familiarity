select undef, undef, undef .XX
<p>When I was initially learning Perl several years ago I found myself wanting to say something like:</p> <pre><code>sleep .07; </code></pre> <p>But this doesn't actually work.</p> <p>Someone taught me to use:</p> <pre><code>select undef, undef, undef, .07; </code></pre> <p>instead. </p> <p>I've always wondered: What does this mean, and why does it work? </p>
<p>In <a href="http://perldoc.perl.org/functions/select.html" rel="nofollow">the documentation for <code>select</code></a>, it is described like this:</p> <pre><code>... select RBITS,WBITS,EBITS,TIMEOUT This calls the select(2) syscall with the bit masks specified, which can be constructed using "fileno" and "vec", along these lines: $rin = $win = $ein = ''; vec($rin, fileno(STDIN), 1) = 1; vec($win, fileno(STDOUT), 1) = 1; $ein = $rin | $win; ... </code></pre> <p>Presumably this is just an arbitrary command with a timeout that has a higher precision than <code>sleep</code>. Which is why it works. This is also mentioned further down in the documentation:</p> <pre><code>You can effect a sleep of 250 milliseconds this way: select(undef, undef, undef, 0.25); </code></pre> <p><strong>TL;DR:</strong> It's a way to call the <code>select</code> function with a timeout.</p>
<p>That uses the third form of <a href="http://perldoc.perl.org/functions/select.html"><code>select</code></a> as documented:</p> <blockquote> <pre><code>select RBITS,WBITS,EBITS,TIMEOUT </code></pre> <p>This calls the <code>select(2)</code> syscall with the bit masks specified</p> <pre><code>.... </code></pre> <p>You can effect a sleep of 250 milliseconds this way:</p> <pre><code> select(undef, undef, undef, 0.25); </code></pre> </blockquote> <p>A better way to achieve this functionality is to use <a href="https://metacpan.org/pod/Time::HiRes"><code>Time::HiRes qw(usleep)</code></a></p> <pre><code>use Time::HiRes qw(usleep); usleep($microseconds); </code></pre>