Perl: difficulties with regular expression
<p>I have problem with making regular expression on perl, may be someone can help me. Input strings:</p> <pre><code>bss/216476/29/52/9___\000243477___agt-1319.jpg bss/216476/29/52/9___\000243477___agt-1319_1.jpg bss/216476/29/52/9___\000243477___agt-1319_2.jpg </code></pre> <p>What i expect to get:</p> <p>29 52 9 1319 or 29 52 9 1319 0</p> <p>29 52 9 1319 1</p> <p>29 52 9 1319 2</p> <p>My Regex works only with last 2 strings:</p> <pre><code>/\/(\d{2})\/(\d{2})\/(\d+).*-(\d+)_(\d{1})/ </code></pre> <p>As you can see in first line there is no picture number such _0.jpg and here is a problem. I had tried to make regex like</p> <pre><code>/\/(\d{2})\/(\d{2})\/(\d+).*-((\d+)_(\d{1}))|(\d+)/ </code></pre> <p>but looks like i'm wrong. Thank you for help.</p>
<p>Use a non capturing group <code>(?:...)</code> and a <code>?</code> to make it optional:</p> <pre><code>/\/(\d{2})\/(\d{2})\/(\d+).*-(\d+)(?:_(\d{1}))?/ </code></pre> <p>It also can clean up your regex some if you use a different delimiter in cases where you need to include a slash. Additionally, you can use the <code>/x</code> modifier so you can include spacing for readability:</p> <pre><code>use strict; use warnings; while (&lt;DATA&gt;) { if (m{ / (\d{2}) / (\d{2}) / (\d+) .*- (\d+) (?:_(\d{1}))? }x) { print join(" ", map {$_//''} ($1, $2, $3, $4, $5)), "\n"; } } __DATA__ bss/216476/29/52/9___\000243477___agt-1319.jpg bss/216476/29/52/9___\000243477___agt-1319_1.jpg bss/216476/29/52/9___\000243477___agt-1319_2.jpg </code></pre> <p>Outputs:</p> <pre><code>29 52 9 1319 29 52 9 1319 1 29 52 9 1319 2 </code></pre>