syntax checking for params with regex
<p>I know how much params $msg has but I cant figure out how to count the number of {x} in $cmd_data. If I had both the counts, I can compare and then see if the user entered enough params for the cmd.</p> <p>I've tried it with m/{(\d+)}/g and then using <strong>scalar</strong> to get the number of matches. But this always returned zero.</p> <p>The code that replaces {x} in $cmd_data with params from $msg.</p> <pre><code>my $syntax_error = 0; my @params = split(/\s+/, $msg); my $msg_param_count = @params; for(my $i = 1; $i &lt; $msg_param_count; $i++) { $cmd_data =~ s/\{$i\}/$params[$i]/g; } $server-&gt;command(sprintf("msg $target %s.", $cmd_data)); </code></pre> <p><strong>OUTPUT</strong></p> <pre><code>$msg = "!test param1 param2 param3"; $cmd_data = "test command: {1} {2} {3}"; $output = "test command: param1 param2 param3"; </code></pre>
<p>Count the number of matches inside your string:</p> <pre><code>use strict; use warnings; my $cmd_data = "test command: {1} {2} {3}"; print scalar(() = $cmd_data =~ m/{(\d+)}/g); </code></pre> <p>Outputs</p> <pre><code>3 </code></pre> <p>If your earlier question is a guide, I suspect this is an <a href="http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem">XY Problem</a> though.</p>