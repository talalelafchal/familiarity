Net::OpenSSH error handling
<p>I need my code to handle every kind or error that can be thrown by the <a href="https://metacpan.org/pod/Net%3a%3aOpenSSH" rel="nofollow"><code>Net::OpenSSH</code></a> module. I can't figure out how to do this using the <a href="https://metacpan.org/pod/Net%3a%3aOpenSSH#Error-handling" rel="nofollow"><code>$ssh-&gt;error</code></a> function.</p> <p>For example :</p> <pre><code>switch ($ARGV[2]) { case "OBS" { my $ssh = Net::OpenSSH-&gt;new("$user:$passwdobs\@$ARGV[1]"); $ssh-&gt;error and die "echec ssh : " . $ssh-&gt;error; } } </code></pre> <p>This code gives me error messages like this:</p> <pre><code>ssh: connect to host 126.120.180.250 port 22: Connection refused echec ssh : unable to establish master SSH connection: bad password or master process exited unexpectedly at sshscript.pl line 26. </code></pre> <p>These two error messages have nothing in common, the first tells me the real reason, and the second tells me WHO failed (the master ssh connection). It seems the only errors that OpenSSH can throw are the constants listed here: <a href="https://metacpan.org/pod/Net%3a%3aOpenSSH%3a%3aConstants" rel="nofollow"><code>Net::OpenSSH::Constants</code></a></p> <p>I would like my script to let me know <em>why</em> my connections failed, so I can send the errors to a database with the help of a separate <code>ssh_error.sql</code> file. Is this possible with OpenSSH module ?</p>