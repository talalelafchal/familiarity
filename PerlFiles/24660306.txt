Passing Variable with redirect in cgi/perl
<p>I have two cgi script. Login.cgi and welcome.cgi I want to pass variable between these two pages Here are the two pages i have</p> <pre><code>#!C:/Perl/bin/perl.exe -w #login.cgi use strict; use warnings; use CGI::Pretty qw(:all); my $cgi = new CGI; my $username = $cgi-&gt;param('username'); my $password = $cgi-&gt;param('password'); if ( ( $cgi-&gt;param('username') eq 'demo' ) &amp;&amp; ( $cgi-&gt;param('password') eq 'demo' ) ) { print $cgi-&gt;redirect("welcome.cgi"); } else { print header(); print start_html( -title =&gt; "Login" ); if ( $cgi-&gt;param('username') or $cgi-&gt;param('password') ) { print center( font( { -color =&gt; 'red' }, "Invalid input" ) ); } print generate_form(); print end_html(); } sub generate_form { return start_form, h1("Please Login"), p( "username", textfield('username') ), p( "password", textfield('password') ), p(submit), end_form; } </code></pre> <p>Another page welcome.cgi</p> <pre><code>#!C:/Perl/bin/perl.exe -w #welcome.cgi use warnings; use CGI::Pretty qw(:all); use strict; my $cgi=new CGI; my $username; print header(); print start_html("Welcome"),h1("Hello, $username"); print end_html(); </code></pre> <p>How do I get the username variable passed to welcome.cgi?</p>
<p>use <a href="https://metacpan.org/pod/CGI%3a%3aSession" rel="nofollow"><code>CGI::Session</code></a>.</p> <p>For a tutorial on all the different ways to pass information between scripts and why this implementation is a good choice, read <a href="https://metacpan.org/pod/CGI%3a%3aSession%3a%3aTutorial" rel="nofollow"><code>CGI::Session::Tutorial</code></a></p> <p>Implemented in your login script:</p> <pre><code>#login.cgi use strict; use warnings; use CGI::Pretty qw(:all); use CGI::Session; my $cgi = new CGI; my $session = CGI::Session-&gt;new($cgi) or die CGI-&gt;Session-&gt;errstr; my $username = $cgi-&gt;param('username') // ''; my $password = $cgi-&gt;param('password') // ''; if ( $username eq 'demo' &amp;&amp; $password eq 'demo' ) { $session-&gt;param(username =&gt; $username); print $cgi-&gt;redirect("welcome.cgi"); exit; } print $session-&gt;header(); print start_html( -title =&gt; "Login" ); if ( $username or $cgi-&gt;param('password') ) { print center( font( { -color =&gt; 'red' }, "Invalid input" ) ); } print start_form, h1("Please Login"), p( "username", textfield('username') ), p( "password", textfield('password') ), p(submit), end_form, end_html(); </code></pre> <p>And in your welcome script:</p> <pre><code>#welcome.cgi use strict; use warnings; use CGI::Pretty qw(:all); use CGI::Session; my $cgi = new CGI; my $session = CGI::Session-&gt;new($cgi) or die CGI-&gt;Session-&gt;errstr; my $username = $session-&gt;param('username'); print header(); print start_html("Welcome"),h1("Hello, $username"); print end_html(); </code></pre>
<p>You can either pass it directly (by encoding it in a <a href="https://metacpan.org/pod/URI%3a%3aQuery" rel="nofollow">query string</a> and adding that to the URL you are redirecting to) or you can store it in a <a href="https://metacpan.org/pod/CGI%3a%3aCookie" rel="nofollow">cookie</a> or a <a href="https://metacpan.org/pod/CGI%3a%3aSession" rel="nofollow">session</a> and then retrieve it in the other script.</p>
<p>I would have to slightly disagree with Mr.Miller here. CGI::Session is at present outdated in many regards especially due to:</p> <ol> <li>The method to set cookies is outdated, and does not adhere to the RFC6265</li> <li>The Cookie ID algorithm is not secure enough, the author has moved on to other projects.</li> </ol> <p>And thus should not be used unless for educational purposes. </p> <p>With regards to the original question, you can look at this simple tutorial <a href="http://practicalperl5.blogspot.in/2014/07/perl-login-script.html" rel="nofollow">http://practicalperl5.blogspot.in/2014/07/perl-login-script.html</a></p>