Perl how to read a line from a file handle that is an array element
<p>My perl script takes any number of files, opens them, and reads one line from each. But it's not working. Here's my code.</p> <pre><code>#!/bin/perl $numfile = scalar @ARGV; for ($i = 0; $i &lt; $numfile; ++$i) { open $fh[$i],"&lt;",$ARGV[$i]; $line[$i] = &lt;$fh[$i]&gt;; } for ($i = 0; $i &lt; $numfile; ++$i) { print "$i =&gt; $line[$i]"; } </code></pre> <p>Any ideas why this doesn't work? Is it illegal to store file handles in an array?</p> <p>I expect this to print the first line of each file. Instead I get</p> <pre><code>0 =&gt; GLOB(0x36d190)1 =&gt; </code></pre> <p>I am using perl v5.18.2</p>
<p>Use <code>readline</code> instead of <code>&lt;&gt;</code>.</p> <p><code>perlop</code> says:</p> <blockquote> <p>If what's within the angle brackets is neither a filehandle nor a simple scalar variable containing a filehandle name, typeglob, or typeglob reference, it is interpreted as a filename pattern to be globbed</p> </blockquote>
<p>Your <code>&lt;&gt;</code> is being interpreted as a file <a href="http://perldoc.perl.org/functions/glob.html" rel="nofollow"><code>glob</code></a> instead of a <a href="http://perldoc.perl.org/functions/readline.html" rel="nofollow"><code>readline</code></a>.</p> <p>Use the following to explicitly specify your intent:</p> <pre><code>$line[$i] = readline $fh[$i]; </code></pre>
<p>[Not an answer, but a comment that doesn't fit as a comment]</p> <p>Always use <code>use strict; use warnings;</code>. You are severely handicapping yourself without them.</p> <p>You don't need to use multiple handles since you never need more than one at a time.</p> <p>Some other cleanups:</p> <pre><code>#!/bin/perl use strict; use warnings; my @first_lines; for my $qfn (@ARGV) { open(my $fh, '&lt;', $qfn) or die("Can't open $qfn: $!\n"); push @first_lines, scalar( &lt;$fh&gt; ); } for my $i (0..$#first_lines) { print "$i =&gt; $first_lines[$i]"; } </code></pre>