How can I support rule definition from a user for my business logic processing?
<p>I have a case where I have an existing method that does a specific kind of processing. I have setup a database table that it checks and if a specific value in a column exists it uses the value in one of the columns.</p> <p>Example: let's say that I have a method that charges a user. And I have in the table a row that has a column for the country and a column for reduction percentage. So while I am processing the user if the user's country exists in the table I use the value of the column to reduce the price. So far so good.</p> <p>My question is how could I enhance my design in order to add more general/complex rules? </p> <p>E.g. I would like to support some kind of interface that the user specifies rules e.g. a user's age or a product weight etc and based on this rules my code processing can figure out how to apply them? </p> <p>I mean how could I extend my simple table and business logic processing with the country/percentage values to a small rule based setup? </p> <p>I don't need really complex rules. Just the ability to be let the define a rule if needed</p>
<p>You have to support a certain set of operators, as well as possible fields to be checked against the rule and certain events when the rule is fullfilled. </p> <p>I would suggest something like this: <a href="http://jsfiddle.net/97y2G/" rel="nofollow">jsFiddle</a></p> <pre><code>&lt;table&gt; &lt;tr&gt; &lt;td&gt;Field&lt;/td&gt; &lt;td&gt; &lt;select&gt;&lt;option&gt;Country&lt;/option&gt;&lt;option&gt;Age&lt;/option&gt;&lt;/select&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Operator&lt;/td&gt; &lt;td&gt;&lt;select&gt;&lt;option&gt;greater than&lt;/option&gt;&lt;option&gt;smaller than&lt;/option&gt;&lt;option&gt;not empty&lt;/option&gt;&lt;/select&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Value&lt;/td&gt; &lt;td&gt;&lt;input id="value" type="text" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;action&lt;/td&gt; &lt;td&gt;&lt;select&gt;&lt;option&gt;10% discount&lt;/option&gt;&lt;option&gt;other stuff&lt;/option&gt;&lt;option&gt;other stuff 2&lt;/option&gt;&lt;/select&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; </code></pre> <p>That's just a very quick example of how it could look. You can add any operators and actions you want. You could also include a target field for example. But what's actually in the dropdowns depends on your requirements.</p>