Unable to install HTML::TreeBuilder::XPath with cpanm
<p>I'm trying to install HTML::TreeBuilder::XPath as user. but I get this error :</p> <pre><code>Building and testing HTML-Parser-3.71 ... FAIL ! Installing HTML::Entities failed. See /home/user/.cpanm/build.log for details. </code></pre> <p>So if I take a look at this file <em>/home/user/.cpanm/build.log</em> I get this error :</p> <pre><code>Result: FAIL Failed 3/48 test programs. 0/423 subtests failed. make: *** [test_dynamic] Error 255 -&gt; FAIL Installing HTML::Entities failed. See /home/user/.cpanm/build.log for details. Searching HTML::Parser on cpanmetadb ... Already tried HTML-Parser-3.71. Skipping. Already tried HTML::Tagset. Skipping. -&gt; FAIL Bailing out the installation for HTML-Tree-5.03. Retry with --prompt or --force. -&gt; FAIL Bailing out the installation for HTML-TreeBuilder-XPath-0.14. Retry with --prompt or --force. 3 distributions installed </code></pre> <p>So I try to manualy install <em>HTML::Entities</em> and I get this error :</p> <pre><code> Successfully installed HTML-Tagset-3.20 Building and testing HTML-Parser-3.71 ... FAIL ! Installing HTML::Entities failed. See /home/user/.cpanm/build.log for details. 1 distribution installed Can't locate HTML/Tagset.pm in @INC (@INC contains: /home/user/.cpanm/work/1403630727.28688/HTML-Parser-3.71/blib/lib /home/user/.cpanm/work/1403630727.28688/HTML-Parser-3.71/blib/arch /etc/perl /usr/local/lib/perl/5.14.2 /usr/local/share/perl/5.14.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14 /usr/local/lib/site_perl .) at /home/user/.cpanm/work/1403630727.28688/HTML-Parser-3.71/blib/lib/HTML/TokeParser.pm line 10. </code></pre> <p>So it say it can't locate HTML::Tagset, but it has been installed just a few line before ! And at the end, I get this errors :</p> <pre><code>Result: FAIL Failed 3/48 test programs. 0/423 subtests failed. make: *** [test_dynamic] Error 255 -&gt; FAIL Installing HTML::Entities failed. See /home/user/.cpanm/build.log for details. 1 distribution installed </code></pre> <p>and if I take a look at /home/user/.cpanm/build.log I get exactly the same output.</p> <p>What's wrong please ?</p>
<p>Given that you cannot find the HTML::Tagset module from the command line, it is possible you did not actually install it, despite being told that you had.</p> <p>One other test for it wold be:</p> <pre><code> $ perldoc HTML::Tagset </code></pre> <p>Then I would look for it using <a href="http://unixhelp.ed.ac.uk/CGI/man-cgi?locate%201" rel="nofollow">locate(1)</a></p> <pre><code> $ locate HTML/Tagset.pm </code></pre> <p>You may get a lot of output that you'll have to go through, or you might get none. You might be told that the database that locate relies on is not initialized, or is out of date. You can either refresh the database, or try <a href="http://unixhelp.ed.ac.uk/CGI/man-cgi?find%201" rel="nofollow">find(1)</a> </p> <pre><code> $ find / -name 'Tagset.pm' -print | less </code></pre> <p>If you still cant find it, or you grow tired of searching, then just fire up your favorite CPAN client, and install <code>HTML::Tagset</code> and then <code>HTML::Entities</code> explicitly.</p>
<p>I havent told cpanminus to use my local library.</p> <p>Here is the solution to install all module as user :</p> <pre><code>cd ~/; cpanm local::lib; echo 'eval `perl -I$HOME/perl5/lib/perl5 -Mlocal::lib`' &gt;&gt; ~/.bashrc ; source ~/.bashrc; </code></pre> <p>after that, I can install all modules and dependancies as user with</p> <pre><code>cpanm module::name </code></pre>