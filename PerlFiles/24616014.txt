Running three programs in the commandline, or script for recording CPU utilization while program is running
<p>I'm trying to run 3 programs in the commandline like this:</p> <pre><code>program1; program2; program3 </code></pre> <p>I want program1 to run while program2 is running. Once program2 naturally terminates, I want program3 to explicitly terminate program1.</p> <p>The purpose of this is so I can record the CPU utilization while the program is running for benchmarking purposes.</p> <p>Here is an idea of what I want:</p> <pre><code>mpstat 1 &amp; &gt; CPUutil.txt ; ./a.out | tee p.txt ; perl -e '//code to kill program1' </code></pre> <p>If you can think of a solution that can be done entirely in a Perl script using system()/fork() instead of using only the commandline that would be just as good.</p>
<p>You want to put <code>program1</code> into the background with <code>&amp;</code>:</p> <pre><code>program1&amp;; program2; kill $! </code></pre> <p>then it will run along with <code>program2</code>. <code>kill $!</code> (<code>$!</code> being the pid of most recently backgrounded process -- i.e. <code>program1</code>) will start after <code>program2</code> terminates. If <code>program1</code> is still running, <code>kill $!</code> will terminte it.</p>