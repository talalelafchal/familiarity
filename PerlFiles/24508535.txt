Perl Regex to ignore blank line
<p>I have a perl expression which displays the numeric digit from the last line of thetext file. My perl expression is as below</p> <pre><code>tail -1 new.txt | perl -e 'while (&lt;&gt;) {s/----//; s/:.*$//; print "$_\n" ;}' </code></pre> <p>which results as <code>109</code>, and new.txt is: </p> <pre><code>----109:new change no blank lines below this </code></pre> <p>Now how can I change the expression so that even if it finds blank lines below <code>----109:new change</code> it skips them and returns <code>109</code> only?</p> <p>My new.txt looks like as below</p> <pre><code>Create TAble &lt;TAble name&gt; ----109:new change1 Update Table &lt;TAble name&gt; ----110:new change2 Drop table &lt;tablename&gt; ----111:new change3 &lt;empty line&gt; &lt;empty line&gt; </code></pre> <p>as per this text file it should give 111 as result though there are many blank lines after last non empty line</p> <p>Summary of my requirement is </p> <p>I need to display 111 as a result no matter how many blank lines and whitespaces are there in the end.</p>
<p>Add <code>next unless $_;</code> into your loop to skill completely empty lines. However tail -1 will only ever give you the last line so you would need to start further back in the file, like this:</p> <pre><code>tail -5 new.txt | perl -e 'while (&lt;&gt;) {next unless $_; s/----//; s/:.*$//; $last=$_; } print "$last\n";' </code></pre> <p>Replace -5 with the largest number of empty line you could have. This will print the last number seen in the file.</p>
<p>You are saying you need to process last non-empty line. This is how you get it: </p> <pre><code>tac new.txt | sed -e '/./,$!d' | head -n 1 </code></pre> <p>You can pipe it to your perl command. Or to e.g. this one:</p> <pre><code>| perl -pe 's/\D*(\d+):.*/$1/' </code></pre> <p>Putting all together:</p> <pre><code>tac new.txt | sed -e '/./,$!d' | head -n 1 | perl -pe 's/\D*(\d+):.*/$1/' </code></pre> <p>returns <code>111</code> for your provided sample.</p>
<p>It will print number only when one found after <code>----</code>,</p> <pre><code>tail -1 new.txt | perl -lne 'print $1 if /----(\d+)/' </code></pre> <ul> <li><code>-l</code> implicit line chomp, and adds newline after <code>print</code></li> <li><code>-n</code> implicit <code>while(&lt;&gt;){ }</code> loop around code</li> </ul> <p>update: to pick only last number,</p> <pre><code>perl -lne '$num =$1 if /----(\d+)/ }{print $num' new.txt </code></pre>