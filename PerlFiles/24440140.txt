How can I constrain an SQLite database field using Perl?
<p>I'm building a SQLite database using Perl. </p> <p>Here's an example of my code so far</p> <pre><code>my $stmt = qq( CREATE TABLE PBS_control_data ( Antibody TEXT PRIMARY KEY NOT NULL, Raw_data FLOAT NOT NULL, Normalized_data FLOAT NOT NULL ) ); my $rv = $dbh-&gt;do($stmt); if ($rv &lt; 0) { print "$dbh::errstr"; } else { print "Table created"; } </code></pre> <p>I have six items in the <code>Antibodies</code> field and I want to constrain the field so that you <em>must</em> enter one of those six names as a way of preventing mistakes.</p> <p>How can this be done?</p>
<p>I think you're looking in the wrong place. You should use simple Perl code to verify the data you're entering into the database</p> <p>You <em>could</em> apply a <code>CHECK</code> constraint to the column and just try inserting whatever the user enters, but that would be sloppy programming</p>
<p>To let the database check that a filed value has one of six values, use a CHECK constraint like this:</p> <pre class="lang-sql prettyprint-override"><code>CREATE TABLE MyTable ( MyField TEXT CHECK(MyField IN ('a', 'b', 'c', 'd', 'e', 'f')), [...] ); </code></pre>