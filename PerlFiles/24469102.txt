perl tk gui to show script stdout and stderr in text widget
<p>I have a GUI that runs a script from a command button, but how can I get it to display output in the text widget?</p> <p>If I wanted to display the output via a logfile insert, could I have the command on the same button/sub as the run button?</p> <pre><code>use warnings; use strict; use Tk; use Tk::Text ; use POSIX 'strftime'; my $DATE = strftime("Report.pl for %dth %b %Y" , localtime()); my $mw = MainWindow-&gt;new; my $filename = "c:\\Temp\\perl.txt"; $mw-&gt;geometry("720x500"); $mw-&gt;title(" backupadmin "); my $main_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; 'top', -fill =&gt; 'x'); my $left_frame = $main_frame-&gt;Frame(-background =&gt; "snow2")-&gt;pack(-side =&gt; 'left', -fill =&gt; 'y'); my $right_frame = $main_frame-&gt;Scrolled("Text", -scrollbars =&gt; 'se',-background =&gt; "black",-foreground =&gt; "yellow",-height =&gt; '44')-&gt;pack(-expand =&gt; 1, -fill =&gt; 'both'); my $failures_button = $left_frame-&gt;Button(-text =&gt; " $DATE ", -command =&gt; [\&amp;runscript])-&gt;pack; my $Close_button = $left_frame-&gt;Button(-text =&gt; ' Close ', -command =&gt; [$mw =&gt; 'destroy'])-&gt;pack; my $Help_button = $left_frame-&gt;Button(-text =&gt; " Help Guide ", -command =&gt; [\&amp;load_file])-&gt;pack(-side =&gt; "bottom"); my $Close_help = $left_frame-&gt;Button(-text =&gt; ' Close Help ', -command =&gt; [$right_frame =&gt; \&amp;clear_file])-&gt;pack(-side =&gt; "bottom"); MainLoop; sub runscript { system("report.pl"); } sub load_file { open (FH, "$filename"); while (&lt;FH&gt;) { $right_frame-&gt;insert("end", $_); } close (FH); } sub clear_file { $right_frame-&gt;('quit'); } </code></pre>
<p>If your report.pl script outputs to STDOUT, then you could try something like this in your runscript callback:</p> <pre><code>sub runscript { right_frame-&gt;delete('1.0','end'); my $text = `report.pl`; $right_frame-&gt;insert('end', $text); } </code></pre> <p>Alternatively, if report.pl outputs to c:\temp\perl.txt then you could try the following:</p> <pre><code>sub runscript { right_frame-&gt;delete('1.0','end'); system("report.pl"); load_file(); } </code></pre>