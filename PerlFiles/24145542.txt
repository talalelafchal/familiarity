perl one liner + remove password from script by perl one liner line
<p>I use a perl one liner in my bash script ,</p> <p>in order to remove the password from the script ( because security issues , itâ€™s not bad solution when we want to remove password from scripts )</p> <p>the problem is when I run the bash script , the perl one line delete his line , </p> <p>the word after: <strong>export PASSORD=</strong></p> <p>please advice what need to update in the perl one liner line in order to ignore the removing of the word in the perl line ?</p> <p>remark - the export ... line not in the begining og the line</p> <p>perl one liner line from my script:</p> <pre><code> perl -i -pe 's/(?&lt;=export PASSORD=).*//' /tmp/script.bash </code></pre> <p>the script before we run it</p> <pre><code> more /tmp/script.bash #!/bin/bash export LOGIN=root export PASSORD=JH&amp;*(@%VTVTB /var/cti/download_password.ksh $PASSORD $LOGIN perl -i -pe 's/(?&lt;=export PASSORD=).*//' /tmp/script.bash </code></pre> <p>the script after we run it</p> <pre><code> more /tmp/script.bash #!/bin/bash export LOGIN=root export PASSORD= /var/cti/download_password.ksh $PASSORD $LOGIN perl -i -pe 's/(?&lt;=export PASSORD= </code></pre>
<p>You can change the one-liner so it can only have whitespace in front of the match:</p> <pre><code>perl -i -pe 's/^\s*export PASSORD=\K.*//' /tmp/script.bash </code></pre> <p>This uses the <code>\K</code> flag which requires Perl 5.10.</p> <p>Alternatively, put one of the letters in a character class (<code>[]</code>) so the regex no longer matches its literal self:</p> <pre><code>perl -i -pe 's/(?&lt;=export PASSOR[D]=).*//' /tmp/script.bash </code></pre>
<p>You can match space by <code>[ ]</code> to avoid matching particular line,</p> <pre><code>perl -i -pe 's/(?&lt;=export[ ]PASSORD=).*//' /tmp/script.bash </code></pre>