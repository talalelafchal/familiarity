Perl - Run script remotely through SSH that includes a require directive
<p>Consider the following 2 scripts :</p> <p><strong><code>main.pl</code></strong></p> <pre><code>#!/usr/bin/env perl require 'lib.pl'; testSub('Hello World'); </code></pre> <p><strong><code>lib.pl</code></strong></p> <pre><code>sub testSub { my ($input) = @_; print $input, "\n"; } 1; </code></pre> <p>I need to run <code>main.pl</code> script remotely through SSH using sudo while including <code>lib.pl</code> as a dependency. </p> <p>I know how to run a single Perl script through SSH using <code>sudo</code> :</p> <pre><code>$ ssh user@host 'sudo perl' &lt; /path/to/local/perl/script </code></pre> <p>But, in this case, the following error is immediately raised :</p> <pre><code>Can't locate libs.pl in @INC (@INC contains: /usr/lib/perl5/5.10.0/x86_64-linux-thread-multi /usr/lib/perl5/5.10.0 /usr/lib/perl5/site_perl/5.10.0/x86_64-linux-thread-multi /usr/lib/perl5/site_perl/5.10.0 /usr/lib/perl5/vendor_perl/5.10.0/x86_64-linux-thread-multi /usr/lib/perl5/vendor_perl/5.10.0 /usr/lib/perl5/vendor_perl .) at - line XX. </code></pre> <p>But how could I do the same while including another script as a dependency ? </p> <p>Thanks all in advance.</p>
<p>Perl can only look at the local file system for includes and can not call back through a ssh channel to get data. So you either need to transfer the libs.pl to the other side before executing the program or just include its content directly in your program.</p> <p>If you don't like to do this maybe Object::Remote can help you. But don't ask me how to use it, I've only heard a great talk about it. </p>