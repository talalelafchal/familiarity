program is terminated after else condition in perl
<p>After encountering the else condition(invalid url) loop is terminated and not processing further urls. 2. even if the node fails in xpath it is not printed in screen or file.I want to print that in both file and screen (node exception)</p> <pre><code>use LWP::Simple; use File::Compare; use HTML::TreeBuilder::XPath; use LWP::UserAgent; use Win32::Console::ANSI; use Term::ANSIColor; sub crawl_content{ { open(FILE, "C:/Users/jeyakuma/Desktop/input/input.txt"); { while(&lt;FILE&gt;){ chomp; $url=$_; foreach ($url){ $domain) = $url =~ m|www.([A-Z a-z 0-9]+.{3}).|x; } do 'C:/Users/jeyakuma/Desktop/perl/mainsub.pl'; &amp;domain_check(); my $ua = LWP::UserAgent-&gt;new( agent =&gt; "Mozilla/5.0" ); my $req = HTTP::Request-&gt;new( GET =&gt; "$url" ); my $res = $ua-&gt;request($req); if ( $res-&gt;is_success ){ print "working on $domain\n"; binmode ":utf8"; my $xp = HTML::TreeBuilder::XPath-&gt;new_from_url($url); my @node = $xp-&gt;findnodes_as_string("$xpath") or print "couldn't find the node\n" ; open HTML, '&gt;:encoding(cp1252)',"C:/Users/jeyakuma/Desktop/ project/data_$date/$site.html"; foreach(&lt;@node&gt;){ print HTML @node; close HTML ; } } else{ print color("green"), "$domain Invalid url\n", color("reset") and open FILE,"&gt;C:/Users/jeyakuma/Desktop/log.txt"; print FILE " $domain Invalid URL"; } } } } } do 'C:/Users/jeyakuma/Desktop/perl/comparefinal.pl'; compare_result(); } </code></pre>
<p>The <code>else</code> condition reopens <code>FILE</code> for writing to another file. Thus, at the next iteration of the <code>while (&lt;FILE&gt;)</code> loop, Perl will attempt to read from <code>FILE</code> and fail (because it's now only available for writing, not reading), and the loop will end. You need to use a name other than <code>FILE</code> in the <code>else</code> condition.</p>