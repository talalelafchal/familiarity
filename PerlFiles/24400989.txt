Find a String occurrence between Two occurrences of other
<p>I've a very long file as follows.</p> <p>Input file :-</p> <pre><code>Text Point Blah Blah Blah Blah Blah Blah String Blah Blah Blah Blah Blah Blah Text Point Blah Blah Blah Blah Blah Blah Text Point String Blah Blah Text Point Blah Blah Blah String Blah Blah Blah Text Point Blah Blah String Blah </code></pre> <p>After each Occurrence of a 'Text Point', and before the next occurrence, I expect 'String' to occur at maximum once. I've to extract string if it is occurring between Two consecutive 'Text point's to a output file Or I've to put a dash if it is not occurring. </p> <p>In this case, I need a output like this</p> <pre><code>String - String String String </code></pre> <p>I tried using following command</p> <pre><code>sed -n '/Text point/{:a;N;/^\n/s/^\n//;/Text point/{p;s/.*//;};ba};' $1 | grep "String" &gt;&gt; Outfile </code></pre> <p>But the problem with this is when string isn't found it will not append anything to outfile. So please help me out with the code. Thanks.</p>
<p>I have a solution with <em>perl</em></p> <pre><code>use strict; use warnings; $/="Text Point"; while(&lt;&gt;) { if(/String/m) { print "String \n" ; } else{ print "- \n" ; } } </code></pre>
<pre><code>awk '/^Text Point/{print p; p="-" } /String/{ p=$0} END{print p}' input </code></pre>
<p>Using a perl one-liner</p> <pre><code>perl -0777 -ne 'print /(.*String.*\n)/ ? $1 : "-\n" for split /(?=Text Point)/' file </code></pre> <h3>Explanation:</h3> <p><strong>Switches</strong>: </p> <ul> <li><code>-0777</code>: Slurp entire file</li> <li><code>-n</code>: Creates a <code>while(&lt;&gt;){...}</code> loop for each &ldquo;line&rdquo; in your input file. </li> <li><code>-e</code>: Tells <code>perl</code> to execute the code on command line. </li> </ul>