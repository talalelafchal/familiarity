Image::Magick draw a blurred circle
<p>Have an background image. (for this example the <code>mesh.png</code>)</p> <p>To the image need add one circle, with blurred border. Currently have this:</p> <pre><code>use 5.014; use warnings; use Image::Magick; my $bgimg = Image::Magick-&gt;new(); $bgimg-&gt;Read('png:mesh.png'); draw_my_circle($bgimg, 150, 150, 100); #img, center_x, center_y, radius $bgimg-&gt;Write("win:"); #display sub draw_my_circle { my($img, $center_x, $center_y, $radius) = @_; $img-&gt;Draw( fill =&gt; 'black', points =&gt; "$center_x,$center_y @{[$center_x + $radius]},$center_y", primitive =&gt; 'circle', ); } </code></pre> <p>This produces the next image:</p> <p><img src="https://i.stack.imgur.com/2MM0X.png" alt="black circle on a mesh"></p> <p>but I need a circle with "blurred edge", like the next (created manually)</p> <p><img src="https://i.stack.imgur.com/OVZ4o.png" alt="blurred circle on the mesh"></p> <p>Can anyone help how to get a such blurred circle with <a href="https://metacpan.org/pod/Image::Magick" rel="nofollow noreferrer">Image::Magick</a>?</p> <p>If someone want the <code>mesh.png</code>, it is created with the next script:</p> <pre><code>use 5.014; use warnings; use Image::Magick; my $image=Image::Magick-&gt;new(size=&gt;'300x300'); $image-&gt;Read('xc:white'); for( my $i=0; $i &lt; 300; $i += 10 ) { $image-&gt;Draw(primitive=&gt;'line',points=&gt;"$i,0 $i,300",stroke=&gt;"#ccf"); $image-&gt;Draw(primitive=&gt;'line',points=&gt;"0,$i 300,$i",stroke=&gt;"#ccf"); } $image-&gt;Write('png:mesh.png'); </code></pre>
<p>You can use Gaussian blur, like this:</p> <pre><code>#!/usr/bin/perl use 5.014; use strict; use warnings; use Image::Magick; my $x; my $circle; my $mesh; $mesh=Image::Magick-&gt;new(size=&gt;'300x300'); $mesh-&gt;Read('xc:white'); for( my $i=0; $i &lt; 300; $i += 10 ) { $mesh-&gt;Draw(primitive=&gt;'line',points=&gt;"$i,0 $i,300",stroke=&gt;"#ccf"); $mesh-&gt;Draw(primitive=&gt;'line',points=&gt;"0,$i 300,$i",stroke=&gt;"#ccf"); } $mesh-&gt;Write(filename=&gt;'mesh.png'); $circle=Image::Magick-&gt;new(size=&gt;'300x300'); $circle-&gt;ReadImage('xc:transparent'); $circle-&gt;Draw( fill =&gt; 'black', points =&gt; "150,150 @{[250]},100", primitive =&gt; 'circle', ); $circle-&gt;GaussianBlur('10x50'); $circle-&gt;Write(filename=&gt;'circle.png'); $mesh-&gt;Composite(image =&gt; $circle, qw(compose SrcAtop gravity Center)); $mesh-&gt;Write(filename=&gt;'out.png'); </code></pre>