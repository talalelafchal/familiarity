Perl, XBase module: no data retrieved if fields are passed to &quot;prepare_select&quot; via string
<p>I have an issue that is driving me mad because I really think it's absurd.. What horribly obvious thing am I missing here?</p> <p>this is a little snippet of code:</p> <pre><code>use XBase; use strict; my $table = new XBase $filename or die XBase-&gt;errstr; my $cursor = $table-&gt;prepare_select("ID", "NAME", "STREET"); while (my @data = $cursor-&gt;fetch) { ### do something here, like print "@data\n"; } </code></pre> <p>obviously this simple code has a specific function: a connection is made and data is retrieved.. Everything runs fine..</p> <p>..but if I try to pass the fields list as the content of a string, as in the snippet below, something goes wrong and no data is retrieved:</p> <pre><code>use XBase; use strict; my $test = '"ID", "NAME", "STREET"'; my $table = new XBase $filename or die XBase-&gt;errstr; my $cursor = $table-&gt;prepare_select($test); while (my @data = $cursor-&gt;fetch) { ### do something here, like print "@data\n"; } </code></pre> <p>it seems that prepare_select() does not like at all a list of fields contained inside a string.. ..but probably I'm missing the usual horribly obvious thing..! ;)</p> <p>Cris</p>
<pre><code>-&gt;prepare_select('"ID", "NAME", "STREET"') </code></pre> <p>is not the same as</p> <pre><code>-&gt;prepare_select("ID", "NAME", "STREET") </code></pre> <p>The first passes one string consisting of 22 characters while the second passes three strnig of 2, 4 and 6 characters respectively.</p> <p>To obtains the three string <code>ID</code>, <code>NAME</code>, <code>STREET</code> from the string <code>"ID", "NAME", "STREET"</code>, you can use the following:</p> <pre><code>my $fields = '"ID", "NAME", "STREET"'; my @fields = $fields =~ /"([^"]*)"/g; </code></pre>