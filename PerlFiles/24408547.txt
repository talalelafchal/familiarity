Wait for the child process to complete in system command in perl
<p>part of my script looks like this.</p> <pre><code>my @args = ("/bin/updateServer &amp; "); system (@args) == 0 or die "system @args failed: $?"; reloadServer; </code></pre> <p>My requirement is only after the updateServer finishes, reloadServer has to be called. In my case reload server runs immeadiately after update server. UpdateServer runs for around 4 hours and so I have to run it in background with "&amp;"</p> <p>How can I change my code to run reloadServer only after the updateServer is completed.</p> <p>Can someone please help me in doing so.</p>
<p>Instead of running the <code>system</code> command in the background, create a <a href="http://perldoc.perl.org/threads.html" rel="nofollow"><code>thread</code></a> to run it and then reload:</p> <pre><code>use threads; my $thread = threads-&gt;create(sub { my @args = ("/bin/updateServer"); system (@args) == 0 or die "system @args failed: $?"; reloadServer; }); # Store $thread somewhere so you can check $thread-&gt;error/is_running for it failing/completing. # Continue doing other things. </code></pre> <p>The thread will run in the background and run <code>reloadServer</code> once the (now blocking) <code>system</code> command completes.</p>
<p>Just:</p> <pre><code>@args = ("/bin/updateServer"); </code></pre> <p>Remove <strong>&amp;</strong> from command to avoid start process in background</p>