Global symbol require explicit package name Error on printing data to csv using Text::CSV?
<p>I am facing trouble on writing data to csv file using Text::CSV module. Acutally this is my first perl script..I am trying to create a header basically. Here is the code</p> <pre><code> use strict; use warnings; use Text::CSV; my $prefix="SP_RECON_"; my $spident=12345; my $today; my $datetime; my $dbh; our $rowcount=0; $today=GetCurrentDate(); my $filename=$prefix . $spident . '_' . $today; my $csv = Text::CSV-&gt;new({binary =&gt; 1, eol =&gt; "\n" }); my @array = ("RecordId","FileFormatVer","ServiceIdentifier","BatchDate","BatchNum","TimeStamp"); formatHeader(); sleep(3); changeExtensionReady(); sub GetCurrentDate { my($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(); $today=sprintf "%04d%02d%02d",$year+1900,$mon+1,$mday; $datetime=sprintf "%04d%02d%02d%02d%02d%02d",$year+1900,$mon+1,$mday,$hour,$min,$sec; return $today; } sub changeExtensionReady { my $value=rename ("$filename.busy","$filename.ready") or die "Unable to rename: $!"; print $value; } sub formatHeader { open my $fh, "&gt;&gt;:encoding(utf8)", "$filename.busy" or die "$filename.busy: $!"; $csv-&gt;print($fh,$array); close $fh or die "$filename.busy: $!"; } </code></pre> <p>Above code is giving me compilation error like</p> <pre><code>&lt;b&gt;Global symbol "$array" requires explicit package name at C:\onebal\scripts\reportGen.pl line 47. Execution of C:\onebal\scripts\reportGen.pl aborted due to compilation errors.&lt;/b&gt; </code></pre> <p>I am not figure out what the problem with <strong>csv->print</strong> ?</p> <p>Any help will be appreciated..</p> <p>brs,</p>
<p>You should pass an array reference to <code>print</code>. Change:</p> <pre><code> $csv-&gt;print($fh,$array); </code></pre> <p>to:</p> <pre><code> $csv-&gt;print($fh,\@array); </code></pre> <p>The reason for the error is that you use <code>strict</code>, but you do not have a scalar variable named <code>array</code>. You only have an array variable named <code>array</code>.</p>
<p>The variables <code>@array</code> and <code>$array</code> are different. The first is an array, the second is a scalar. </p> <p><code>Text::CSV</code>'s <code>print</code> method wants an array <em>reference</em> (pointer to an array). You can create that from a named array using the <code>\</code> operator, or you can create a reference to an anonymous array using the <code>[ ... ]</code> constructor.</p> <p>So in your case, change your code to </p> <pre><code> $csv-&gt;print($fh, \@array); </code></pre> <p>I would also recommend passing parameters to functions and taking advantage of return values instead of relying on global variables. </p> <p><strong>More on References</strong></p> <ul> <li><a href="http://perldoc.perl.org/perlreftut.html" rel="nofollow">Perl References Tutorial</a></li> <li><a href="http://perldoc.perl.org/perlref.html" rel="nofollow">Perl References Reference</a></li> </ul>