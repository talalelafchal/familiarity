Perl perform a pgrep with count line
<p>I've got a problem using pgrep with the wc command. I find 2 lines where I only expect 1 line. </p> <pre><code>my $test = `pgrep -f 'blabla'`; print $test; &lt;------ print the good PID (only one) my $test = `pgrep -f 'blabla'|/usr/bin/wc -l`; print $test; &lt;------- print 2 and a carriage return </code></pre> <p>I find that a carriage return is inserted before the pipe, so wc counts 2 lines. Is there a way to do a intermediate chomp() beetween the pipe ? Thank you for your help</p>
<p><code>pgrep</code> is matching itself when you use a pipe. This can be verified if you pipe into <code>cat</code> instead of <code>wc</code>. You can avoid this by adding in some braces like so, so that the pattern no longer matches itself.</p> <pre><code>my $test = `pgrep -f '[b]labla' | /usr/bin/wc -l`; </code></pre>