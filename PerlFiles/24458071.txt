Pick line with highest value
<p>Referring to the code below:</p> <p>How do I pick the sample which has the highest value and output the whole line.</p> <pre><code> Sample Value Sequence miR1 23213 atatgcgctcg miR1 324235 atatctcgct miR1 3453 tctgctcg miR2 343 tctctgag miR2 34535 tctct miR2 4324 tctgagag ... </code></pre> <p>Output:</p> <pre><code> miR1 324235 atatctcgct miR2 34535 tctct </code></pre> <p>I guess I could do some sorting in excel, but is there a way to do this in perl or in the command line?</p>
<p>Another <code>perl</code> one-liner: </p> <pre><code>perl -lane ' push @{$h{$F[0]}}, [$F[1], $_] }{ print $_-&gt;[1] for map { (sort { $b-&gt;[0] &lt;=&gt; $a-&gt;[0] } @$_)[0] } values %h' file </code></pre> <p><strong>Output:</strong> </p> <pre><code> miR2 34535 tctct miR1 324235 atatctcgct </code></pre>
<p>You could use sort,</p> <pre><code>$ sort -k 2,2n file | tac | head -2 miR1 324235 atatctcgct miR2 34535 tctct </code></pre>
<p>This piece of code will split your input file by <code>\s+</code> and use the 1st column as a key in a hash which will take the largest value for that key as it's final value:</p> <pre><code>use warnings; use strict; use Data::Dumper; $Data::Dumper::Sortkeys = 1; open my $in, '&lt;', 'in.txt'; my (%data, @split, %keep); while (&lt;$in&gt;){ chomp; next if /^Sample/; s/^\s//; @split = split(/\s+/); if ( (not exists $data{$split[0]} ) || (abs $data{$split[0]} &lt; abs $split[1] ) ) { $data{$split[0]} = $split[1]; $keep{$split[0]} = [ $split[1], $split[2] ]; } } print "$_\t@{$keep{$_}}\n" for sort keys %keep; </code></pre> <hr> <pre><code>miR1 324235 atatctcgct miR2 34535 tctct </code></pre>
<p>An <code>awk</code> solution:</p> <pre><code>awk 'NR&gt;1{ if (a[$1]&lt;$2) {a[$1]=$2;b[a[$1]]=$0} else a[$1]} END {for (i in a) print b[a[i]]}' file miR1 324235 atatctcgct miR2 34535 tctct </code></pre>
<pre><code>perl -MList::Util=max -lane' $h{$F[0]}{$F[1]} = $_ }{ print $h{$_}{ max keys %{$h{$_}} } for keys %h ' file </code></pre> <p>output</p> <pre><code> miR1 324235 atatctcgct miR2 34535 tctct </code></pre>
<p>The below awk command will give only the line with maximum value.</p> <pre><code> awk 'BEGIN {IFS= "[ ]*";maxVal=1 } NR&gt;1{ if(maxVal &lt; $2) maxVal = $0 } END {print maxVal }' inputFile.txt </code></pre> <p>output:</p> <pre><code>miR1 23213 atatgcgctcg </code></pre>