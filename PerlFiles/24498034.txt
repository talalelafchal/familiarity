Where can I find the request body in HTTP::Server::Simple
<p>I have the following simple server:</p> <p>And I am trying to locate where the request body (or content) is. I have tried dumping <code>$self</code> and <code>$cgi</code> but they didn't contain the field (I am asuming because they don't carry any information regarding the request) </p> <p>How can I get the request body ? </p> <pre><code>package MyWebServer; use strict; use HTTP::Server::Simple::CGI; use base qw(HTTP::Server::Simple::CGI); use Data::Dumper; my %dispatch = ( '/hello' =&gt; \&amp;resp_hello, # ... ); sub handle_request { my $self = shift; my $cgi = shift; my $path = $cgi-&gt;path_info(); my $handler = $dispatch{$path}; print "printing self in request".Dumper($cgi); my $req = $cgi-&gt;get_request; if (ref($handler) eq "CODE") { print "HTTP/1.0 200 OK\r\n"; $handler-&gt;($cgi, "asd"); } else { print "HTTP/1.0 404 Not found\r\n"; print $cgi-&gt;header, $cgi-&gt;start_html('Not found'), $cgi-&gt;h1('Not found'), $cgi-&gt;end_html; } } sub resp_hello($$) { my ($cgi, $asd) = @_; # CGI.pm object my $who = $cgi-&gt;param('name'); print $cgi-&gt;header, $cgi-&gt;start_html("Hello"), $cgi-&gt;h1("Hello world!!"), $cgi-&gt;h2("Azdh $asd"); $cgi-&gt;end_html; } # start the server on port 8080 my $pid = MyWebServer-&gt;new(8081)-&gt;background(); print "Use 'kill $pid' to stop server.\n"; </code></pre> <p>EDIT: Here is an example request:</p> <pre><code>use strict; require LWP::UserAgent; my $ua = LWP::UserAgent-&gt;new; my $req = HTTP::Request-&gt;new(GET =&gt; "http://localhost:8081/hello"); $req-&gt;content("&lt;foo&gt;3.14&lt;/foo&gt;"); # the request body my $resp = $ua-&gt;request($req); if ($resp-&gt;is_success) { my $message = $resp-&gt;decoded_content; print "Received reply: $message\n"; } else { print "HTTP GET error code: ", $resp-&gt;code, "\n"; print "HTTP GET error message: ", $resp-&gt;message, "\n"; } </code></pre>
<p>The request object you obtained using the line $req = $cgi->get_request is a CGI::Request object. Since this is a request object, it will have only attributes (parameters passed on to the request). Please note that only response objects will have content. So, to see all the parameters you have passed, you can use the as_string() object method as mentioned below.</p> <pre><code>print $req-&gt;as_string; </code></pre> <p>For more information about accessing individual parameters of the request object, please see CGI::Request documentation in <a href="http://search.cpan.org/~mrjc/cvswebedit-v2.0b1/cvs-web/lib/CGI/Request.pm" rel="nofollow">http://search.cpan.org/~mrjc/cvswebedit-v2.0b1/cvs-web/lib/CGI/Request.pm</a>.</p>
<p>It's a bit old, but facing the same issue, here's the solution : </p> <p>$cgi->param('POSTDATA');</p> <p>That's all you need to retreive the Body contents.</p> <p>cheers.</p>