I need help around file access and modification in PERL
<p>Hi I'm new to perl and i need a little help. I have the folder "segmentation" where i need the use of ".purseg" files(x.purseg,y.purseg,z.purseg) . They are kind of text files. Their form is:</p> <p>'0.1 4.5 speech_L1'</p> <p>'4.7 9.2 speech_L2' etc.</p> <p>I also have the folder audio where i have the "audio": x.wav,y.wav,z.wav. Each ".purseg" file matches a ".wav" file,they both have the same name. For my script i have to get the information from the ".purseg" file and based on it i have to cut from the wav file the part that i need(get the speaker mentioned as speech_L2).I made a script that works if i have both ".purseg" and ".wav" file in the same folder but because i am working with a lot of data i need to fix my script in order to work with folders. Here is the script:</p> <p>`#! /usr/bin/perl -w</p> <pre><code>use List::MoreUtils qw(uniq); use File::Path qw(make_path); use File::Copy "cp"; use warnings; my $directory = '/home/taurete/Desktop/diar_fem_fin/segmentation/'; opendir (DIR, $directory) or die $!; while (my $file = readdir(DIR)) { next unless ($file =~ m/\.purseg$/); $file =~ s{\.[^.]+$}{}; push (@list1, $file); # print "$file\n"; } my $list=@list1; # print "$list"; $i=0; while ($i&lt;$list) { my $nume1=$list[$i]; open my $fh, "$nume1.purseg" or die $!; my @file_array; while (my $line = &lt;$fh&gt;) { chomp $line; my @line_array = split(/\s+/, $line); push (@file_array, \@line_array); } my @arr=@file_array; $cont1=0; my $s1= @arr; for (my $i=0;$i &lt; $s1;$i++) { $directory="$nume1"; make_path($directory); if ("speech_L2" eq "$arr[$i][2]") { my $directory = '/home/taurete/Desktop/data/audio/'; opendir (DIR, $directory) or die $!; $interval = $arr[$i][1] - $arr[$i][0]; $speakername=$nume1._.$cont1; `sox $nume1.wav ./$directory/$speakername.wav trim $arr[$i][0] $interval`; $cont1++; } } $i++; } </code></pre> <p>` Here is what i get: Name "main::list" used only once: possible typo at ./spkfinal.pl line 23. Use of uninitialized value $nume1 in concatenation (.) or string at ./spkfinal.pl line 27. No such file or directory at ./spkfinal.pl line 27.</p>
<p>To answer your question about <code>Name "main::list" used only once: possible typo at ./spkfinal.pl line 23.</code>, change:</p> <pre><code>my $nume1=$list[$i]; </code></pre> <p>to:</p> <pre><code>my $nume1=$list1[$i]; </code></pre> <p>You do not have an array <code>@list</code>, but you do have an array <code>@list1</code>.</p> <p>I think that will clear up your subsequent warnings, too.</p>