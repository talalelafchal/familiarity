how to parse a xml and concate the value of a hash reference to a string
<pre><code>I have the data structure like $VAR1 = '&lt;opt&gt; &lt;GetBalanceIcici averageCost="3.3" lastMeterReadDateTime="2014-07- 01T11:35:00.000+05:30" remainingDays="0"&gt; &lt;balances&gt; &lt;balanceInfo accountId="2" balance="68" balanceId="1" balanceName="E-Mobile" balanceType="EUR" paymentType="OTHER" precision="6" refDateTime="2014-07-01T17:25:45.000+05:30" rolloverCounter="0"&gt; &lt;pockets&gt; &lt;pocket endDateTime="2015-08-01T00:00:00.000+05:30" partialBalance="15" startDateTime="2014-07-01T00:00:00.000+05:30" /&gt; &lt;pocket endDateTime="2015-07-01T00:00:00.000+05:30" partialBalance="53" startDateTime="2014-06-01T00:00:00.000+05:30" /&gt; &lt;pocket partialBalance="0" /&gt; &lt;/pockets&gt; &lt;/balanceInfo&gt; &lt;balanceInfo accountId="2" balance="1.04" balanceId="2" balanceName="E-Credit_EUR" balanceType="Eur" paymentType="PREPAID" pockets="" precision="6" refDateTime="2014-07-01T17:25:45.000+05:30" rolloverCounter="0" /&gt; &lt;balanceInfo accountId="2" balance="-68" balanceId="4" balanceName="E-GCounter" balanceType="kWh" paymentType="OTHER" pockets="" precision="6" refDateTime="2014-07-01T17:25:45.000+05:30" rolloverCounter="0" /&gt; &lt;balanceInfo accountId="2" balance="-14.96" balanceId="5" balanceName="E-MCredit_EUR" balanceType="Eur" paymentType="OTHER" precision="6" refDateTime="2014-07-01T17:25:45.000+05:30" rolloverCounter="0"&gt; &lt;pockets&gt; &lt;pocket endDateTime="2015-08-01T00:00:00.000+05:30" partialBalance="-3.3" startDateTime="2014-07-01T00:00:00.000+05:30" /&gt; &lt;pocket endDateTime="2015-07-01T00:00:00.000+05:30" partialBalance="-11.66" startDateTime="2014-06-01T00:00:00.000+05:30" /&gt; &lt;pocket partialBalance="0" /&gt; &lt;/pockets&gt; &lt;/balanceInfo&gt; &lt;/balances&gt; &lt;/GetBalanceIcici&gt; &lt;/opt&gt; '; </code></pre> <p>I want to print like</p> <p>Account Id is 2 balance is 68 Balance name is E-Mobile balanceType is EUR payment type is OTHER precision is 6 Pockets is( endDateTime="2015-08-01T00:00:00.000+05:30",partialBalance="-11.66",startDateTime="2014-06-01T00:00:00.000+05:30"</p> <p>I have written the below mentioned code but not able to capture properly</p> <pre><code>my $xml1 = XMLin($xml); print "\n----------------------------\n"; print Dumper $xml1; print "\n----------------------------\n"; foreach my $e ($xml1-&gt;{'GetBalanceIcici'}) { foreach my $f ($e-&gt;{'balances'}) { foreach my $g ($f-&gt;{'balanceInfo'}) { foreach my $j (@{$g}) { print "Account Id is\t ". $j-&gt;{'accountId'} ."\tbalance is\t" .$j-&gt;{'balance'}. "\tBalance name is\t" . $j-&gt;{'balanceName'} ."\tbalanceType is\t". $j-&gt;{'balanceType'} . "\tpayment type is\t".$j-&gt;{'paymentType'} ."\tprecision is \t".$j-&gt;'precision'}."\t ."\t pocket is...."."\n"; } } } </code></pre>
<p>I advise you not to use <a href="https://metacpan.org/pod/XML%3a%3aSimple" rel="nofollow"><code>XML::Simple</code></a> for processing XML.</p> <p>Instead use more modern modules like <a href="https://metacpan.org/pod/XML%3a%3aLibXML" rel="nofollow"><code>XML::LibXML</code></a> and <a href="https://metacpan.org/pod/XML%3a%3aTwig" rel="nofollow"><code>XML::Twig</code></a>.</p> <p>Below is an attempt to recreate your parsing using the first of these two mdoules:</p> <pre><code>use strict; use warnings; use XML::LibXML; my $xml = XML::LibXML-&gt;load_xml(IO =&gt; \*DATA); for my $node ($xml-&gt;findnodes('//GetBalanceIcici/balances/balanceInfo')) { my @label_to_key = ( ['Account Id', 'accountId'], ['balance', 'balance'], ['Balance name', 'balanceName'], ['balanceType', 'balanceType'], ['payment type', 'paymentType'], ['precision', 'precision'], ); print join(' ', map {"$_-&gt;[0] is " . $node-&gt;getAttribute($_-&gt;[1])} @label_to_key), "\n"; } __DATA__ &lt;opt&gt; &lt;GetBalanceIcici averageCost="3.3" lastMeterReadDateTime="2014-07- 01T11:35:00.000+05:30" remainingDays="0"&gt; &lt;balances&gt; &lt;balanceInfo accountId="2" balance="68" balanceId="1" balanceName="E-Mobile" balanceType="EUR" paymentType="OTHER" precision="6" refDateTime="2014-07-01T17:25:45.000+05:30" rolloverCounter="0"&gt; &lt;pockets&gt; &lt;pocket endDateTime="2015-08-01T00:00:00.000+05:30" partialBalance="15" startDateTime="2014-07-01T00:00:00.000+05:30" /&gt; &lt;pocket endDateTime="2015-07-01T00:00:00.000+05:30" partialBalance="53" startDateTime="2014-06-01T00:00:00.000+05:30" /&gt; &lt;pocket partialBalance="0" /&gt; &lt;/pockets&gt; &lt;/balanceInfo&gt; &lt;balanceInfo accountId="2" balance="1.04" balanceId="2" balanceName="E-Credit_EUR" balanceType="Eur" paymentType="PREPAID" pockets="" precision="6" refDateTime="2014-07-01T17:25:45.000+05:30" rolloverCounter="0" /&gt; &lt;balanceInfo accountId="2" balance="-68" balanceId="4" balanceName="E-GCounter" balanceType="kWh" paymentType="OTHER" pockets="" precision="6" refDateTime="2014-07-01T17:25:45.000+05:30" rolloverCounter="0" /&gt; &lt;balanceInfo accountId="2" balance="-14.96" balanceId="5" balanceName="E-MCredit_EUR" balanceType="Eur" paymentType="OTHER" precision="6" refDateTime="2014-07-01T17:25:45.000+05:30" rolloverCounter="0"&gt; &lt;pockets&gt; &lt;pocket endDateTime="2015-08-01T00:00:00.000+05:30" partialBalance="-3.3" startDateTime="2014-07-01T00:00:00.000+05:30" /&gt; &lt;pocket endDateTime="2015-07-01T00:00:00.000+05:30" partialBalance="-11.66" startDateTime="2014-06-01T00:00:00.000+05:30" /&gt; &lt;pocket partialBalance="0" /&gt; &lt;/pockets&gt; &lt;/balanceInfo&gt; &lt;/balances&gt; &lt;/GetBalanceIcici&gt; &lt;/opt&gt; </code></pre> <p>Outputs:</p> <pre><code>Account Id is 2 balance is 68 Balance name is E-Mobile balanceType is EUR payment type is OTHER precision is 6 Account Id is 2 balance is 1.04 Balance name is E-Credit_EUR balanceType is Eur payment type is PREPAID precision is 6 Account Id is 2 balance is -68 Balance name is E-GCounter balanceType is kWh payment type is OTHER precision is 6 Account Id is 2 balance is -14.96 Balance name is E-MCredit_EUR balanceType is Eur payment type is OTHER precision is 6 </code></pre>