Selenium: Trying to resize window from Perl: getting a mysterious JavaScript error
<p>I am using the Perl Selenium package, <a href="https://metacpan.org/pod/WWW%3a%3aSelenium" rel="nofollow"><code>WWW::Selenium</code></a>.<br> Trying to resize the browser window, I am getting a mysterious JavaScript error:<br> <code>"Threw an exception: missing ; before statement"</code>.</p> <p>Here is the code:</p> <pre><code>use strict; use warnings; use 5.014; use autodie; use warnings qw&lt; FATAL utf8 &gt;; use Carp; use Carp::Always; use WWW::Selenium; my $url = 'http://www.google.com'; #for example my $sel = WWW::Selenium-&gt;new( host =&gt; 'localhost', port =&gt; 4444, browser =&gt; '*firefox F:\WIN 7 programs\Web &amp; Internet\Firefox 8 bit\firefox.exe', browser_url =&gt; $url, ); $sel-&gt;open( $url ); $sel-&gt;wait_for_page_to_load(10000); my $res = $sel-&gt;window_maximize(); # So far, this works fine $res = $sel-&gt;get_eval( q{ WebDriver driver = ((WebDriverBackedSelenium) selenium).getWrappedDriver(); driver.manage().window().setSize(1040,720);} ); # (Following this: http://stackoverflow.com/questions/1522252/, Eli Colner's post) </code></pre> <p>The program then crashes here with: </p> <pre><code>"Threw an exception: missing ; before statement" </code></pre> <p>If I drop the first JavaScript line and just leave in the 2nd line, namely:</p> <pre><code>$res = $sel-&gt;get_eval( q{driver.manage().window().setSize(1040,720);} ); </code></pre> <p>It bumps with: <code>"driver not defined"</code>.</p> <p>Help will be appreciated - Thanks in advance</p> <p>Helen </p> <p>Note: cross posted here: <a href="http://www.perlmonks.org/?node_id=1092355" rel="nofollow">http://www.perlmonks.org/?node_id=1092355</a></p>
<p>I see invalid javascript in your code, you made a mistaken assumption. Regarding the referenced SO thread that you base your code on:</p> <p><a href="http://stackoverflow.com/questions/1522252/">How to resize/maximize Firefox window during launching Selenium Remote Control?</a></p> <p>what makes you think Eli Corner's answer/solution is "javascript"? That is Java, or C# otherwise, because only those language bindings for WebDriver (or Selenium 2) expose a WebDriverBackedSelenium feature. All other language bindings, including Perl have no such option. So even if the code syntax is correct, on execution it will fail because that's not javascript (or shall I say the referenced classes/objects are not javascript).</p> <p>Your options for a solution the way I see it are:</p> <ol> <li><p>use real javascript code and Dave Hunt's solution (in that same SO thread) ideally should work, adapted for Perl:</p> <p>$sel->get_eval("window.resizeTo(1024, 768); window.moveTo(0,0);");</p></li> <li><p>use Perl WebDriver binding to correctly use Eli Corner's solution (adapted for Perl), not Selenium (RC) binding that you are currently using. Perl WebDriver binding is Selenium::Remote::Driver, not WWW:Selenium. You should then be able to do something like this (there is no need for the WebDriverBackedSelenium part in Perl, but it does mean you have to switch off using Selenium RC moving to WebDriver, there's no backward compatibility support, you need Java or C# for that):</p> <p>$driver->set_window_position(0, 0);</p> <p>$driver->set_window_size(640, 480);</p></li> </ol>