Upload file asynchronously post to Perl with jQuery
<p>Ok so iv spent 3 months looking throughout the web finding the write code, but everyone is sending the information via a PHP post method and from text fields which is not what i'm looking for, iv tried everything, could use some help now. If PHP is the only way to go about this, what would it look like?</p> <p><strong>Issue:</strong> As of right now ALL the data (name,size &amp; suffix) is being sent perfectly without parsing via the HTML and of course without the JQ but only as a single upload.</p> <p><strong>Outcome:</strong> To asynchronous send multiple files via jQuery and post to cgi. Progress bar would be cool to.</p> <p>Here is my working HTML that posts to a CGI.</p> <pre><code>&lt;FORM METHOD="POST" ACTION="index.cgi" ENCTYPE="form-data"&gt; &lt;INPUT TYPE="hidden" NAME="act" VALUE="Store"&gt; &lt;input name="data" type="file"&gt; &lt;INPUT TYPE="hidden" NAME="dir" VALUE=""&gt; &lt;input type="CHECKBOX" name="replace" value="1"&gt;Overwrite &lt;INPUT TYPE="submit" id="submit" VALUE="Start Upload"&gt; </code></pre> <p>the JQ iv been working on:</p> <pre><code>$('#submit').click(function(){ var act = $('#act').attr('value'); var data = $('#FileField').attr('value'); var dir = $('#dir').attr('value'); $.ajax({ url: '/index.cgi', type: 'POST', data: "act=" + act + "&amp;data=" + data + "&amp;dir=" + dir, }); }); </code></pre> <p>Line in Perl:</p> <pre><code>(param("data")) </code></pre> <p>Would be happy days if i could get the JQ to work. :)</p> <p>What needs to be called is through the Perl script as a post, such as:</p> <p>foobar.com/index.cgi?act=store</p> <p>Thanks guys!</p>
<p>A synopsis on how it can be done</p> <p>On client side do something like:</p> <pre><code>$.post('/index.cgi',{data: JSON.stringify(data, null, 2)); </code></pre> <p>And on server side:</p> <pre><code>use CGI; use JSON; use Data::Dumper; my $q = CGI-&gt;new; my $data = decode_json($q-&gt;param('data')); print Dumper $data; </code></pre> <p>BTW you can use the <a href="https://metacpan.org/pod/jQuery%3a%3aFile%3a%3aUpload" rel="nofollow">jQuery::File::Upload</a> module.</p>