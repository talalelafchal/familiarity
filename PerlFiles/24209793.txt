How do I save a file in an IO::Handle?
<p>I'm a little confused on how to save a file that is an IO::Handle.</p> <p>Here is what I have</p> <pre><code> use IO::File; my $iof = IO::File-&gt;new; # open file $iof-&gt;open($path, "w") || die "$! : $path"; # ensure binary $iof-&gt;binmode; # output file to disk print $iof $self-&gt;File_Upload; $iof-&gt;close; </code></pre> <p>File_Upload is the IO::Handle given to me via the CGI module for a file upload, but the output in the file is...</p> <pre><code>IO::Handle=GLOB(0x20dabec) </code></pre> <p>Not the binary data of the uploaded PDF.</p> <p>If I have a file in a file handle how do I save it?</p> <p>Do I need IO::File if I have an IO::Handle?</p> <p>Your input is appreciated.</p> <p>1DMF</p>
<p>Read from the <code>CGI</code> provided file handle using <a href="http://perldoc.perl.org/functions/readline.html" rel="nofollow"><code>readline</code></a>:</p> <pre><code>print $iof readline($self-&gt;File_Upload); </code></pre> <p>The fact that your output contents were <code>'IO::Handle=GLOB(0x20dabec)'</code> implied that the <code>$self-&gt;File_Upload</code> is of type <a href="http://perldoc.perl.org/IO/Handle.html" rel="nofollow"><code>IO::Handle</code></a> and should be treated as such. </p> <p>Using <code>readline</code> in a list context pulls all the lines as demonstrated above. Alternatively, you could use the object method <code>-&gt;getlines()</code>:</p> <pre><code>print $iof $self-&gt;File_Upload-&gt;getlines(); </code></pre>
<p>How does one slurp a file?</p> <pre><code>my $fh = $self-&gt;File_Upload(); my $file = do { local $/; &lt;$fh&gt; }; </code></pre> <p>Yes, this works for IO::Handle objects in addition to the usual globs (<code>STDIN</code>), references to globs (from <code>open my $fh, ...</code>) and IO scalars (<code>*STDIN{IO}</code>).</p> <p>Then to print it,</p> <pre><code>print($iof $file); </code></pre> <p>In this particular case, you could simply use</p> <pre><code>print($iof $self-&gt;File_Upload()-&gt;getlines()); </code></pre>