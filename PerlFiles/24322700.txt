ReCaptcha Incorrect Sol - perl
<p>I've been working on a register form for a game I'm developing, everything works fine except the captcha. It keep's saying <strong>incorrect sol</strong> even though I am entering the answer correctly. I tried debugging using <code>Data::Dumper</code> and it seems like it keeps returning false every time.</p> <p><a href="http://s15.postimg.org/vy5kt6zaz/x_REuan_W.png" rel="nofollow">http://s15.postimg.org/vy5kt6zaz/x_REuan_W.png</a></p> <p>This is my code</p> <pre><code>use strict; use warnings; use CGI; use Captcha::reCAPTCHA; use Data::Dumper; my $captcha = Captcha::reCAPTCHA-&gt;new(); my $html = CGI-&gt;new(); my $public_key = "6Ldbc9cSAAAAACYGs9FWEemI_A4Atx20sOtk6YA-"; my $private_key = "6Ldbc9cSAAAAAHs88TTzyytdrIlkbVx3h5x55t8j"; sub checkAndRegister { my $result = $captcha-&gt;check_answer($private_key, $ENV{'REMOTE_ADDR'}, $html-&gt;param("recaptcha_challenge_field"), $html-&gt;param("recaptcha_response_field") ); print Dumper($result); if ($result-&gt;{is_valid}) { #do stuff here } else { die ($result-&gt;{error}); } } sub output_form { print $captcha-&gt;get_html($public_key); } </code></pre> <p>Help would be appreciated very much!</p>
<p>If you run this under mod_perl or similar, the $html used in checkAndRegister will be a separate variable from the $html used everywhere else after the first request; pass it into checkAndRegister to fix this.</p> <p>If you enable warnings, you will see a "Variable ... will not stay shared" warning about this. You can read about it <a href="http://perl.apache.org/docs/general/perl_reference/perl_reference.html#my____Scoped_Variable_in_Nested_Subroutines" rel="nofollow">here</a>.</p>