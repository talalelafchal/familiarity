what is @$varname in perl
<p>i had to write a csv sorting code for which i used the following code :</p> <pre><code>foreach(@files){ if(/\.csv$/i) { # if the filename has .csv at the end push(@csvfiles,$_); } } foreach(@csvfiles) { $csvfile=$_; open(hanr, "D:\\stock\\".$csvfile)or die"error $!\n"; # read handler open(hanw , "&gt;D:\\stock\\sorted".$csvfile) or die"error $! \n"; # write handler for creating new sorted files @lines=(); @lines=&lt;hanr&gt;; foreach $line (@lines){ chomp $line; $count++; next unless $count; # skip header i.e the first line containing stock details my $row; @$row = split(/,/, $line ); push @$sheet2 , $row; } foreach my $row ( sort { $a-&gt;[0] cmp $b-&gt;[0] || $a-&gt;[1] cmp $b-&gt;[1] } @$sheet2 ) # sorting based on date ,then stockcode { chomp $row; print hanw join (',', @$row ),"\n"; } @$sheet2 = (); $count = -1; close(hanw); close(hanr); } </code></pre> <p>however i do not understand what @$row is ..also i understand sorting a normal array @sheet2 comparing coulumn 0 and 1 ..but if someone would explain the whole thing it would be wonderful:</p> <pre><code> @$row = split(/,/, $line ); push @$sheet2 , $row; } foreach my $row ( sort {$a-&gt;[0] cmp $b-&gt;[0] || $a-&gt;[1] cmp $b-&gt;[1]} @$sheet2 ) { *print hanw join (',', @$row ),"\n"; } </code></pre>
<p><code>@$row</code> dereferences an array reference.</p> <p><code>sort {$a-&gt;[0] cmp $b-&gt;[0] || $a-&gt;[1] cmp $b-&gt;[1]}</code> This will compare the first entry in both arrays and if these are equals the second entry will be compared.</p> <p>Hope this helps.</p>
<p>You have <code>my $row;</code> which leaves <code>$row</code> undefined, and pushing into <code>@$row</code> (or <code>@{$row}</code>) automatically creates new array due <a href="http://en.wikipedia.org/wiki/Autovivification" rel="nofollow"><code>autovivification</code></a> perl feature.</p> <p>In case of</p> <pre><code>sort { $a-&gt;[0] cmp $b-&gt;[0] || $a-&gt;[1] cmp $b-&gt;[1] } @$sheet2 </code></pre> <p><code>@$sheet2</code> is array of array structure, and <code>@$sheet2</code> arrays are sorted by first and second element from sub-array (string sort due <code>cmp</code> operator; if <code>$a-&gt;[0]</code> and <code>$b-&gt;[0]</code> are equal then <code>$a-&gt;[1]</code> and <code>$b-&gt;[1]</code> are compared).</p>