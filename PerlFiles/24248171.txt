DBD::Oracle install on 64 bit Ubuntu with instantclient 11.2
<p>So I have, what I <em>think</em> is a clean installation of the oracle instantclient for 64 bit ubuntu.</p> <p>I've install the 4 modules: basic, sqlplus, jdbc and sdk. I added a tnsnames.ora and the following items to my /etc/profile.d/oracle.sh</p> <pre><code>export DYLD_LIBRARY_PATH=/opt/oracle/instantclient_11_2 export TNS_ADMIN=/opt/oracle/instantclient_11_2 export ORACLE_HOME=/opt/oracle/instantclient_11_2 export ORACLE_ENV=/opt/oracle/instantclient_11_2 LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/oracle/instantclient_11_2 export LD_LIBRARY_PATH PATH=$PATH:/opt/oracle/instantclient_11_2 export PATH </code></pre> <p>When I try sqlplus, I get connectivity without a problem.</p> <p>I've downloaded DBD::Oracle 1.74 and when I attempt to sudo -E perl Makefile.PL, I'm getting the most baffling error.</p> <pre><code>Using Oracle in /opt/oracle/instantclient_11_2 sqlplus: error while loading shared libraries: libsqlplus.so: cannot open shared object file: No such file or directory </code></pre> <p>It's clearly got the directory in which my instant client and the libsqlplus.so reside, but it's not finding the file.</p> <p>Suggestions? </p> <p>I should add that sudo -E sqlplus gives a command not found error even though </p> <p>sudo -E echo $PATH shows the :/opt/oracle/instantclient_11_2 at the end of the PATH statement. I can only run sqlplus as a regular user.</p>
<p>I don't know how reusable this problem description will be for anyone else, but the short answer is: Installing DBD::Oracle using sudo, whether you're using sudo -i or sudo -E is pretty well bound to be problematic unless you have full control over the sudoers config.</p> <p>Solution for my purposes was to run cpan and install truly as root. </p>
<p>Make sure you have downloaded the right package with sqlplus libraries included</p> <p>From Oracle instant client website: "SQL*Plus: Additional libraries and executable for running SQL*Plus with Instant Client"</p>