Pattern match grouping
<p>I have a file with lines like below (just pasted two lines).It's a huge file 1 GB .</p> <pre><code>6901:2014-06-30 12:24:58,584 INFO BAS_Connector-thread-3 [com.orga.oslee.ra.bas.BASservice-R2.5.0.19.4] API=[BAS_SEARCH_ACCOUNTS] TID=[6c3be5be-2188-11e4-e004-6e5c369d1712] &lt; received from Bas: [Accounts=[], MaxRecordsReached=false, ReferenceId=-9MXF14E0ST6R, IST=2014-06-30T12:24:58.578+05:30] BAS_EXECUTIONTIME=[00:00:00:19] TID=[6c3be5be-2188-11e4-e004-6e5c369d1712] &lt; received from Bas: {BAS_TID=[0:[6c3be5be-2188-11e4-e004-6e5c369d1712]], BAS_SERVICE=[0:[BAS_ADD_CUSTOMER]], BAS_Customer=[0:[{BAS_CustomerAttributes=[0:[{}]], BAS_NwOperator=[0:[Entel]], BAS_LastModDateTime=[0:[Mon Jun 30 12:24:58 IST 2014]], BAS_ComProfileCodeId=[0:[{BAS_Value=[0:[COM_PROF]], BAS_Domain=[0:[SEGMENT]]}]], BAS_CustomerCategory=[0:[Default]], BAS_AccountCategoryCodeId=[0:[{BAS_Value=[0:[Default]], BAS_Domain=[0:[CUSTOMER]]}]], BAS_OperatorCodeId=[0:[{BAS_Value=[0:[Entel]], BAS_Domain=[0:[CUSTOMER]]}]], BAS_CustomerName=[0:[CU_132539]], BAS_CustomerNumber=[0:[132502]], BAS_OwningCostCenterCodeId=[0:[{BAS_Value=[0:[CST_OWN]], BAS_Domain=[0:[SEGMENT]]}]], BAS_SegmentCodeId=[0:[{BAS_Value=[0:[Account]], BAS_Domain=[0:[CUSTOMER]]}]], BAS_DealerCodeId=[0:[{BAS_Value=[0:[Entel]], BAS_Domain=[0:[SEGMENT]]}]], BAS_BillingProfile=[0:[{BAS_BillFormatCodeId=[0:[{BAS_Value=[0:[w_it_bill]], BAS_Domain=[0:[SEGMENT]]}]], BAS_BillDispatchCodeId=[0:[{BAS_Value=[0:[OIT]], BAS_Domain=[0:[SEGMENT]]}]], BAS_InvoiceCurrencyCodeId=[0:[{BAS_Value=[0:[CLP]], BAS_Domain=[0:[SEGMENT]]}]], BAS_BillPeriodCodeId=[0:[{BAS_Value=[0:[BR01]], BAS_Domain=[0:[SEGMENT]]}]], BAS_Domain=[0:[SEGMENT]]}]], BAS_ScProfileCodeId=[0:[{BAS_Value=[0:[SER_C_PROF]], BAS_Domain=[0:[SEGMENT]]}]], BAS_CustomerId=[0:[132502]], BAS_ReceivingCostCenterCodeId=[0:[{BAS_Value=[0:[CST_RECV]], BAS_Domain=[0:[SEGMENT]]}]]}]], BAS_ReferenceId=[0:[-9MXF14E0ST6R]]} </code></pre> <p>I want to take the value <code>-9MXF14E0ST6R</code> from <code>BAS_ReferenceId=[0:[-9MXF14E0ST6R]]</code> or <code>ReferenceId=-9MXF14E0ST6R,</code></p> <pre><code>my $receivedFrom =qr /^(\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}:\d{2},\d{3}).*API=\[(.*?)\].*?TID=\[(.*?)\].*?received from Bas.*?(ReferenceId=.*?,|BAS_ReferenceId=\[.*?:\[(-.*?)\]\])/; open (IN,'&lt;',"$file"); while (my $inputString = &lt;IN&gt;) { if ($inputString=~/$receivedFrom/) { my ($starttime,$api,$receivingfromtid,$ReferenceId)=$inputString=~/$receivedFrom/; $ReferenceId=~s/ReferenceId=//; $ReferenceId=~s/BAS_\[0:\[//; $ReferenceId=~s/\]//g; print "$ReferenceId\n"; } } </code></pre> <p>I don't want to do the substitute . </p>
<p>Simplify your regular expressions.</p> <p>In this case, you're trying to match two different patterns. Therefore they should be two different regular expressions:</p> <pre><code>use strict; use warnings; while (&lt;DATA&gt;) { if (/\bReferenceId=([^,]*)/) { print "RefID = '$1'\n"; } elsif (/\bBAS_ReferenceId=\[ [^\[\]]* \[ ([^\[\]]*) \] \]/x) { print "BasID = '$1'\n"; } } __DATA__ 6901:2014-06-30 12:24:58,584 INFO BAS_Connector-thread-3 [com.orga.oslee.ra.bas.BASservice-R2.5.0.19.4] API=[BAS_SEARCH_ACCOUNTS] TID=[6c3be5be-2188-11e4-e004-6e5c369d1712] &lt; received from Bas: [Accounts=[], MaxRecordsReached=false, ReferenceId=-9MXF14E0ST6R, IST=2014-06-30T12:24:58.578+05:30] BAS_EXECUTIONTIME=[00:00:00:19] TID=[6c3be5be-2188-11e4-e004-6e5c369d1712] &lt; received from Bas: {BAS_TID=[0:[6c3be5be-2188-11e4-e004-6e5c369d1712]], BAS_SERVICE=[0:[BAS_ADD_CUSTOMER]], BAS_Customer=[0:[{BAS_CustomerAttributes=[0:[{}]], BAS_NwOperator=[0:[Entel]], BAS_LastModDateTime=[0:[Mon Jun 30 12:24:58 IST 2014]], BAS_ComProfileCodeId=[0:[{BAS_Value=[0:[COM_PROF]], BAS_Domain=[0:[SEGMENT]]}]], BAS_CustomerCategory=[0:[Default]], BAS_AccountCategoryCodeId=[0:[{BAS_Value=[0:[Default]], BAS_Domain=[0:[CUSTOMER]]}]], BAS_OperatorCodeId=[0:[{BAS_Value=[0:[Entel]], BAS_Domain=[0:[CUSTOMER]]}]], BAS_CustomerName=[0:[CU_132539]], BAS_CustomerNumber=[0:[132502]], BAS_OwningCostCenterCodeId=[0:[{BAS_Value=[0:[CST_OWN]], BAS_Domain=[0:[SEGMENT]]}]], BAS_SegmentCodeId=[0:[{BAS_Value=[0:[Account]], BAS_Domain=[0:[CUSTOMER]]}]], BAS_DealerCodeId=[0:[{BAS_Value=[0:[Entel]], BAS_Domain=[0:[SEGMENT]]}]], BAS_BillingProfile=[0:[{BAS_BillFormatCodeId=[0:[{BAS_Value=[0:[w_it_bill]], BAS_Domain=[0:[SEGMENT]]}]], BAS_BillDispatchCodeId=[0:[{BAS_Value=[0:[OIT]], BAS_Domain=[0:[SEGMENT]]}]], BAS_InvoiceCurrencyCodeId=[0:[{BAS_Value=[0:[CLP]], BAS_Domain=[0:[SEGMENT]]}]], BAS_BillPeriodCodeId=[0:[{BAS_Value=[0:[BR01]], BAS_Domain=[0:[SEGMENT]]}]], BAS_Domain=[0:[SEGMENT]]}]], BAS_ScProfileCodeId=[0:[{BAS_Value=[0:[SER_C_PROF]], BAS_Domain=[0:[SEGMENT]]}]], BAS_CustomerId=[0:[132502]], BAS_ReceivingCostCenterCodeId=[0:[{BAS_Value=[0:[CST_RECV]], BAS_Domain=[0:[SEGMENT]]}]]}]], BAS_ReferenceId=[0:[-9MXF14E0ST6R]]} </code></pre> <p>Outputs:</p> <pre><code>RefID = '-9MXF14E0ST6R' BasID = '-9MXF14E0ST6R' </code></pre>