Which is the simple and fast UNIX command to print all lines from the last occurrence of a pattern?
<p>Which is the simple and fast UNIX command to print all lines from the last occurrence of a pattern to the end of the file ?</p> <pre><code>sed -n '/pattern/,$p' file </code></pre> <p>This sed command prints from the first occurrence onwards.</p>
<p>This might work for you (GNU sed):</p> <pre><code>sed 'H;/pattern/h;$!d;x;//!d' file </code></pre> <p>Stashes the last pattern and following lines in the hold space and at end-of-file prints them out.</p> <p>Or using the same method in awk:</p> <pre><code>awk '{x=x ORS $0};/pattern/{x=$0};END{if(x ~ //)print x}' file </code></pre> <p>However on my machine jaypals way with sed seems to be the quickest:</p> <pre><code>tac file | sed '/pattern/q' | tac </code></pre>
<p>Reverse the file, print until the first pattern, exit and reverse the file. </p> <pre><code>tac file | awk '/pattern/{print;exit}1' | tac </code></pre>
<p>Here's a Perlish way to do it:</p> <pre><code>perl -ne '$seen = 1, @a = () if /pattern/; push @a, $_; END { print @a if $seen }' file </code></pre>
<p>A standalone awk:</p> <pre><code>awk '/pattern/{delete a;c=0}{a[c++]=$0}END{for (i=0;i&lt;c;i++){print a[i]}}' file </code></pre>
<p>Simplest solution is just to use a regex matching on the entire file:</p> <pre><code>perl -0777 -ne 'print $1 if /pattern(.*?)$/' file </code></pre>
<p>Here is an pure <code>awk</code></p> <pre><code>awk 'FNR==NR {if ($0~/pattern/) f=FNR;next} FNR==f {a=1}a' file{,} </code></pre> <p>It reads the file twice, and first time set a flag for last found of <code>pattern</code>, then print form <code>pattern</code> and out.</p> <hr> <p>Or you can store data in an array like this:</p> <pre><code>awk '/pattern/ {f=NR} {a[NR]=$0} END {for (i=f;i&lt;=NR;i++) print a[i]}' file </code></pre>
<p>Using GNU awk for multi-char RS and gensub():</p> <pre><code>$ awk -v RS='^$' -v ORS= '{print gensub(/.*(pattern)/,"\\1","")}' file </code></pre> <p>e.g.:</p> <pre><code>$ cat file a b c b d $ awk -v RS='^$' -v ORS= '{print gensub(/.*(b)/,"\\1","")}' file b d </code></pre> <p>The above simply deletes from the start of the file up to just before the last occurrence of "b".</p>