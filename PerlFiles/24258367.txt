How can I set fields on an input hidden with Mechanize ?
<p>I select the form to change the page. But the input is hidden.</p> <p>Here is the html code : </p> <pre><code>&lt;form id="form_pager" method="post" action=""&gt; &lt;input type="hidden" id="txtPage" name="page"&gt; &lt;a class="link-paginador" href="javascript:navigatePage('1');"&gt;&amp;lt;&amp;lt;&lt;/a&gt; &lt;a class="link-paginador" href="javascript:navigatePage('1');"&gt;Précédent&lt;/a&gt; &lt;span id="pager"&gt; &lt;a class="link-paginador" href="javascript:navigatePage('1');"&gt;1&lt;/a&gt;&amp;nbsp; &lt;strong&gt;2&lt;/strong&gt;&amp;nbsp; &lt;a class="link-paginador" href="javascript:navigatePage('3');"&gt;3&lt;/a&gt;&amp;nbsp; &lt;a class="link-paginador" href="javascript:navigatePage('4');"&gt;4&lt;/a&gt;&amp;nbsp; &lt;a class="link-paginador" href="javascript:navigatePage('5');"&gt;5&lt;/a&gt;&amp;nbsp; &lt;/span&gt; &lt;a class="link-paginador" href="javascript:navigatePage('3');"&gt;Suivant&lt;/a&gt; &lt;a class="link-paginador" href="javascript:navigatePage('5');"&gt;&amp;gt;&amp;gt;&lt;/a&gt; &lt;/form&gt; </code></pre> <p>Here is my code :</p> <pre><code>$form = $mech-&gt;form_id('form_pager'); $mech-&gt;set_fields('txtPage' =&gt; 'page='.$nbpage); $mech-&gt;click(); </code></pre> <p>I've tried to change the status of the input like that : </p> <pre><code>foreach my $forms ($mech-&gt;forms()) { map { $_-&gt;readonly(0) } $forms-&gt;inputs(); } </code></pre> <p>But It doesn't work.</p> <p>Have you some idea please ? Thanks !</p>
<p>Take a look <a href="http://p3rl.org/WWW%3a%3aMechanize%3a%3aFAQ#Why-do-I-get-Input-fieldname-is-readonly" rel="nofollow">here</a>. </p> <p>One problem might be, that <a href="http://p3rl.org/WWW%3a%3aMechanize" rel="nofollow"><code>WWW::Mechanize</code></a> does not evaluate Javascript. </p> <p>You can try to use <a href="http://p3rl.org/WWW%3a%3aMechanize%3a%3aFirefox" rel="nofollow"><code>WWW::Mechanize::Firefox</code></a>, which can evaluate javascript or you can use <a href="http://p3rl.org/WWW%3a%3aMechanize%3a%3aPhantomJS" rel="nofollow"><code>WWW::Mechanize::PhantomJS</code></a></p> <p>Thinks you need to know when you use want to use one of them:</p> <ul> <li><code>WWW::Mechanize::Firefox</code> uses your installed Firefox to execute, so you need to have Firefox installed</li> <li><code>WWW::Mechanize::PhantomJS</code> uses <a href="http://phantomjs.org/" rel="nofollow"><code>phantomjs</code></a>. So you need to have that installed when you want to use <code>WWW::Mechanize::PhantomJS</code>. </li> <li><code>WWW::Mechanize::PhantomJS</code> is complete without a screen, so you cant see the page. One part to <em>see</em> what the page would look like, is to use the <code>content_as_png</code> method. For further information about this, you can take a look at the POD.</li> </ul> <p>Just use javascript after that to change the value. </p> <hr> <p>Another problem might be the call of <code>set_fields</code>. </p> <pre><code># i'm not sure if this works $mech-&gt;set_fields('page' =&gt; $nbpage); # form WWW::Mechanize::FAQ # when you have warnings on: { local $^W = 0; $mech-&gt;field( page =&gt; $nbpage ); } </code></pre>