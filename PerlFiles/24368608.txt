How to return success after running a script
<p>I'm really new to both Perl and Ajax and I was wondering how do I return a message for ajax to know if a script ran successfully and run a success script after knowing the perl script was successful.</p> <p>On my main html page I have an ajax script like this:</p> <pre><code>$(document).on('click', '.archive-button', function(){ var notice_id = $(this).data('notice_id'); var archiveaddress = '/user/notices/archivenotice/' + notice_id; $.post(archiveaddress, {notice_id: notice_id}); }); </code></pre> <p>which send its to the archivenotice.html page which runs a Perl script which just marks the time the notice was read.</p> <pre><code>my $update_needed = 0; unless ($notice-&gt;read_on()) { $notice-&gt;read_on(scalar localtime); $update_needed = 1; } </code></pre> <p>What should I add to the Perl script on the archivenotice.html pages so that the ajax on my main html page knows the script ran successfully and initiate another script called "successful"</p>
<p>Try this:</p> <pre><code>$(document).on('click', '.archive-button', function(){ var notice_id = $(this).data('notice_id'); var archiveaddress = '/user/notices/archivenotice/' + notice_id; $.post(archiveaddress, {notice_id: notice_id}).done(function() { alert( "update success" ); }); }); </code></pre>
<p>Open a channel of communication between your main.html page and archivenotice Perl script.</p> <p>main.html</p> <pre><code>$(document).on('click', '.archive-button', function(){ var notice_id = $(this).data('notice_id'); var archiveaddress = '/user/notices/archivenotice/' + notice_id; $.post(archiveaddress, {notice_id: notice_id}, function( data ) { if ( data ) { alert('Update needed!'); } else { alert('Update not needed.'); } }); }); </code></pre> <p>archivenotice</p> <pre><code>my $update_needed = 0; unless ($notice-&gt;read_on()) { $notice-&gt;read_on(scalar localtime); $update_needed = 1; } print "Content-type: text/plain\n\n"; print $update_needed; exit; </code></pre>