Perl Template::Toolkit regex matching either values
<p>I am trying to match either of the string in the Perl <a href="https://metacpan.org/module/Template%3a%3aToolkit" rel="nofollow"><code>Template::Toolkit</code></a> module. </p> <p><code>url</code> is getting its value from the script.</p> <pre><code>[% IF url == ("a/b/c" | "d/e/f") %] </code></pre> <p>Is this the right way of doing it? I looked at the documents. It mentioned the 'matches' method, but I am looking for a simpler way of doing it.</p>
<p>You can use the <a href="http://template-toolkit.org/docs/manual/VMethods.html#method_match" rel="nofollow">match virtual method</a> to test a regexp. This is as simple as it gets.</p> <pre><code>use strict; use warnings; use Template; my $t = Template-&gt;new; $t-&gt;process( \*DATA, { urls =&gt; [qw( http://example.com/a/b/c http://example.com/xyz http://example.com/x/d/e/f )] } ); __DATA__ [% FOREACH url IN urls %] [%- IF url.match('a/b/c|d/e/f') %] [%- url %] - match [%- ELSE %] [%- url %] - NO match [%- END %] [% END %] </code></pre> <p>Outputs:</p> <pre><code>http://example.com/a/b/c - match http://example.com/xyz - NO match http://example.com/x/d/e/f - match </code></pre> <p>Alternatively, perform the match on the URL in your script then pass the boolean outcome to the template.</p>
<p>I think it's a little awkward to use regular expressions in <code>Template::Toolkit</code>, but in this case you can just write</p> <pre><code>[% IF url == 'a/b/c' or url == 'd/e/f' %] </code></pre> <p>If you need anything more complex then you're probably misunderstanding the r√¥le of templates, but you can always evaluate a Boolean condition within Perl and pass that value into the template</p> <hr> <p><strong>Update</strong></p> <p>Or you could use <code>SWITCH</code>, like this</p> <pre><code>[% SWITCH url %] [% CASE [ 'a/b/c', 'd/e/f' ] %] ... [% END %] </code></pre>