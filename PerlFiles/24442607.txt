Regex in perl prints just first instance
<p>I'm trying to read from file, line by line, and if a line contains something from regex, print that line.</p> <pre><code>my $file = 'test.txt'; open my $info, $file or die "Could not open $file: $!"; while( my $line = &lt;$info&gt;) { if ($line =~ /\d\d\W\d\d\W\d\d/) { print $&amp;; } } </code></pre> <p>Test file</p> <pre><code> &lt;td align='center'&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style='width:1px;padding:0px;'&gt;&lt;img src='styles/images/cat/bluray.png' alt='Blu-ray'&gt;&lt;/td&gt; &lt;td&gt;&lt;a href='details.php?id=313788&amp;hit=1'&gt;&lt;b&gt;The.Raid.2.2014.1080p.BluRay.REMUX.AVC.DTS-HD.MA.5.1.RoSubbed...&lt;/b&gt;&lt;/a&gt;&lt;/td&gt; &lt;td align='center' style='width:1px;'&gt;&lt;font class='small'&gt;2014-06-27&lt;br /&gt;03:39:15&lt;/font&gt;&lt;/td&gt; &lt;td align='center'&gt;0&lt;/td&gt; &lt;td align='center'&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style='width:1px;padding:0px;'&gt;&lt;img src='styles/images/cat/bluray.png' alt='Blu-ray'&gt;&lt;/td&gt; &lt;td&gt;&lt;a href='details.php?id=313781&amp;hit=1'&gt;&lt;b&gt;Rio.2.2014.Blu-ray.REMUX.1080p.AVC.DTS-HD.MA.7.1.RoSubbed-playBD&lt;/b&gt;&lt;/a&gt;&lt;/td&gt; &lt;td align='center' style='width:1px;'&gt;&lt;font class='small'&gt;2014-06-27&lt;br /&gt;00:27:25&lt;/font&gt;&lt;/td&gt; &lt;td align='center'&gt;48&lt;/td&gt; &lt;td align='center'&gt;33&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style='width:1px;padding:0px;'&gt;&lt;img src='styles/images/cat/hdtv.png' alt='HDTV'&gt;&lt;/td&gt; &lt;td&gt;&lt;a href='details.php?id=313717&amp;hit=1'&gt;&lt;b&gt;Cosmos. A Spacetime Odyssey 2014 1080p BluRay DD5.1 x264-DON&lt;/b&gt;&lt;/a&gt;&lt;/td&gt; &lt;td align='center' style='width:1px;'&gt;&lt;font class='small'&gt;2014-06-26&lt;br /&gt;16:26:30&lt;/font&gt;&lt;/td&gt; &lt;td align='center'&gt;19&lt;/td&gt; </code></pre> <p>Right now it prints just the first instance that finds, and there are more in the file. If I want to print $line in place of $&amp;, it prints every line of the file like the IF statement is true every time.</p>
<p>Since you get <code>count=0</code> as per your comment, it means you are actually processing ONE single line - your file gets slurped in 100%.</p> <p>This usually happens when you have a mismatch between input record separator <code>$/</code> and the file's line ending character, due to one being Windows and one being Unix: Unix newlines are <code>"\n"</code> character whereas DOS/Windows are <code>"\r\n"</code></p> <p>To fix, the following approaches would work:</p> <ol> <li><p>Convert the file from Unix to Windows format (on Unix side, use <code>unix2dos</code> command)</p></li> <li><p>Change <code>$/</code> to <code>"\n"</code>.</p></li> <li><p>Slurp the file entirely (using <code>my $data = File::Slurp::read_file($filename);</code>) and then split $data on <code>"\n"</code> character into lines.</p></li> </ol>