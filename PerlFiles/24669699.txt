Output .Resx From .CS using perl script
<p>.CS contains string within double quotes and I am trying to extract these strings into .resx file. The existing code output the .resx but with only one string whereas .CS file contains more than one strings in quotes. Can you please provide any reference to achieve this?</p> <pre><code>use strict; use warnings; use File::Find; use XML::Writer; use Cwd; #user input: [Directory] my $wrkdir = getcwd; system "attrib -r /s"; print "Processing $wrkdir\n"; find( \&amp;recurse_src_path, $wrkdir ); sub recurse_src_path { my $file = $File::Find::name; my $fname = $_; my @lines; my $line; if ( ( -f $file ) &amp;&amp; ( $file =~ /.*\.cs$/i ) ) { print ".."; open( FILE, $file ) || die "Cannot open $file:\n$!"; while ( $line = &lt;FILE&gt; ) { if ( $line =~ s/\"(.*?)\"/$1/m ) { chomp $line; push( @lines, $line ); my $nl = '0'; my $dataIndent; my $output = new IO::File("&gt;Test.resx"); #binmode( $output, ":encoding(utf-8)" ); my $writer = XML::Writer-&gt;new( OUTPUT =&gt; $output, DATA_MODE =&gt; 1, DATA_INDENT =&gt; 2 ); $writer-&gt;xmlDecl("utf-8"); $writer-&gt;startTag('root'); foreach my $r ($line) { print "$1\n"; $writer-&gt;startTag( 'data', name =&gt; $_ ); $writer-&gt;startTag('value'); $writer-&gt;characters($1); $writer-&gt;endTag('value'); $writer-&gt;startTag('comment'); $writer-&gt;characters($1); $writer-&gt;endTag('comment'); $writer-&gt;endTag('data'); } $writer-&gt;endTag('root'); $writer-&gt;end; $output-&gt;close(); } } close FILE; } } </code></pre>
<p>Use the <code>/g</code> regex modifier. For example:</p> <pre><code>use strict; use warnings; my $cs_string = ' // Imagine this is .cs code here system "attrib -r /s"; print "Processing $wrkdir\n"; find( \&amp;recurse_src_path, $wrkdir ); '; while ($cs_string =~ /\"(.*)\"/g) { print "Found quoted string: '$1'\n" } ; </code></pre> <p>See also: <a href="http://perldoc.perl.org/perlrequick.html#Matching-repetitions" rel="nofollow">http://perldoc.perl.org/perlrequick.html#Matching-repetitions</a></p> <p>You might also want to look at <a href="http://search.cpan.org/~uri/File-Slurp-9999.19/lib/File/Slurp.pm" rel="nofollow">File-Slurp</a> to read your .cs code into a single Perl scalar, trusting that your .cs file is not too large.</p> <p>Finally combine this with your existing code to get the .resx output format.</p>