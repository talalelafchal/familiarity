Join from a deep hashref in perl
<p>I have a function called <code>scrape_html</code> what returns an array of deep hashrefs.</p> <p>The next code prints the correct result:</p> <pre><code>use 5.014; use warnings; for my $table (scrape_html()) { say join("\t", $table-&gt;{tr}-&gt;[0]-&gt;{td}-&gt;[1], $table-&gt;{tr}-&gt;[2]-&gt;{td}-&gt;[1], $table-&gt;{tr}-&gt;[4]-&gt;{td}-&gt;[1], ); } </code></pre> <p>it prints, for example:</p> <pre><code>r0c1 r2c1 r4c1 </code></pre> <p>I want make it shorter with cleaner row numbers, like the next:</p> <pre><code>use 5.014; use warnings; for my $table (scrape_html()) { say $table-&gt;{tr}-&gt;[$_]-&gt;{td}-&gt;[1] for (qw(0 2 4) ); } </code></pre> <p>This prints:</p> <pre><code>r0c1 r2c1 r4c1 </code></pre> <p>The problem is - how to join it? The next code</p> <pre><code>use 5.014; use warnings; for my $table (scrape_html()) { say join("\t", ( $table-&gt;{tr}-&gt;[$_]-&gt;{td}-&gt;[1] for (qw(0 2 4) ) ) ); } </code></pre> <p>says:</p> <pre><code>syntax error at soex.pl line 7, near "] for " Execution of soex.pl aborted due to compilation errors. </code></pre> <p>What is the correct syntax?</p> <p>If someone want a demo of scrape_html</p> <pre><code>sub scrape_html { return ( { 'tr' =&gt; [ { 'td' =&gt; [ 'r0c0', 'r0c1' ] }, { 'td' =&gt; [ 'r1c0', 'r1c1', ] }, { 'td' =&gt; [ 'r2c0', 'r2c1' ] }, { 'td' =&gt; [ 'r3c0', 'r3c1' ] }, { 'td' =&gt; [ 'r4c0', 'r4c1' ] }, { 'td' =&gt; [ 'r5c0', 'r5c1' ] }, ] } ); } </code></pre>
<p>You want to use <code>map</code> which returns transformed elements,</p> <pre><code>say join("\t", ( map $table-&gt;{tr}-&gt;[$_]-&gt;{td}-&gt;[1], qw(0 2 4) ) ); </code></pre>