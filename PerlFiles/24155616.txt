Reading csv file with multiple values in a column with Perl
<p>I want to delete a column from csv file using perl, for that I am splitting the line on ",", but there are some columns with multiple values and hence multiple commas. That is each line may have different number of commas, so its hard to delete a column that I want to be deleted. Can you help in doing so?</p>
<p>For processing CSV files, use an actual csv parser like <a href="https://metacpan.org/pod/Text%3a%3aCSV" rel="nofollow"><code>Text::CSV</code></a>.</p> <p>This will take care of the instances of fields enclosed in quotes because they contain commas.</p>
<p>Suppose your file looks like </p> <pre><code>Tudor,Vidor,10,Hapci Szundi,Morgo,7,Szende Kuka,"Hofeherke, alma",100,Kiralyno Boszorkany,Herceg,9,Meselo </code></pre> <p>and you want to find sum of 3rd column, but in 3rd row you see the 2nd column has value with comma so to handle that use <code>Text::CSV</code> as:</p> <pre><code>#!/usr/bin/perl use strict; use warnings; use Text::CSV; my $csv = Text::CSV-&gt;new({ sep_char =&gt; ',' }); my $file = $ARGV[0] or die "Need to get CSV file on the command line\n"; my $sum = 0; open(my $data, '&lt;', $file) or die "Could not open '$file' $!\n"; while (my $line = &lt;$data&gt;) { chomp $line; if ($csv-&gt;parse($line)) { my @fields = $csv-&gt;fields(); $sum += $fields[2]; } else { warn "Line could not be parsed: $line\n"; } } print "$sum\n"; </code></pre> <p>If you'd prefer to access the fields in your CSV file by name, use <a href="http://search.cpan.org/perldoc/Tie%3a%3aHandle%3a%3aCSV" rel="nofollow"><strong>Tie:Handle::CSV</strong></a></p>