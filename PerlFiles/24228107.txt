Perl: can't locate object method bar via package
<p>I am new to this site, so bear with me, If this question has already been answered somewhere else already. I am trying to call a subroutine "bar" from a module "codons1.pm" , and I encounter the error: Can't locate object method "bar" via package "codons1.pm" (perhaps you forgot to load "codons1.pm"?). The main script looks like:</p> <pre><code>use strict; use warnings; my $i = 1; my $pack = "codons$i\.pm"; require $pack; (my %temp) = $pack-&gt;bar(); print keys %INC ; </code></pre> <p>Thanks to (<a href="http://stackoverflow.com/questions/15689661/perl-objects-error-cant-locate-object-method-via-package">Perl objects error: Can&#39;t locate object method via package</a>) , I was able to verify using %INC, that the module is loaded. The module looks like:</p> <pre><code>package codons1; sub bar{ #some code; return (%some_hash);} 1; </code></pre> <p>I am using $i so that I can load multiple similar modules via a loop. Any suggestions is welcome and thanks a lot, in advance.</p>
<p>Your package is <code>codons1</code>, and you're trying to call <code>codons1.pm-&gt;bar</code>. Either of the following will work correctly:</p> <pre><code>my $pack = "codons$i"; require "$pack.pm"; $pack-&gt;bar(); </code></pre> <p>or</p> <pre><code>my $pack = "codons$i"; eval "require $pack"; $pack-&gt;bar(); </code></pre>
<p>A better way to do what you're trying to achieve</p> <pre><code>#!/usr/bin/perl use strict; use warnings; package codons1; sub new { my $class = shift; return bless {}, $class; } sub bar { my %some_hash = (temperature=&gt;"35"); return %some_hash; } 1; package main; my $object = codons1-&gt;new(); #creates the object of codons1 my %temp = $object-&gt;bar(); #call the bar method from codons1's object print keys %temp; </code></pre> <p><a href="http://ideone.com/9Ky99p" rel="nofollow"><strong>Demo</strong></a></p> <p>You need to learn basic object oriented programming in Perl. Start with <a href="http://perldoc.perl.org/perlootut.html" rel="nofollow"><strong>perlootut</strong></a>, and then <a href="http://perldoc.perl.org/perlobj.html" rel="nofollow">perlobj</a>. Read the <a href="http://blob.perl.org/books/beginning-perl/3145_Chap11.pdf" rel="nofollow">Object Oriented Perl chapter</a> from freely available Beginning Perl book.</p>