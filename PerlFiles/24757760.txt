Transfer Data between cgi and Javascript/Jquery
<p>I want to transfer Data between the cgi page and javascript/Jquery and return back to cgi page</p> <p>Index.html has the form contents</p> <p>login.cgi has</p> <pre><code>my $username= $cgi-&gt;param('uid'); if (($cgi-&gt;param('uid') eq 'demo') &amp;&amp; ($cgi-&gt;param('pwd') eq 'demo')) { my $cookie = CGI::Cookie-&gt;new(-name=&gt; 'uid', -value=&gt; $cgi-&gt;param('uid')); print $cgi-&gt;redirect(-uri =&gt; '/cgi-bin/index.cgi', -cookie =&gt; $cookie); </code></pre> <p>index.cgi has</p> <pre><code>my $uid = $cookies{uid}-&gt;value; print $uid; print &lt;&lt;"HTML_CODE" &lt;html&gt; &lt;head&gt; &lt;script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.min.js"&gt;&lt;/script&gt; &lt;script src="/scripts/test_javascript.js" type="text/javascript"&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt; This is a Demo Login Page of $uid &lt;/h2&gt; &lt;/body&gt; &lt;/html&gt; HTML_CODE ; </code></pre> <p>test_javascript.js has</p> <pre><code> $(document).ready(function () { var uid = $('#uid').attr('value'); if (uid) { $.ajax({ url:'/cgi-bin/index.cgi', data: "uid=" + uid, // script call was *not* successful error: function() { alert("script call was not successful"); }, // script call was successful // data should contain the string returned by the Perl script success: function(data){ alert("Your userid is: " + data) } }); } } ) </code></pre>
<pre><code>$(document).ready(function () { var uid = $.cookie("uid"); if (uid) { $.ajax({ url:'/cgi-bin/index.cgi', data: "uid=" + uid, // script call was *not* successful error: function() { alert("script call was not successful"); }, // script call was successful // data should contain the string returned by the Perl script success: function(data){ alert("Your userid is: " + data) } }); } } ) </code></pre>
<p>Otion 1 - I would hardcode it in the index.cgi. This way you can insert the value into the javascript code.</p> <p>This should be your index.cgi:</p> <pre><code>$(document).ready(function () { var uid = $cookies{uid}-&gt;value; if (uid) { $.ajax({ url:'/cgi-bin/index.cgi', data: "uid=" + uid, // script call was *not* successful error: function() { alert("script call was not successful"); }, // script call was successful // data should contain the string returned by the Perl script success: function(data){ alert("Your userid is: " + data) } }); } } ) my $uid = $cookies{uid}-&gt;value; print $uid; print &lt;&lt;"HTML_CODE" &lt;html&gt; &lt;head&gt; &lt;script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.min.js"&gt;&lt;/script&gt; &lt;script src="/scripts/test_javascript.js" type="text/javascript"&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt; This is a Demo Login Page of $uid &lt;/h2&gt; &lt;/body&gt; &lt;/html&gt; HTML_CODE ; </code></pre> <p>Option 2 - assign $cookies{uid}->value to a hidden input and have testjavascript pick it up later</p> <p>Index.cgi:</p> <pre><code>print &lt;&lt;"HTML_CODE" &lt;html&gt; &lt;head&gt; &lt;script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.min.js"&gt;&lt;/script&gt; &lt;script src="/scripts/test_javascript.js" type="text/javascript"&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt; This is a Demo Login Page of $uid &lt;/h2&gt; &lt;input id="uid" type="$cookie{uid}-&gt;value"/&gt; &lt;/body&gt; &lt;/html&gt; HTML_CODE ; </code></pre>