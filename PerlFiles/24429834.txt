Perl: How to get awk output from variable
<p>I am getting syntax error for awk.</p> <pre><code>value = a|b|c|d|e|F|g|h my $record = `$value | awk -F "|" '{print $5}'`; </code></pre> <p>Thanks,</p>
<p>Try this: </p> <pre><code> my $record = ( split /\|/, 'a|b|c|d|e|F|g|h' )[4]; </code></pre> <p>With <code>$value</code>:</p> <pre><code>my $record = ( split /\|/, $value )[4]; </code></pre> <p>Or there's even this: </p> <pre><code>my ( undef, undef, undef, undef, $record ) = split /\|/, $value; </code></pre> <p>Shelling to awk to <em>split</em>, is like not even trying Perl. </p>
<p>If you were at the shell prompt, you'd use the following:</p> <pre><code>echo 'a|b|c|d|e|F|g|h' | awk -F "|" '{print $5}' </code></pre> <p>But you're executing the following (assuming Perl's <code>$5</code> is uninitialized):</p> <pre><code>a|b|c|d|e|F|g|h | awk -F "|" '{print }' </code></pre> <p>(Didn't you try printing out the command you were executing when noticed it wasn't working?)</p> <p>Fix:</p> <pre><code>use String::ShellQuote qw( shell_quote ); my $cmd = shell_quote('echo', $value) . ' | ' . shell_quote('awk', '-F', '|', '{print $5}'); my $fifth_field = `$cmd`; </code></pre> <p>Of course, it's much simpler to use <code>split</code> and a list slice.</p> <pre><code>my $fifth_field = ( split /\|/, $value )[4]; </code></pre>
<p>If you're ever tempted to call awk from Perl then you're almost certainly doing something wrong. Perl can do pretty much everything that awk can do - and do it more efficiently and more portably.</p> <pre><code>my $value = 'a|b|c|d|e|F|g|h'; my $record = (split /\|/, $value)[4]; # 4, not 5 as Perl arrays are zero-indexed </code></pre>