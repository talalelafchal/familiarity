Coutn unique occurance of match in a line
<p>I have file with entry: (----) Manish Garg 74163: V2.0.1_I3_SIT: KeyStroke Logger decrypted file for key stroke displayed a difference of 4 hours from CCM time. - 74163: KeyStroke Logger decrypted file for key stroke displayed a difference of 4 hours from CCM time. 2014/07/04 I want to look for the unique count of id "74163" or any id in a line. Currently it gives the output as : updated_workitem value> "74163" Count> "2" But i want the count value as 1.(I dont want to include duplicate entry in count)</p> <pre><code>My code is my $workitem; $file = new IO::File; $file-&gt;open("&lt;compare.log") or die "Cannot open compare.log"; @file_list = &lt;$file&gt;; $file-&gt;close; foreach $line (@file_list) { while ($line =~ m/(\d{4,}[,|:])/g ){ @temp = split(/[:|,]/, $1); push @work_items, $temp[0]; } } my %count; my @wi_to_built; map { $count{$_}++ } @work_items; foreach $workitem (sort keys (%count)) { chomp($workitem); print "updated_workitem value&gt; \"$workitem\"\n"; print "Count&gt; \"$count{$workitem}\"\n"; } </code></pre>
<p>You can remove duplicate from array before doing <code>map { $count{$_}++ } @work_items;</code></p> <pre><code>@work_items = uniq(@work_items); sub uniq { my %seen; grep !$seen{$_}++, @_; } </code></pre> <p><a href="http://ideone.com/BtGXQQ" rel="nofollow">Demo</a></p>
<p>Use a hash to track unique ids found in a particular line:</p> <pre><code>foreach my $line (@file_list) { my %line_ids; while ($line =~ m/(\d{4,})[,|:]/g ){ $line_ids{$1} = 1; # Record unique ids } push @work_items, keys %line_ids; # Save the ids } </code></pre> <p>Note, I've changed your regex slightly so you don't need to <code>split</code> to a temporary array.</p>