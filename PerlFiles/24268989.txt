workaround for SPLIT 1000 file limit?
<p>I need to split a few large files into specifically sized smaller files, with 500-5000 smaller files output. I'm using <code>split</code> with a -b designation, so I'm using a manual workaround when reaching the <code>split</code> 1000 file limit. Is there a another UNIX command or Perl one-liner that will accomplish this?</p>
<p>If I try to create lots of files, I get </p> <pre><code>$ perl -e'print "x"x5000' | split -b 1 &amp;&amp; echo done. split: output file suffixes exhausted </code></pre> <p>By default, the suffix length is two, which allows for 26<sup>2</sup> = 676 parts. Increasing it to three allows for 26<sup>3</sup> = 17,576 parts</p> <pre><code>$ perl -e'print "x"x5000' | split -b 1 -a 3 &amp;&amp; echo done. done. </code></pre>
<p>One can control Perl's notion of an input record by setting <a href="http://perldoc.perl.org/perlvar.html" rel="nofollow"><code>$/</code></a>:</p> <blockquote> <p>Setting <code>$/</code> to a reference to an integer, scalar containing an integer, or scalar that's convertible to an integer will attempt to read records instead of lines, with the maximum record size being the referenced integer number of characters. So this:</p> <pre><code>local $/ = \32768; # or \"32768", or \$var_containing_32768 open my $fh, "&lt;", $myfile or die $!; local $_ = &lt;$fh&gt;; </code></pre> <p>will read a record of no more than 32768 characters from <code>$fh</code>.</p> </blockquote> <hr> <p>So to split a large file into smaller files no larger than 1024 bytes, one could use the following:</p> <pre><code>use strict; use warnings; $/ = \1024; my $filename = 'A'; while (&lt;&gt;) { open my $fh, '&gt;', ($filename++ . '.txt') or die $!; print $fh $_; close $fh or die $!; } </code></pre>
<p>Are you sure about the 1000 file limit?</p> <p>The original <code>split</code> had no such limit, and there's no limit for GNU or BSD version of <code>split</code>. Maybe you're confusing the suffix length with some sort of limit. On BSD, the suffix starts at <code>.aaa</code> and goes all of the way to <code>.zzz</code> which is over 17,000 files.</p> <p>You can use the <code>-a</code> flag to adjust the suffix size if the three character suffix isn't enough.</p> <pre><code>$ split -a 5 $file </code></pre>