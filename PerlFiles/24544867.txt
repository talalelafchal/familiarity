Create a file in remote linux machine
<p>I want to create a file in remote Linux machine from my local windows machine. The file which will be created should be of 10 lines like</p> <pre><code>E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917193000|12 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917194000|13 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917195000|14 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917196001|15 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917193002|6 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917193500|13 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917193700|1 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917193200|13 </code></pre> <p>My code:</p> <pre><code>use Net::SSH2::Simple; use Net::SSH2; my $ssh2 = Net::SSH2::Simple-&gt;new(); $ssh2-&gt;connect('host') or die "Unable to connect Host $@ \n"; $ssh2-&gt;auth_password('user','password') or die "Unable to login $@ \n"; my $test = &lt;&lt;'END'; E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917193000|12 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917194000|13 E-762334|UC5L0001|2.6.7.1.0.12.0.0.0.372|3.0.0|20130917195000|14 END my $cmd="echo $test &gt; /data/spanda/pppp1"; ($stdout,$stderr, $exitcode) = $ssh2-&gt;cmd($cmd ,'bufsize' =&gt; 4_096 ) or die "cannot execute command: "; if ($exitcode == 0) { print $stdout if $stdout; print $stderr if $stderr; } else { print $stderr if $stderr; die "command failed with exit code $exitcode"; } </code></pre> <p>I am getting Error like </p> <pre><code>13: Command not found. E-762334: Command not found. UC5L0001: Command not found. 2.6.7.1.0.12.0.0.0.372: Command not found. 3.0.0: Command not found. </code></pre>
<p>Your command doesn't work for the same reason as <code>echo foo|bar &gt; /tmp/x</code> doesn't work (strings with pipes should be quoted).</p> <p>On the other hand there is more robust method; <code>Net::SSH2::Simple</code> inherits from <a href="https://metacpan.org/pod/Net%3a%3aSSH2" rel="nofollow"><code>Net::SSH2</code></a> which in turn can return <a href="http://search.cpan.org/~rkitover/Net-SSH2-0.53/lib/Net/SSH2/SFTP.pm" rel="nofollow"><code>Net::SSH2::SFTP</code></a> object,</p> <pre><code> use Fcntl; # my $sftp = $ssh2-&gt;sftp(); my $fh = $ssh2-&gt;sftp-&gt;open('/data/spanda/pppp1', O_WRONLY|O_CREAT) or die; print $fh $test; </code></pre>