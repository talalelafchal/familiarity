receiving RFC2833 DTMF in Perl ESL script while Outbound calling and executing a lua script
<p>I have wirtten a Perl ESL script which places an outbound call and bridges that togehter with a lua script which does some tts with flite.</p> <p>This worked well with SIP INFO DTMF. But since our SIP Provider disables SIP INFO and switched to RFC2833 the ESL script no longer gets DTMF events. In the freeswitch console I see all the DTMF events.</p> <p>I connect to all events with:</p> <p>$con->events("plain","ALL");</p> <p>but dont get any DTMF event all other events I get.</p> <p>Any Idea?</p>
<p>Not sure about Perl, but you can use something like this from LUA:</p> <pre><code> digits = session:playAndGetDigits(min_digits, max_digits, max_tries, digit_timeout, terminators , sounds_file", "", "\\d+") </code></pre> <p>That will collect the DTMF digits that are passed to it and you can call it from your dialplan such as:</p> <pre><code> &lt;action application="lua" data="get_dtmf.lua" /&gt; </code></pre> <p>You can iterate through the "digits" to do what you need to do.</p>