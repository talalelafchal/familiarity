ping check in perl command doesn't work
<p>So let's say I ping an arbitrary host that is down or can't access for whatever reason.</p> <p>If I were to do this in terminal</p> <pre><code>ping -c 2 DOWNED_HOST_NAME_HERE </code></pre> <p>I would get:</p> <pre><code>ping: unknown host DOWNED_HOST_NAME_HERE </code></pre> <p>However, this line of code isn't causing the script to die when I need it to.</p> <pre><code>my $ping_check = `ping -c 2 $host`; if ($ping_check =~ /ping: unknown host $host/){ die("Error: Cannot currently access host."); } </code></pre> <p>I cannot use the Net::Ping for this script, I have to use basic perl. Wouldn't this cause the script to error out? I noticed when I warned $ping_check, it outputted an empty string.</p>
<p>Try this:</p> <pre><code>my $ping_check = `ping -c 2 $host 2&gt;&amp;1`; </code></pre> <p>The error message is being printed to stderr. The result of your command is stdout. <code>2&gt;&amp;1</code> combines stderr <code>2</code> with stdout <code>1</code></p> <p>I always use <a href="http://perldoc.perl.org/Net/Ping.html" rel="nofollow"><code>Net::Ping</code></a> for that though. It's gives you a lot more control and is more portable.</p>