grep: can't open &quot;command&quot;
<p>I am logging in to the remote machine and executing a command and then grepping the result. I am using Expect module. Here is my sample code.</p> <pre><code>use Expect; my $exp=new Expect(); $exp-&gt;spawn("ssh $hostname\r"); $exp-&gt;expect(5,"*]-&gt; "); $exp-&gt;send("command sent here \r"); $exp-&gt;expect(5,"*]-&gt; "); my $res=$exp-&gt;before(); // Here i ll get the command output in a variable. The variable contains TCPIP:1.1.1.1 in one line and UDPIP:1.2.2.2 in another line. my $id=`grep -i TCPIP $res | cut -d ":" -f2 `; print " The result is $id \n"; </code></pre> <p>But here i am getting an error </p> <pre><code>grep: can't open "command sent " .sh: TCPIP not found sh:UDPIP not found. </code></pre>
<p>Maybe you can do even without <code>expect</code>?</p> <pre><code>my $id = `ssh $hostname &lt;your_command&gt; | grep -i TCPIP | cut -d":" -f2`; </code></pre>
<p>grep takes a filename as paramater not a string. You need something like this:</p> <pre><code>echo $res | grep -i TCPIP | cut -d ":" -f2 `; </code></pre> <p>Make sure the command works manually via ssh first though.</p> <p>But consider using perl itself do do the match and cut rather than spawning out to grep, that would be better.</p>